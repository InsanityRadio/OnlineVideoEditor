{"version":3,"sources":["logo.svg","network/IAirTower.js","network/models/Model.js","network/models/Platform.js","network/models/CoreShare.js","network/models/CoreVideo.js","network/models/CoreImport.js","network/models/Slate.js","network/CoreAirTower.js","network/models/CuePoint.js","network/models/Import.js","network/IngestAirTower.js","network/AirTower.js","config/authorisation/Facebook.jsx","config/authorisation/Instagram.jsx","config/CreatePlatform.jsx","config/EditPlatform.jsx","config/Config.jsx","components/Timeline.jsx","components/Video.jsx","components/VideoControls.jsx","frame/Frame.jsx","components/VideoThumbnail.jsx","components/VideoThumbnailContainer.jsx","components/AbsoluteTimePicker.jsx","slate/VideoSelectorNew.jsx","slate/VideoSelector.jsx","slate/Slate.jsx","edit/config/Default.jsx","edit/config/Facebook.jsx","edit/config/YouTube.jsx","edit/config/Twitter.jsx","edit/config/Instagram.jsx","edit/EditVideoType.jsx","edit/Edit.jsx","home/Home.jsx","import/CuePointSelector.jsx","import/TimeSelector.jsx","import/Import.jsx","imports/Imports.jsx","Preload.jsx","navigation/Header.jsx","navigation/Navigation.jsx","App.js","serviceWorker.js","index.js"],"names":["module","exports","__webpack_require__","p","IAirTower","url","query","options","_this","this","root","arguments","length","undefined","URLSearchParams","toString","credentials","headers","fetch","then","response","checkResponse","json","status","console","error","form","data","FormData","Object","keys","forEach","key","append","def","method","body","assign","file","fetchWithForm","Model","classCallCheck","initialize","attribute","structure","params","map","a","value","array","defineProperty","get","bind","Platform","serviceName","possibleConstructorReturn","getPrototypeOf","call","attr_reader","facebook","instagram","twitter","youtube","platform_type","CoreShare","CoreVideo","getBasePath","id","CoreImport","Slate","CoreAirTower","prototype","setCSRFToken","csrf_token","setServices","services","token","csrfToken","success","Error","imp","importID","importObj","find","uuid","title","_this2","service","createImportObj","videoID","configuration","_this3","type","_this4","_this5","renders","_this6","slateObj","platformObj","slates","name","videoFile","cuePoint","_this7","fetchWithFile","cue_point","createSlateObj","platforms","_this8","createPlatformObj","_this9","platform_id","description","_this10","shareID","_this11","_this12","CuePoint","Import","service_name","IngestAirTower","startTime","endTime","start_time","end_time","imports","importModel","points","point","AirTower","airtowers","instance","className","getInstance","register","tower","push","Promise","all","bootstrap","catch","e","FacebookAuthorisation","state","connected","facebookPageID","facebookPages","visiblePages","window","FB","asyncInit","fbAsyncInit","facebookReady","getLoginStatus","login","setState","findPages","auth_type","scope","resolve","reject","api","page","instagram_business_account","react_default","createElement","style","width","renderPageSelection","renderAuthentication","field","event","target","hasOwnProperty","pageID","fbAccessToken","access_token","page_id","user_access_token","getAuthResponse","page_access_token","props","createPlatform","FormControl_default","variant","fullWidth","Select_default","onChange","updateLocalField","input","OutlinedInput_default","MenuItem_default","Divider_default","ExpansionPanelActions_default","Button_default","onClick","connectPage","facebookLogin","Component","InstagramAuthorisation","instagramPageID","findInstagramPages","instagram_page_id","CreatePlatform","core","loadPlatforms","platform","JSON","stringify","change","embedded","renderBody","Paper_default","Facebook_FacebookAuthorisation","Instagram_InstagramAuthorisation","selectPlatform","disabled","EditPlatform","updatePlatform","reauthenticate","deletePlatform","class","removePlatform","Config","reload","ExpansionPanel_default","ExpansionPanelSummary_default","expandIcon","ExpandMore_default","Typography_default","classes","heading","index_es","prefix","icon","ExpansionPanelDetails_default","EditPlatform_EditPlatform","CreatePlatform_CreatePlatform","renderPlatform","renderNew","withStyles","theme","fontSize","typography","pxToRem","fontWeight","fontWeightRegular","styles","slider","color","float","padding","Draggable","timeline","canvasContext","getCanvasState","getX","viewportStart","unitMap","unit","x","mousePosition","dragging","cursorPosition","getCanvasX","canvasWidth","velocity","realViewportStart","applyBounds","finalCursorPosition","position","Math","max","min","end","start","finalPosition","setPositionAndUpdate","Playhead","playheadX","sendOnChange","posX","strokeStyle","fillStyle","drawLine","fillRect","SegmentTerminus","getDirectionPropLabel","prop","getDirection","drawStart","drawEnd","canvasX","Timeline","zoom","playhead","assertThisInitialized","segments","nextProps","nextState","draggingTimeline","offset","autoUpdateViewport","viewportWidth","rerender","initialOffset","resizeCanvasLocalised","resizeCanvas","addEventListener","removeEventListener","c","canvas","getContext","drawFullGrid","drawPlayhead","dpr","devicePixelRatio","offsetWidth","height","offsetHeight","scale","level","zoomLevels","getZoom","steps","clearRect","ceil","i","floor","mySeconds","amIMaj","timecode","drawText","saveCanvas","canvasState","getImageData","putImageData","fullRender","fastRender","restoreCanvas","drawSegments","draw","drawSegment","segmentStart","segmentEnd","segment","startX","endX","x1","y1","x2","y2","beginPath","moveTo","lineTo","stroke","text","textAlign","textBaseline","fillText","rect","getBoundingClientRect","clientX","left","clientY","top","getMousePosition","isHit","draggingStartX","draggingViewportStart","hasMovedTimeline","startDrag","readOnly","newX","mouseMove","stopDrag","seconds","date","moment","unix","local","format","newZoom","newUnitMap","newUnit","es5","setZoom","ref","setCanvas","onMouseDown","mouseDown","onMouseMove","onMouseUp","mouseUp","Video","loading","timecodeBase","discontinuity","src","setSRC","hls","Hls","enableWorker","registerEvents","prevProps","on","Events","MANIFEST_PARSED","ERROR","warn","LEVEL_LOADED","rawDateTime","details","fragments","programDateTime","syncOffset","FRAG_CHANGED","currentFrag","frag","fragmentTime","expectedFragmentTime","video","currentTime","duration","abs","liveSyncPosition","forceUpdate","loadHLS","pendingLoadHLS","loadSource","attachMedia","v","play","pause","frameRate","getFrameRate","setTimecode","loadingState","videoState","playing","paused","ended","onStateChange","setVideo","onPlay","onVideoStateChange","onCanPlay","onPause","onEnded","VideoControls","seekStart","seekEnd","stepBackwards","stepForwards","playPause","Frame","themeConfig","line1","y","w","h","maxFont","wrap","minFont","line2","canva","layers.logo","layers.background","layers.foreground","initialStateData","parse","initialState","raw","layer","image","Image","onload","drawImage","config","newConfig","line","evaluateConfig","context","size","words","split","indexOf","font","measureText","phrase","slice","join","control","modifier","checked","clearText","display","background","mergeLayers","foreground","layers","backgroundColour","document","toDataURL","r","setLayer","getStyleForLayer","components_Video","previewSRC","setVideoState","components_VideoControls","AppBar_default","Toolbar_default","flex","coreImportObj","FormControlLabel_default","Checkbox_default","label","onValueChange","TextField_default","RadioGroup_default","Radio_default","saveAndClose","exportData","button","margin","spacing","VideoThumbnail","thumbnail","VideoThumbnailContainer","children","AbsoluteTimePicker","dateTime","triggerOnChange","getTimecode","log","InputProps","textField","setBackwards","topRowButton","setNow","setForwards","minWidth","VideoSelectorNew","uploading","onClose","slate","isNaN","parseFloat","uploadSlate","Dialog_default","open","scroll","DialogTitle_default","DialogContent_default","setData","selectFile","files","placeholder","mask","DialogActions_default","handleClose","handleSelect","autoFocus","VideoSelector","dialog","loadSlates","saveData","maxWidth","slate_VideoSelectorNew","closeSlateView","components_VideoThumbnailContainer","components_VideoThumbnail","getThumbnailPath","openNew","intro_slate_id","outro_slate_id","intro_slate_name","outro_slate_name","videoSRC","dialogArg","_this$setState2","onOpen","selectSlate","preview","slate_VideoSelector","DefaultConfig","visibility","share","objectSpread","immediate","FormHelperText_default","platformName","renderWindow","handleSave","autofocus","FacebookConfig","helperText","wordCount","rows","rowsMax","multiline","YouTubeConfig","TwitterConfig","tweet","InstagramConfig","EditVideoType","platformConfig","videoType","enabledProviders","entries","plat","filter","queued","rendered","getRenderStateClass","renderState","getRenderProgressPC","confirm","updateState","CardContent_default","component","IconButton_default","downloadVideo","reset","MenuList_default","getPlatforms","configurePlatform","ListItemIcon_default","ListItemText_default","primary","shares","isPlatformEnabled","openSubView","findShareForPlatform","view","argument","stateData","subview","subviewArgument","subviewState","saveConfiguration","platformID","isVideoReady","renderPostOptions","renderRenderProgress","CardActions_default","enabled","FormGroup_default","Card_default","getStyle","renderDialog","closeSubView","YouTube_YouTubeConfig","Facebook_FacebookConfig","Twitter_TwitterConfig","Instagram_InstagramConfig","Edit","lastSaveTime","frame","videoTitle","platformState","providers","loadImport","loadRenderState","interval","setInterval","clearInterval","match","airTower","ingest","findImportByID","getServiceName","getImportID","checkForVideos","takeOwnership","setTimeout","videos","enabledState","required","getEnabledVideoTypes","includes","deleteVideoById","createVideoByType","findShareForPlatformAndType","findVideoForType","updateShare","publishShare","deleteShare","createShare","resp","getPreviewPath","callback","checkAndCreateVideos","rateLimitSave","location","pathname","substr","history","replace","saveTimer","save","sendVideoForRender","renderVideo","set","getDownloadPath","_this13","updateVideo","video_id","_this14","pop","frame_Frame","getVideoSRC","slate_Slate","components_Timeline","onTimelineUpdate","updateLocalFieldAndSave","edit_EditVideoType","getRenderState","sendRender","downloadRawVideo","Home","Redirect","to","CuePointSelector","loadCuePoints","formatHMS","Date","time","toISOString","formatTime","TimeSelector","initial","getTime","setHours","getHours","setMinutes","getMinutes","setSeconds","getSeconds","setMilliseconds","getMilliseconds","minHeight","dist","ready","topOfHour","now","currentEdge","getEdgeTimecode","videoLoaded","serialize","importVideo","onSegmentStart","setSegmentStart","onSegmentEnd","setSegmentEnd","aria-label","selectTime","selectCuePoint","components_AbsoluteTimePicker","saveForLater","quickDownload","saveAndAdvance","import_CuePointSelector","import_TimeSelector","Imports","coreImports","queue","loadImports","findImports","sort","b","recoverMissing","coreImp","createCoreImport","newCoreImports","findCoreImport","Preload","Navigation","dispatchEvent","Event","_classNames","_classNames3","drawerClasses","classNames","drawerBase","drawerOpen","drawerClose","userBoxClasses","userBox","userBoxVisible","hideOnOpen","hideState","showState","Drawer_default","anchor","paper","List_default","menu","ListItem_default","toggle","Menu_default","ChevronLeft_default","Link","close","Home_default","QueuePlayNext_default","VideoLibrary_default","Public_default","_drawerClose","flexShrink","whiteSpace","overflowX","transition","transitions","create","easing","sharp","enteringScreen","breakpoints","up","leavingScreen","paddingTop","overflowY","opacity","withTheme","library","add","faPlay","faPause","faLongArrowAltLeft","faLongArrowAltRight","faStepBackward","faStepForward","faSave","faPlus","faFileVideo","faPencilAlt","faTrash","faDownload","faStopwatch","faFacebookF","faTwitter","faInstagram","faYoutube","createMuiTheme","palette","App","BrowserRouter","core_styles","navigation_Navigation","Route","exact","path","HomeComponent","ImportComponent","ImportsComponent","EditComponent","ConfigComponent","EditPlatformComponent","CreatePlatformComponent","Preload_Preload","Boolean","hostname","ReactDOM","render","src_App_0","getElementById","navigator","serviceWorker","registration","unregister"],"mappings":"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","file":"static/js/main.f1fb931f.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/logo.5d5d9eef.svg\";","export default class IAirTower {\n\n\tfetch (url, query, options, root = '/api') {\n\n\t\tif (query != undefined) {\n\t\t\tvar search = new URLSearchParams(query)\n\t\t\turl += '?' + search.toString();\n\t\t}\n\n\t\tif (!options) {\n\t\t\toptions = {};\n\t\t}\n\n\t\toptions.credentials = 'same-origin';\n\n\t\tif (!options.headers) {\n\t\t\toptions.headers = {}\n\t\t}\n\n\t\t// Setting this header prevents the JsonCsrf web application firewall rule being triggered\n\t\toptions.headers['X-Requested-With'] = 'XMLHttpRequest';\n\n\t\treturn fetch(root + url, options)\n\t\t\t.then ((response) => this.checkResponse(response))\n\t\t\t.then ((response) => response.json());\n\n\t}\n\n\tcheckResponse (response) {\n\n\t\tif (response.status >= 500) {\n\t\t\tconsole.error(\"Backend returned \" + response.status);\n\t\t}\n\n\t\treturn response;\n\n\t}\n\n\tfetchWithForm (url, query, form, options) {\n\n\t\tlet data = new FormData();\n\t\tObject.keys(form).forEach(key => data.append(key, form[key]));\n\n\t\tlet def = {\n\t\t\tmethod: 'POST',\n\t\t\tbody: data\n\t\t};\n\t\tObject.assign(def, options || {})\n\n\t\treturn this.fetch(url, query, def)\n\n\t}\n\n\t/**\n\t * Upload a File object\n\t */\n\tfetchWithFile (url, query, file, options) {\n\t\treturn this.fetchWithForm(url, query, { file }, options);\n\t}\n\n}","/**\n * Model allows us to represent data loaded from the server. \n * It allows us to quickly create a model, including child models, from a single object from a JSON response.\n * \n * By using Object.defineProperty, we can rightly make this data structure immutable.\n */\nexport default class Model {\n\n\tconstructor (data) {\n\t\tif (!data) {\n\t\t\treturn;\n\t\t}\n\t\tthis.initialize(data);\n\t}\n\n\tinitialize (data) {\n\t\t// Lazy initialize all our getters, as we can't define them pre-super call.\n\t\tfor (var key in data) {\n\t\t\tthis['_' + key] = data[key];\n\t\t}\n\t}\n\n\tget (attribute) {\n\n\t\tlet structure = this['a_' + attribute];\n\t\tlet params = this['b_' + attribute];\n\t\tif (!structure) {\n\t\t\treturn this['_' + attribute];\n\t\t}\n\n\t\treturn this['_' + attribute].map((a) => new structure(a, params));\n\n\t}\n\n\tset (attribute, value) {\n\t\tthis['_' + attribute] = value;\n\t\treturn this;\n\t}\n\n\t/*\n\t * Create the appropriate getters for an attribute. Can be passed a class to be used as a constructor.\n\t */\n\tattr_reader (attribute, structure, array, params) {\n\n\t\tif (array && structure) {\n\t\t\tthis['a_' + attribute] = structure;\n\t\t\tthis['b_' + attribute] = params;\n\t\t\tObject.defineProperty(this, attribute, {\n\t\t\t\tget: function () {\n\t\t\t\t\treturn this.get(attribute);\n\t\t\t\t}.bind(this)\n\t\t\t})\n\t\t} else {\n\t\t\tObject.defineProperty(this, attribute, {\n\t\t\t\tget: function () {\n\t\t\t\t\treturn structure ? new structure(this.get(attribute)) : this.get(attribute);\n\t\t\t\t}.bind(this)\n\t\t\t})\n\t\t}\n\n\t}\n\n}","import Model from './Model';\n\n/**\n * Import is a model that represents an import object, as generated by the server.\n *\n * Hence, it is immutable. \n */\nexport default class Platform extends Model {\n\tconstructor (data, serviceName) {\n\t\tsuper(data);\n\n\t\tthis.attr_reader('id');\n\t\tthis.attr_reader('name');\n\t\tthis.attr_reader('configuration');\n\t\tthis.attr_reader('platform_type');\n\t\tthis.attr_reader('default_share_text');\n\t}\n\n\tget icon () {\n\t\tlet icons = {\n\t\t\tfacebook: ['fab', 'facebook-f'],\n\t\t\tinstagram: ['fab', 'instagram'],\n\t\t\ttwitter: ['fab', 'twitter'],\n\t\t\tyoutube: ['fab', 'youtube']\n\t\t}\n\n\t\treturn icons[this.platform_type] || this.platform_type;\n\t}\n}","import Model from './Model';\nimport Platform from './Platform';\n\n/**\n * Import is a model that represents an import object, as generated by the server.\n *\n * Hence, it is immutable. \n */\nexport default class CoreShare extends Model {\n\n\tconstructor (data, serviceName) {\n\t\tsuper(data);\n\n\t\tthis.attr_reader('id');\n\t\tthis.attr_reader('platform', Platform);\n\t\tthis.attr_reader('configuration');\n\t\tthis.attr_reader('title');\n\t\tthis.attr_reader('description');\n\t\tthis.attr_reader('publish_on');\n\t\tthis.attr_reader('shared');\n\t}\n\n}","import Model from './Model';\n\nimport CoreShare from './CoreShare';\n\n/**\n * Import is a model that represents an import object, as generated by the server.\n *\n * Hence, it is immutable. \n */\nexport default class CoreVideo extends Model {\n\n\tconstructor (data, serviceName) {\n\t\tsuper(data);\n\n\t\tthis.attr_reader('id');\n\t\tthis.attr_reader('created_by');\n\t\tthis.attr_reader('type');\n\t\tthis.attr_reader('configuration');\n\t\tthis.attr_reader('queued');\n\t\tthis.attr_reader('rendered');\n\t\tthis.attr_reader('shares', CoreShare, true);\n\t}\n\n\tgetDownloadPath () {\n\t\treturn this.getBasePath() + '/download.mp4';\n\t}\n\n\tgetBasePath () {\n\t\treturn '/api/import/todo/video/' + this.id;\n\t}\n\n}","import Model from './Model';\nimport CoreVideo from './CoreVideo';\n\n/**\n * Import is a model that represents an import object, as generated by the server.\n *\n * Hence, it is immutable. \n */\nexport default class CoreImport extends Model {\n\n\tconstructor (data, serviceName) {\n\t\tsuper(data);\n\n\t\tthis.attr_reader('uuid');\n\t\tthis.attr_reader('title');\n\t\tthis.attr_reader('videos', CoreVideo, true);\n\t\tthis.attr_reader('created_by');\n\t}\n\n}","import Model from './Model';\n\n/**\n * Import is a model that represents an import object, as generated by the server.\n *\n * Hence, it is immutable. \n */\nexport default class Slate extends Model {\n\tconstructor (data, serviceName) {\n\t\tsuper(data);\n\n\t\tthis.attr_reader('id');\n\t\tthis.attr_reader('name');\n\t}\n\n\tgetThumbnailPath () {\n\t\treturn this.getBasePath() + '/thumbnail.jpg';\n\t}\n\n\tgetPath () {\n\t\treturn this.getBasePath() + '/download.mp4';\n\t}\n\n\tgetBasePath () {\n\t\treturn '/api/slates/' + this.id;\n\t}\n}","import IAirTower from './IAirTower';\n\nimport CoreImport from './models/CoreImport';\nimport Platform from './models/Platform';\nimport Slate from './models/Slate';\n\nexport default class CoreAirTower extends IAirTower {\n\n\tfetch (url, query, options, root = '') {\n\t\treturn super.fetch(root + url, query, options);\n\t}\n\n\tbootstrap () {\n\t\treturn this.fetch('/bootstrap')\n\t\t\t.then ((response) => {\n\t\t\t\tthis.setCSRFToken(response.csrf_token);\n\t\t\t\tthis.setServices(response.services);\n\t\t\t})\n\t}\n\n\tsetCSRFToken (token) {\n\t\tthis.csrfToken = token;\n\t}\n\n\tsetServices (services) {\n\t\tthis.services = services;\n\t}\n\n\tgetServices () {\n\t\treturn this.services;\n\t}\n\n\tloadImports () {\n\t\treturn this.fetch('/_/imports')\n\t\t\t.then ((response) => {\n\t\t\t\tif (response.success != 1) {\n\t\t\t\t\tthrow new Error('Failed to load a list of imports from the server!');\n\t\t\t\t}\n\n\t\t\t\treturn response['imports'].map((imp) => new CoreImport(imp));\n\t\t\t});\n\t}\n\t/**\n\t * Find all active imports from service\n\t *\n\t * Returns a promise that resolves with the specified import.\n\t */\n\tfindImportByID (importID) {\n\t\treturn this.fetch('/_/imports')\n\t\t\t.then ((response) => {\n\t\t\t\tif (response.success != 1) {\n\t\t\t\t\tthrow new Error('Failed to load a list of imports from the server!');\n\t\t\t\t}\n\n\t\t\t\tlet importObj = response['imports'].find((imp) => imp.uuid == importID);\n\n\t\t\t\tif (!importObj) {\n\t\t\t\t\tthrow new Error('Could not find import on backend');\n\t\t\t\t}\n\n\t\t\t\treturn new CoreImport(importObj);\n\t\t\t});\n\t}\n\n\ttakeOwnership (serviceName, importID, title) {\n\t\treturn this.fetchWithForm('/_/import/new', {}, {\n\t\t\tservice: serviceName,\n\t\t\ttitle: title,\n\t\t\tuuid: importID\n\t\t})\n\t\t\t.then((response) => this.createImportObj(response));\n\t}\n\n\tupdateVideo (uuid, videoID, configuration) {\n\t\treturn this.fetchWithForm('/import/' + uuid + '/' + videoID + '/save', {}, {\n\t\t\tconfiguration: configuration\n\t\t})\n\t\t\t.then((response) => this.createImportObj(response));\n\t}\n\n\tcreateVideoByType (uuid, type) {\n\t\treturn this.fetchWithForm('/import/' + uuid + '/create_video', { type: type }, {})\n\t\t\t.then((response) => this.createImportObj(response));\n\t}\n\n\tdeleteVideoById (uuid, videoID) {\n\t\treturn this.fetchWithForm('/import/' + uuid + '/' + videoID + '/delete', {}, {})\n\t\t\t.then((response) => this.createImportObj(response));\n\t}\n\n\tloadRenderState (uuid) {\n\t\treturn this.fetch('/import/' + uuid + '/render')\n\t\t\t.then((response) => {\n\t\t\t\tif (response.success != 1) {\n\t\t\t\t\tthrow new Error('Failed to load render states for given import');\n\t\t\t\t}\n\n\t\t\t\treturn response.renders;\n\t\t\t});\n\t}\n\n\trenderVideo (uuid, videoID) {\n\t\treturn this.fetchWithForm('/import/' + uuid + '/' + videoID + '/render', {}, {})\n\t\t\t.then((response) => this.createImportObj(response));\n\t}\n\n\n\tcreateImportObj (response) {\n\t\tif (response.success != 1) {\n\t\t\tthrow new Error('Failed to load a list of imports from the server!');\n\t\t}\n\n\t\tlet importObj = response['import'];\n\n\t\tif (!importObj) {\n\t\t\tthrow new Error('Could not find import on backend');\n\t\t}\n\n\t\treturn new CoreImport(importObj);\n\t}\n\n\tcreateSlateObj (response) {\n\t\tif (response.success != 1) {\n\t\t\tthrow new Error('Failed to load slate');\n\t\t}\n\n\t\tlet slateObj = response['slate'];\n\t\tif (!slateObj) {\n\t\t\tthrow new Error('Could not load slate from backend');\n\t\t}\n\n\t\treturn new Slate(slateObj);\n\t}\n\n\tcreatePlatformObj (response) {\n\t\tif (response.success != 1) {\n\t\t\tthrow new Error('Failed to load slate');\n\t\t}\n\n\t\tlet platformObj = response['platform'];\n\t\treturn new Platform(platformObj);\n\t}\n\n\tloadSlates () {\n\t\treturn this.fetch('/slates/')\n\t\t\t.then((response) => {\n\t\t\t\tif (!response.success) {\n\t\t\t\t\tthrow new Error('Failed to load list of slates from server');\n\t\t\t\t}\n\n\t\t\t\tlet slates = response.slates.map((slateObj) => new Slate(slateObj));\n\t\t\t\treturn slates;\n\t\t\t});\n\t}\n\n\tuploadSlate (name, videoFile, cuePoint) {\n\t\treturn this.fetchWithFile('/slates/new', { name: name, cue_point: cuePoint }, videoFile)\n\t\t\t.then((response) => this.createSlateObj(response));\n\t}\n\n\tdeleteSlate (id) {\n\t\treturn this.fetchWithForm('/slates/delete', { id: id }, {});\n\t}\n\n\tloadPlatforms () {\n\t\treturn this.fetch('/platform/')\n\t\t\t.then((response) => {\n\t\t\t\tif (!response.success) {\n\t\t\t\t\tthrow new Error('Failed to load list of platforms from server');\n\t\t\t\t}\n\n\t\t\t\tlet slates = response.platforms.map((slateObj) => new Platform(slateObj));\n\t\t\t\treturn slates;\n\t\t\t});\n\t}\n\n\tcreatePlatform (platform_type, name, configuration) {\n\t\treturn this.fetchWithForm('/platform/new', {}, { name, platform_type, configuration })\n\t\t\t.then((response) => this.createPlatformObj(response));\n\t}\n\n\tupdatePlatform (id, name, configuration) {\n\t\treturn this.fetchWithForm('/platform/' + id + '/save', {}, { name, configuration })\n\t\t\t.then((response) => this.createPlatformObj(response));\n\t}\n\n\tdeletePlatform (id) {\n\t\treturn this.fetchWithForm('/platform/' + id + '/delete', { id: id }, {});\n\t}\n\n\tcreateShare (uuid, videoID, platform_id, title, description, configuration) {\n\t\treturn this.fetchWithForm('/import/' + uuid + '/' + videoID + '/share/new', {}, { platform_id, title, description, configuration })\n\t\t\t.then((response) => this.createImportObj(response));\n\t}\n\n\tupdateShare (uuid, videoID, shareID, title, description, configuration) {\n\t\treturn this.fetchWithForm('/import/' + uuid + '/' + videoID + '/share/' + shareID + '/save', {}, { title, description, configuration })\n\t\t\t.then((response) => this.createImportObj(response));\n\t}\n\n\tdeleteShare (uuid, videoID, shareID) {\n\t\treturn this.fetchWithForm('/import/' + uuid + '/' + videoID + '/share/' + shareID + '/delete', {}, {})\n\t\t\t.then((response) => this.createImportObj(response));\n\t}\n\n\tpublishShare (uuid, videoID, shareID) {\n\t\treturn this.fetchWithForm('/import/' + uuid + '/' + videoID + '/share/' + shareID + '/now', {}, {})\n\t\t\t.then((response) => response.success == 1);\n\t}\n\n}\n","import Model from './Model';\n\n/**\n * CuePoint keeps track of sections of video that might contain useful events. \n *\n * Hence, it is immutable. \n */\nexport default class CuePoint extends Model {\n\n\tconstructor (data, serviceName) {\n\t\tsuper(data);\n\n\t\tthis.attr_reader('service');\n\t\tthis.attr_reader('start_time');\n\t\tthis.attr_reader('end_time');\n\t}\n\n\tgetThumbnailPath () {\n\t\treturn '/api/ingest/' + this.get('service') + '/thumbnail.jpg?time=' + (this.get('start_time') + 5);\n\t}\n\n}","import Model from './Model';\n\n/**\n * Import is a model that represents an import object, as generated by the server.\n *\n * Hence, it is immutable. \n */\nexport default class Import extends Model {\n\n\tconstructor (data, serviceName) {\n\t\tdata['service_name'] = serviceName;\n\t\tsuper(data);\n\n\t\tthis.attr_reader('uuid');\n\t\tthis.attr_reader('start_time');\n\t\tthis.attr_reader('end_time');\n\t\tthis.attr_reader('real_start_time');\n\t\tthis.attr_reader('real_end_time');\n\t\tthis.attr_reader('length');\n\t\tthis.attr_reader('start_offset');\n\t\tthis.attr_reader('expiry');\n\t\tthis.attr_reader('service_name');\n\t}\n\n\tgetPreviewPath () {\n\t\treturn this.getBasePath() + '/preview.m3u8';\n\t}\n\n\tgetDownloadPath () {\n\t\treturn this.getBasePath() + '/download.mp4';\n\t}\n\n\tgetThumbnailPath () {\n\t\treturn this.getBasePath() + '/preview.jpg';\n\t}\n\n\tgetBasePath () {\n\t\treturn '/api/ingest/' + this.service_name + '/import/' + this.uuid;\n\t}\n\n}","import IAirTower from './IAirTower';\n\nimport CuePoint from './models/CuePoint';\nimport Import from './models/Import';\n\nexport default class IngestAirTower extends IAirTower {\n\n\tfetch (url, query, options, root = '/ingest') {\n\t\treturn super.fetch(root + url, query, options);\n\t}\n\n\tbootstrap () {\n\t\treturn this.fetch('/bootstrap')\n\t\t\t.then ((response) => {\n\t\t\t\tthis.setCSRFToken(response.csrf_token)\n\t\t\t\tthis.setServices(response.services)\n\t\t\t})\n\t}\n\n\tsetCSRFToken (token) {\n\t\tthis.csrfToken = token;\n\t}\n\n\tsetServices (services) {\n\t\tthis.services = services;\n\t}\n\n\tgetServices () {\n\t\treturn this.services;\n\t}\n\n\t/**\n\t * Import video from service between the specified UNIX times (seconds, not MS).\n\t * \n\t * Returns a promise that resolves with an Import object representing our import.\n\t */\n\timportVideo (service, startTime, endTime) {\n\t\tlet data = {\n\t\t\tstart_time: startTime,\n\t\t\tend_time: endTime\n\t\t};\n\n\t\treturn this.fetchWithForm('/' + service + '/import', undefined, data)\n\t\t\t.then ((response) => {\n\t\t\t\tif (response.success != 1) {\n\t\t\t\t\tthrow new Error('Import failed');\n\t\t\t\t}\n\n\t\t\t\treturn new Import(response['data'], service);\n\t\t\t});\n\t}\n\n\t/**\n\t * Find all active imports from service\n\t *\n\t * Returns a promise that resolves with an array of Import objects.\n\t */\n\tfindImports (service) {\n\t\treturn this.fetch('/' + service + '/imports')\n\t\t\t.then ((response) => {\n\t\t\t\tif (response.success != 1) {\n\t\t\t\t\tthrow new Error('Failed to load a list of imports from the server!')\n\t\t\t\t}\n\n\t\t\t\treturn response.imports.map((importModel) => new Import(importModel, service));\n\t\t\t})\n\t}\n\n\t/**\n\t * Find all active imports from service\n\t *\n\t * Returns a promise that resolves with the specified import.\n\t */\n\tfindImportByID (service, importID) {\n\t\treturn this.fetch('/' + service + '/import/' + importID)\n\t\t\t.then ((response) => {\n\t\t\t\tif (response.success != 1) {\n\t\t\t\t\tthrow new Error('Failed to load a list of imports from the server!')\n\t\t\t\t}\n\n\t\t\t\treturn new Import(response['import'], service);\n\t\t\t})\n\t}\n\n\tloadCuePoints (service) {\n\t\treturn this.fetch('/' + service + '/cue_points')\n\t\t\t.then((response) => {\n\t\t\t\tif (response.success != 1) {\n\t\t\t\t\tthrow new Error('Failed to load list of cue points from the server!');\n\t\t\t\t}\n\n\t\t\t\treturn response.points.map((point) => new CuePoint(point));\n\t\t\t})\n\t}\n\n}\n","import 'whatwg-fetch';\n\nimport IAirTower from './IAirTower';\n\nimport CoreAirTower from './CoreAirTower';\nimport IngestAirTower from './IngestAirTower';\n\n/**\n * AirTower abstracts all network calls to the backend to hide complexity.\n */\nexport default class AirTower extends IAirTower {\n\t\n\tstatic getInstance () {\n\n\t\tif (!AirTower.instance)\n\t\t\tAirTower.instance = new AirTower();\n\n\t\treturn AirTower.instance;\n\n\t}\n\n\tstatic register (name, className) {\n\t\tAirTower.getInstance().register(name, className);\n\t}\n\n\tconstructor () {\n\t\tsuper();\n\t\tthis.airtowers = [];\n\t}\n\n\tregister (name, className) {\n\t\tlet tower = new className();\n\n\t\tthis.airtowers.push(tower)\n\t\tthis[name] = tower;\n\t}\n\n\t/**\n\t * Returns a promise that resolves once the airtowers have bootstrapped.\n\t */\n\tbootstrap () {\n\t\treturn Promise.all(this.airtowers.map((a) => a.bootstrap())).catch((e) => false);\n\t}\n\n}\n\nAirTower.register('ingest', IngestAirTower);\nAirTower.register('core', CoreAirTower);\n","import React, { Component } from 'react';\n\nimport Button from '@material-ui/core/Button';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport Divider from '@material-ui/core/Divider';\nimport TextField from '@material-ui/core/TextField';\nimport FormHelperText from '@material-ui/core/FormHelperText';\nimport OutlinedInput from '@material-ui/core/OutlinedInput';\n\nimport ExpansionPanelActions from '@material-ui/core/ExpansionPanelActions';\n\nimport MenuItem from '@material-ui/core/MenuItem';\nimport FormControl from '@material-ui/core/FormControl';\nimport Select from '@material-ui/core/Select';\n\nexport default class FacebookAuthorisation extends Component {\n\tstate = {\n\t\tconnected: false,\n\t\tfacebookPageID: 0,\n\t\tfacebookPages: [],\n\t\tvisiblePages: [],\n\t}\n\n\tcomponentWillMount () {\n\t\tif (!window.FB) {\n\t\t\tlet asyncInit = window.fbAsyncInit;\n\t\t\twindow.fbAsyncInit = function () {\n\t\t\t\tasyncInit();\n\t\t\t\tthis.facebookReady();\n\t\t\t}\n\t\t}\n\t\tthis.facebookReady();\n\t}\n\n\tfacebookReady () {\n\t\twindow.FB.getLoginStatus((response) => {\n\t\t})\n\t}\n\n\tfacebookLogin () {\n\t\twindow.FB.login((response) => {\n\t\t\tif (response.status == 'connected') {\n\t\t\t\tthis.setState({\n\t\t\t\t\tconnected: true\n\t\t\t\t}, () => this.findPages());\n\t\t\t}\n\t\t}, { auth_type: 'reauthenticate', scope: ['instagram_basic', 'manage_pages', 'publish_pages'] })\n\t}\n\n\tfindPages () {\n\t\treturn new Promise((resolve, reject) => {\n\t\t\twindow.FB.api('/me/accounts', (response) => {\n\t\t\t\tthis.setState({\n\t\t\t\t\tfacebookPages: response.data\n\t\t\t\t}); //, () => this.findInstagramPages())\n\t\t\t});\n\t\t});\n\t}\n\n\tfindInstagramPages () {\n\t\tlet visiblePages = [];\n\n\t\tthis.state.facebookPages.forEach((page) => {\n\t\t\twindow.FB.api('/' + page.id + '?fields=instagram_business_account', (response) => {\n\t\t\t\tif (response.instagram_business_account != null) {\n\t\t\t\t\tvisiblePages.push(page)\n\t\t\t\t\tthis.setState({\n\t\t\t\t\t\tvisiblePages: visiblePages\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t}\n\n\tcomponentWillUnmount () {\n\n\t}\n\n\trender () {\n\t\treturn (\n\t\t\t<div style={{ width: '100%' }}>\n\t\t\t\t{ this.state.connected ? this.renderPageSelection() : this.renderAuthentication() }\n\t\t\t</div>\n\t\t);\n\t}\n\n\tupdateLocalField (field, event) {\n\t\tthis.setState({\n\t\t\t[field]:  event.target[event.target.hasOwnProperty('checked') ? 'checked' : 'value']\n\t\t});\n\t}\n\n\tconnectPage () {\n\t\tlet pageID = this.state.facebookPageID;\n\t\tlet page = this.state.facebookPages.find((page) => page.id == pageID);\n\n\t\tif (!page) {\n\t\t\tthrow new Error('User selected ');\n\t\t}\n\n\t\t// Access tokens do not expire. We can just POST this to the backend.\n\t\tlet fbAccessToken = page.access_token;\n\t\tlet description = page.name;\n\n\t\tlet configuration = {\n\t\t\tpage_id: pageID,\n\t\t\tuser_access_token: window.FB.getAuthResponse()['accessToken'],\n\t\t\tpage_access_token: fbAccessToken\n\t\t};\n\n\t\tthis.props.createPlatform(\n\t\t\t'facebook',\n\t\t\tdescription,\n\t\t\tconfiguration\n\t\t);\n\t}\n\n\trenderPageSelection () {\n\t\treturn (\n\t\t\t<div style={{ width: '100%' }}>\n\t\t\t\t<FormControl variant=\"outlined\" fullWidth={ true }>\n\t\t\t\t\t<Select\n\t\t\t\t\t\tfullWidth={ true }\n\t\t\t\t\t\tvalue={ this.state.facebookPageID }\n\t\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\t\tonChange={ this.updateLocalField.bind(this, 'facebookPageID') }\n\t\t\t\t\t\tinput={ <OutlinedInput fullWidth={ true } /> }>\n\t\t\t\t\t\t{ this.state.facebookPages.map((page) => (\n\t\t\t\t\t\t\t<MenuItem value={ page.id }>{ page.name }</MenuItem>\n\t\t\t\t\t\t))}\n\t\t\t\t\t</Select>\n\t\t\t\t</FormControl>\n\t\t\t\t<Divider />\n\t\t\t\t<ExpansionPanelActions>\n\t\t\t\t\t<Button onClick={ this.connectPage.bind(this) }>\n\t\t\t\t\t\t{ this.props.instagram ? 'Link Instagram' : 'Connect Page' }\n\t\t\t\t\t</Button>\n\t\t\t\t</ExpansionPanelActions>\n\t\t\t</div>\n\t\t);\n\t}\n\n\trenderAuthentication () {\n\t\treturn (\n\t\t\t<Button variant=\"outlined\" onClick={ this.facebookLogin.bind(this) }>\n\t\t\t\tAuthorize Account\n\t\t\t</Button>\n\t\t);\n\t}\n}","import React, { Component } from 'react';\n\nimport Button from '@material-ui/core/Button';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport TextField from '@material-ui/core/TextField';\nimport FormHelperText from '@material-ui/core/FormHelperText';\nimport OutlinedInput from '@material-ui/core/OutlinedInput';\n\nimport MenuItem from '@material-ui/core/MenuItem';\nimport FormControl from '@material-ui/core/FormControl';\nimport Select from '@material-ui/core/Select';\n\nimport FacebookAuthorisation from './Facebook';\n\nexport default class InstagramAuthorisation extends FacebookAuthorisation {\n\tstate = {\n\t\tconnected: false,\n\t\tfacebookPageID: 0,\n\t\tfacebookPages: [],\n\n\t\tinstagramPageID: 0,\n\t\tvisiblePages: [],\n\t}\n\n\tfindPages () {\n\t\treturn new Promise((resolve, reject) => {\n\t\t\twindow.FB.api('/me/accounts', (response) => {\n\t\t\t\tthis.setState({\n\t\t\t\t\tfacebookPages: response.data\n\t\t\t\t}, () => this.findInstagramPages())\n\t\t\t});\n\t\t});\n\t}\n\n\tfindInstagramPages () {\n\t\tlet visiblePages = [];\n\n\t\tthis.state.facebookPages.forEach((page) => {\n\t\t\twindow.FB.api('/' + page.id + '?fields=instagram_business_account', (response) => {\n\t\t\t\tif (response.instagram_business_account != null) {\n\t\t\t\t\tpage.instagram_page_id = response.instagram_business_account.id;\n\t\t\t\t\tvisiblePages.push(page);\n\t\t\t\t\tthis.setState({\n\t\t\t\t\t\tvisiblePages: visiblePages\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t}\n\n\tconnectPage () {\n\t\tlet pageID = this.state.instagramPageID;\n\t\tlet page = this.state.visiblePages.find((page) => page.id == pageID);\n\n\t\tif (!page) {\n\t\t\tthrow new Error('User selected ');\n\t\t}\n\n\t\t// Access tokens do not expire. We can just POST this to the backend.\n\t\tlet fbAccessToken = page.access_token;\n\t\tlet description = page.name;\n\n\t\tlet configuration = {\n\t\t\tpage_id: pageID,\n\t\t\tinstagram_page_id: page.instagram_page_id,\n\t\t\taccess_token: fbAccessToken\n\t\t};\n\n\t\tthis.props.createPlatform(\n\t\t\t'instagram',\n\t\t\tdescription,\n\t\t\tconfiguration\n\t\t);\n\t}\n\n\trenderPageSelection () {\n\t\treturn (\n\t\t\t<div>\n\t\t\t\t<FormControl variant=\"outlined\" fullWidth={ true }>\n\t\t\t\t\t<Select\n\t\t\t\t\t\tfullWidth={ true }\n\t\t\t\t\t\tvalue={ this.state.instagramPageID }\n\t\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\t\tonChange={ this.updateLocalField.bind(this, 'instagramPageID') }\n\t\t\t\t\t\tinput={ <OutlinedInput fullWidth={ true } /> }>\n\t\t\t\t\t\t{ this.state.visiblePages.map((page) => (\n\t\t\t\t\t\t\t<MenuItem value={ page.id }>{ page.name }</MenuItem>\n\t\t\t\t\t\t))}\n\t\t\t\t\t</Select>\n\t\t\t\t</FormControl>\n\t\t\t\t<Button variant=\"outlined\" onClick={ this.connectPage.bind(this) }>\n\t\t\t\t\tLink Instagram\n\t\t\t\t</Button>\n\t\t\t</div>\n\t\t);\n\t}\n}","import React, { Component } from 'react';\n\nimport { Link } from 'react-router-dom';\n\nimport AirTower from '../network/AirTower';\nimport FacebookAuthorisation from './authorisation/Facebook';\nimport InstagramAuthorisation from './authorisation/Instagram';\n\nimport Button from '@material-ui/core/Button';\nimport Paper from '@material-ui/core/Paper';\n\nexport default class CreatePlatform extends Component {\n\n\tstate = {\n\t\tplatforms: []\n\t}\n\n\tcomponentWillMount () {\n\t\tlet airTower = AirTower.getInstance().core;\n\n\t\tairTower.loadPlatforms()\n\t\t\t.then((platforms) => this.setState({ platforms }))\n\t}\n\n\tselectPlatform (platform) {\n\t\tthis.setState({\n\t\t\tplatform: platform\n\t\t})\n\t}\n\n\tcreatePlatform (type, name, configuration) {\n\t\tlet airTower = AirTower.getInstance().core;\n\n\t\tairTower.createPlatform(type, name, JSON.stringify(configuration))\n\t\t\t.then((platform) => this.props.change())\n\t}\n\n\trender () {\n\t\tif (this.props.embedded) {\n\t\t\treturn this.renderBody();\n\t\t}\n\t\treturn (\n\t\t\t<div className=\"fullpage home one-page\">\n\t\t\t\t<Paper className=\"platform-container\">\n\t\t\t\t\t{ this.renderBody() }\n\t\t\t\t</Paper>\n\t\t\t</div>\n\t\t);\n\t}\n\n\trenderBody () {\n\t\tswitch (this.state.platform) {\n\t\t\tcase 'facebook':\n\t\t\t\treturn (\n\t\t\t\t\t<FacebookAuthorisation createPlatform={ this.createPlatform.bind(this)} />\n\t\t\t\t);\n\t\t\tcase 'instagram':\n\t\t\t\treturn (\n\t\t\t\t\t<InstagramAuthorisation createPlatform={ this.createPlatform.bind(this) } />\n\t\t\t\t);\n\t\t}\n\n\t\treturn (\n\t\t\t<div className=\"platform-list-container\">\n\t\t\t\t<Button variant=\"outlined\" onClick={ this.selectPlatform.bind(this, 'facebook') }>\n\t\t\t\t\tConnect Facebook\n\t\t\t\t</Button>\n\t\t\t\t<Button variant=\"outlined\" onClick={ this.selectPlatform.bind(this, 'instagram') }>\n\t\t\t\t\tConnect Instagram\n\t\t\t\t</Button>\n\t\t\t\t<Button variant=\"outlined\" disabled onClick={ this.selectPlatform.bind(this, 'twitter') }>\n\t\t\t\t\tConnect Twitter\n\t\t\t\t</Button>\n\t\t\t\t<Button variant=\"outlined\" disabled onClick={ this.selectPlatform.bind(this, 'youtube') }>\n\t\t\t\t\tConnect YouTube\n\t\t\t\t</Button>\n\t\t\t</div>\n\t\t);\n\t}\n}","import React, { Component } from 'react';\nimport { Link } from 'react-router-dom';\n\nimport AirTower from '../network/AirTower';\nimport FacebookAuthorisation from './authorisation/Facebook';\nimport InstagramAuthorisation from './authorisation/Instagram';\n\nimport Button from '@material-ui/core/Button';\nimport Paper from '@material-ui/core/Paper';\n\nexport default class EditPlatform extends Component {\n\n\tstate = {\n\t\tplatforms: []\n\t}\n\n\tcomponentWillMount () {\n\t}\n\n\tupdatePlatform (type, name, configuration) {\n\t\tlet airTower = AirTower.getInstance();\n\t\tairTower.core.updatePlatform(this.props.platform.id, name, JSON.stringify(configuration))\n\t\t\t.then((platform) => this.props.change())\n\t}\n\n\treauthenticate () {\n\t\tthis.setState({\n\t\t\treauthenticate: true\n\t\t})\n\t}\n\n\tremovePlatform () {\n\t\tlet airTower = AirTower.getInstance();\n\t\tairTower.core.deletePlatform(this.props.platform.id)\n\t\t\t.then((platform) => this.props.change())\n\t}\n\n\trender () {\n\t\tswitch (this.state.reauthenticate && this.props.platform.platform_type) {\n\t\t\tcase 'facebook':\n\t\t\t\treturn (\n\t\t\t\t\t<FacebookAuthorisation createPlatform={ this.updatePlatform.bind(this)} />\n\t\t\t\t);\n\t\t\tcase 'instagram':\n\t\t\t\treturn (\n\t\t\t\t\t<InstagramAuthorisation createPlatform={ this.updatePlatform.bind(this) } />\n\t\t\t\t);\n\t\t}\n\t\treturn (\n\t\t\t<div class=\"platform-list-container\">\n\t\t\t\t<Button variant=\"outlined\" onClick={ this.reauthenticate.bind(this) }>\n\t\t\t\t\tRe-Authenticate\n\t\t\t\t</Button>\n\t\t\t\t<Button variant=\"outlined\" onClick={ this.removePlatform.bind(this) }>\n\t\t\t\t\tRemove\n\t\t\t\t</Button>\n\t\t\t</div>\n\t\t);\n\t}\n}","import React, { Component } from 'react';\nimport { Link } from 'react-router-dom';\n\nimport AirTower from '../network/AirTower';\nimport FacebookAuthorisation from './authorisation/Facebook';\nimport CreatePlatform from './CreatePlatform';\nimport EditPlatform from './EditPlatform';\n\nimport { withStyles } from '@material-ui/core/styles';\n\nimport Button from '@material-ui/core/Button';\nimport Divider from '@material-ui/core/Divider';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nimport ExpansionPanel from '@material-ui/core/ExpansionPanel';\nimport ExpansionPanelActions from '@material-ui/core/ExpansionPanelActions';\nimport ExpansionPanelDetails from '@material-ui/core/ExpansionPanelDetails';\nimport ExpansionPanelSummary from '@material-ui/core/ExpansionPanelSummary';\nimport Paper from '@material-ui/core/Paper';\nimport Typography from '@material-ui/core/Typography';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\n\nconst styles = theme => ({\n\theading: {\n\t\tfontSize: theme.typography.pxToRem(15),\n\t\tfontWeight: theme.typography.fontWeightRegular,\n\t},\n});\n\nclass Config extends Component {\n\n\tstate = {\n\t\tplatforms: []\n\t}\n\n\tcomponentWillMount () {\n\t\tthis.reload();\n\t}\n\n\treload () {\n\t\tlet airTower = AirTower.getInstance().core;\n\n\t\tairTower.loadPlatforms()\n\t\t\t.then((platforms) => this.setState({ platforms }));\n\t}\n\n\trenderPlatform (platform) {\n\t\treturn (\n\t\t\t<ExpansionPanel>\n\t\t\t\t<ExpansionPanelSummary expandIcon={<ExpandMoreIcon />}>\n\t\t\t\t\t<Typography className={ this.props.classes.heading }>\n\t\t\t\t\t\t<div class=\"icon-container\">\n\t\t\t\t\t\t\t<FontAwesomeIcon prefix=\"fab\" icon={ platform.icon } />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{ platform.name }\n\t\t\t\t\t</Typography>\n\t\t\t\t</ExpansionPanelSummary>\n\t\t\t\t<ExpansionPanelDetails>\n\t\t\t\t\t<EditPlatform platform={ platform } change={ this.reload.bind(this) } />\n\t\t\t\t</ExpansionPanelDetails>\n\t\t\t</ExpansionPanel>\n\t\t);\n\t}\n\n\trenderNew () {\n\t\treturn (\n\t\t\t<ExpansionPanel>\n\t\t\t\t<ExpansionPanelSummary expandIcon={<ExpandMoreIcon />}>\n\t\t\t\t\t<Typography className={ this.props.classes.heading }>\n\t\t\t\t\t\tAdd New\n\t\t\t\t\t</Typography>\n\t\t\t\t</ExpansionPanelSummary>\n\t\t\t\t<ExpansionPanelDetails>\n\t\t\t\t\t<CreatePlatform embedded={ true } change={ this.reload.bind(this) } />\n\t\t\t\t</ExpansionPanelDetails>\n\t\t\t</ExpansionPanel>\n\t\t);\n\t}\n\n\trender () {\n\t\treturn (\n\t\t\t<div className=\"fullpage home one-page\">\n\t\t\t\t<div className=\"platform-menu-selector\">\n\t\t\t\t\t{ this.state.platforms.map((platform) => this.renderPlatform(platform)) }\n\t\t\t\t\t<Divider />\n\t\t\t\t\t{ this.renderNew() }\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default withStyles(styles)(Config);","import React, { Component } from 'react';\nimport moment from 'moment';\n\nimport { Slider } from 'material-ui-slider';\nimport { withStyles } from '@material-ui/core/styles';\n\nconst styles = {\n\tslider: {\n\t\tcolor: '#C00',\n\t\twidth: '50px',\n\t\tfloat: 'right',\n\t\tpadding: '22px 0px',\n\t},\n};\n\nclass Draggable {\n\n\tconstructor (timeline) {\n\t\tthis.timeline = timeline;\n\t\tthis.canvasContext = timeline.canvasContext;\n\t}\n\n\tgetX () {\n\t\treturn -1;\n\t}\n\n\tgetCanvasX () {\n\t\tlet state = this.getCanvasState();\n\t\treturn (this.getX() - state.viewportStart) * state.unitMap / state.unit;\n\t}\n\n\tcanDrag (x) {\n\t\treturn false;\n\t}\n\n\tisHit (mousePosition) {\n\t\treturn false;\n\t}\n\n\tstartDrag (mousePosition) {\n\t\tthis.dragging = true;\n\t}\n\n\tmouseMove (mousePosition) {\n\n\t\tlet state = this.getCanvasState();\n\n\t\tlet playheadX = this.getCanvasX();\n\t\tlet cursorPosition = state.cursorPosition;\n\n\t\tif (mousePosition[0] > this.timeline.canvasWidth - 20) {\n\n\t\t\tlet velocity = 1 - (this.timeline.canvasWidth - mousePosition[0]) / 20;\n\n\t\t\treturn [\n\t\t\t\tstate.realViewportStart + velocity,\n\t\t\t\tthis.applyBounds(cursorPosition)\n\t\t\t];\n\n\t\t} else if (mousePosition[0] < 20) {\n\n\t\t\tlet velocity = mousePosition[0] / 20;\n\n\t\t\treturn [\n\t\t\t\tstate.realViewportStart - velocity,\n\t\t\t\tthis.applyBounds(cursorPosition)\n\t\t\t];\n\n\t\t} else {\n\n\t\t\t// Mouse hasn't moved to an extreme\n\t\t\tlet finalCursorPosition = (mousePosition[0] * state.unit / state.unitMap) + state.viewportStart;\n\t\t\tfinalCursorPosition = this.applyBounds(finalCursorPosition);\n\n\t\t\treturn [null, finalCursorPosition];\n\t\t}\n\n\t}\n\n\tapplyBounds (position) {\n\t\treturn Math.max(Math.min(position, this.timeline.end), this.timeline.start);\n\t}\n\n\tsetPositionAndUpdate (value) {\n\n\t}\n\n\tstopDrag (mousePosition) {\n\t\tthis.dragging = false;\n\n\t\tlet state = this.getCanvasState();\n\t\tlet newX = mousePosition[0];\n\n\t\tlet finalPosition = (newX * state.unit / state.unitMap) + state.viewportStart;\n\t\tfinalPosition = this.applyBounds(finalPosition);\n\n\t\tthis.setPositionAndUpdate(finalPosition);\n\t}\n\n\tgetCanvasState () {\n\t\treturn this.timeline.getCanvasState();\n\t}\n\n\tdraw () {\n\n\t}\n\n}\n\nclass Playhead extends Draggable {\n\n\tgetX () {\n\t\tlet state = this.getCanvasState();\n\t\treturn state.cursorPosition;\n\t}\n\n\tisHit (mousePosition) {\n\t\tlet playheadX = this.getCanvasX();\n\n\t\tif (mousePosition[1] <= 28 || mousePosition[1] > 40) {\n\t\t\treturn false;\n\t\t}\n\n\t\tif (mousePosition[0] > playheadX - 10\n\t\t\t\t&& mousePosition[0] < playheadX + 10) {\n\t\t\treturn true;\n\t\t}\n\t}\n\n\tmouseMove (mousePosition) {\n\t\tlet data = super.mouseMove(mousePosition);\n\n\t\tif (data[0] == null) {\n\t\t\tthis.timeline.setState({\n\t\t\t\tcursorPosition: data[1]\n\t\t\t}, () => this.timeline.sendOnChange());\n\t\t} else {\n\t\t\tthis.timeline.setState({\n\t\t\t\tviewportStart: data[0],\n\t\t\t\tcursorPosition: data[1]\n\t\t\t}, () => this.timeline.sendOnChange());\n\t\t}\n\n\t}\n\n\tsetPositionAndUpdate (cursorPosition) {\n\t\tthis.timeline.setState({\n\t\t\tcursorPosition: cursorPosition\n\t\t}, () => this.timeline.sendOnChange());\n\t}\n\n\tstopDrag (mousePosition) {\n\t\tthis.dragging = false;\n\n\t\tlet state = this.getCanvasState();\n\t\tlet playheadX = mousePosition[0];\n\n\t\tlet finalCursorPosition = (playheadX * state.unit / state.unitMap) + state.viewportStart;\n\t\tfinalCursorPosition = Math.max(Math.min(finalCursorPosition, this.timeline.end), this.timeline.start);\n\n\t\tthis.setPositionAndUpdate(finalCursorPosition);\n\t}\n\n\tdraw () {\n\t\tlet state = this.getCanvasState();\n\t\tlet posX = (state.cursorPosition - state.viewportStart) * state.unitMap / state.unit;\n\n\t\tthis.timeline.canvasContext.strokeStyle = '#EEE';\n\t\tthis.timeline.canvasContext.fillStyle = '#EEE';\n\n\t\tthis.timeline.drawLine(posX, 30, posX, 99);\n\n\t\tthis.timeline.canvasContext.fillRect(posX - 7.5, 28, 15, 12);\n\t}\n\n}\n\nclass SegmentTerminus extends Draggable {\n\n\tconstructor (timeline, type) {\n\t\tsuper(timeline);\n\t\tthis.type = type;\n\t}\n\n\tgetX () {\n\t\treturn this.timeline.props[this.getDirectionPropLabel()];\n\t}\n\n\tmouseMove (mousePosition) {\n\t\tlet data = super.mouseMove(mousePosition);\n\n\t\tif (data[0] != null) {\n\t\t\tthis.timeline.setState({\n\t\t\t\tviewportStart: data[0],\n\t\t\t}, () => this.timeline.sendOnChange());\n\t\t}\n\t\tthis.setPositionAndUpdate(data[1])\n\n\t}\n\n\tsetPositionAndUpdate (position) {\n\t\tlet prop = this.timeline.props[this.getDirection() == 'start' ? 'onSegmentStart' : 'onSegmentEnd'];\n\t\tprop && prop(position);\n\t}\n\n\tgetDirection () {\n\t\treturn this.type;\n\t}\n\n\tgetDirectionPropLabel () {\n\t\treturn this.type == 'start' ? 'segmentStart' : 'segmentEnd';\n\t}\n\n\tdraw () {\n\n\t\tlet state = this.getCanvasState();\n\t\tlet posX = (state.cursorPosition - state.viewportStart) * state.unitMap / state.unit;\n\n\t\tthis.timeline.canvasContext.strokeStyle = '#EEE';\n\t\tthis.timeline.canvasContext.fillStyle = '#EEE';\n\n\t\tif (this.getDirection() == 'start') {\n\t\t\tthis.drawStart();\n\t\t} else {\n\t\t\tthis.drawEnd();\n\t\t}\n\n\t}\n\n\tdrawStart () {\n\t\tthis.timeline.canvasContext.fillStyle = 'rgba(220, 0, 0, 0.9)';\n\t\tthis.timeline.canvasContext.fillRect(this.getCanvasX() - 5, 40, 5, 40);\n\t\tthis.timeline.canvasContext.fillRect(this.getCanvasX() - 10, 50, 8, 20);\n\t}\n\n\tdrawEnd () {\n\t\tthis.timeline.canvasContext.fillStyle = 'rgba(220, 0, 0, 0.9)';\n\t\tthis.timeline.canvasContext.fillRect(this.getCanvasX(), 40, 5, 40);\n\t\tthis.timeline.canvasContext.fillRect(this.getCanvasX() + 2, 50, 8, 20);\n\t}\n\n\tisHit (mousePosition) {\n\t\tlet playheadX = this.getCanvasX();\n\n\t\tif (mousePosition[1] < 50 || mousePosition[1] > 70) {\n\t\t\treturn false;\n\t\t}\n\n\t\tlet canvasX = this.getCanvasX();\n\n\t\tif (this.getDirection() == 'start' && mousePosition[0] > canvasX - 10\n\t\t\t\t&& mousePosition[0] < canvasX - 2) {\n\t\t\treturn true;\n\t\t} else if (this.getDirection() == 'end' && mousePosition[0] > canvasX + 2\n\t\t\t\t&& mousePosition[0] < canvasX + 10) {\n\t\t\treturn true;\n\t\t}\n\t}\n\n}\n\nclass Timeline extends Component {\n\n\tstate = {\n\t\tcursorPosition: 60,\n\t\tzoom: 8,\n\t\tviewportStart: 0\n\t}\n\n\tdragging = null;\n\n\tconstructor (props) {\n\t\tsuper(props);\n\t\tthis.playhead = new Playhead(this);\n\n\t\tthis.segments = {\n\t\t\tstart: new SegmentTerminus(this, 'start'),\n\t\t\tend: new SegmentTerminus(this, 'end')\n\t\t}\n\t}\n\n\tshouldComponentUpdate (nextProps, nextState) {\n\n\t\tthis.start = nextProps.start;\n\t\tthis.end = nextProps.end;\n\n\t\tif (this.state.zoom != nextState.zoom) {\n\t\t\treturn true;\n\t\t}\n\n\t\tif (!this.draggingTimeline && !this.dragging && this.props.offset != nextProps.offset) {\n\n\t\t\t// Will updating the offset scroll us out of view?\n\t\t\tlet state = this.getCanvasState();\n\n\t\t\tif (this.props.autoUpdateViewport\n\t\t\t\t\t&& (nextProps.offset < state.viewportStart\n\t\t\t\t\t\t|| nextProps.offset > state.viewportStart + state.viewportWidth)) {\n\t\t\t\tnextState.viewportStart = nextProps.offset - state.viewportWidth / 3;\n\t\t\t}\n\n\t\t\tthis.setState({\n\t\t\t\tcursorPosition: nextProps.offset,\n\t\t\t\tviewportStart: nextState.viewportStart\n\t\t\t})\n\n\t\t\treturn true;\n\n\t\t}\n\n\t\tif (this.state.viewportStart != nextState.viewportStart) {\n\t\t\treturn true;\n\t\t}\n\n\t\tthis.rerender();\n\n\t\treturn false;\n\t}\n\n\tcomponentWillMount () {\n\n\t\tthis.start = this.props.start;\n\t\tthis.end = this.props.end;\n\t\tthis.setState({\n\t\t\tcursorPosition: this.props.offset || this.props.initialOffset,\n\t\t\tviewportStart: this.props.offset || this.props.initialOffset\n\t\t});\n\n\t\tthis.resizeCanvasLocalised = this.resizeCanvas.bind(this);\n\t\twindow.addEventListener('resize', this.resizeCanvasLocalised);\n\t}\n\n\tcomponentWillUnmount () {\n\t\twindow.removeEventListener('resize', this.resizeCanvasLocalised);\n\t}\n\n\tsetCanvas (c) {\n\n\t\tif (this.canvas) {\n\t\t\treturn;\n\t\t}\n\t\tthis.canvas = c;\n\n\t\tthis.resizeCanvas()\n\n\t\t// 2x lets us \n\n\t\tthis.canvasContext = c.getContext('2d');\n\n\t\tthis.drawFullGrid();\n\t\tthis.drawPlayhead();\n\n\t}\n\n\tcomponentDidUpdate () {\n\n\t\tthis.drawFullGrid();\n\n\t}\n\n\tresizeCanvas () {\n\t\tvar dpr = window.devicePixelRatio || 1;\n\t\tthis.canvas.width = this.canvas.offsetWidth * dpr;\n\t\tthis.canvas.height = this.canvas.offsetHeight * dpr;\n\t\tthis.canvas.getContext('2d').scale(dpr, dpr);\n\t\tthis.canvasWidth = this.canvas.offsetWidth;\n\t}\n\n\tgetZoom (level) {\n\t\t// 150\n\t\tlet unitMap = (this.state.zoom || 150), unit = 60, steps = 10;\n\n\t\tif (level < 2) {\n\t\t\treturn [level * 50 + 10, 1800, 6];\n\t\t} else if (level < 4) {\n\t\t\treturn [(level - 2) * 50 + 100, 600, 10];\n\t\t} else if (level < 6) {\n\t\t\treturn [(level - 4) * 50 + 100, 300, 10];\n\t\t} else if (level < 9) {\n\t\t\t// 100 - 200\n\t\t\treturn [(level - 6) * 25 + 100, 60, 10];\n\t\t} else {\n\t\t\treturn [(level - 6) * 25 + 100, 30, 60];\n\t\t}\n\n\t\treturn [150, 60, 10];\n\t}\n\n\tgetCanvasState () {\n\t\t// 150px = 1 unit, based on zoom level\n\t\t// 1 unit = 10 seconds\n\n\t\tlet zoomLevels = this.getZoom(this.state.zoom);\n\n\t\tlet unitMap = zoomLevels[0], unit = zoomLevels[1], steps = zoomLevels[2];\n\n\t\treturn {\n\t\t\tunitMap: unitMap,\n\t\t\tunit: unit,\n\t\t\toffset: 0,\n\t\t\t// visible seconds\n\t\t\tcursorPosition: this.state.cursorPosition,\n\t\t\t// minor units per major unit (10 minor steps (inclusive) every 1 step)\n\t\t\tsteps: steps,\n\t\t\tviewportStart: this.state.viewportStart - 2,\n\t\t\trealViewportStart: this.state.viewportStart,\n\t\t\tviewportWidth: this.canvasWidth / unitMap * unit,\n\t\t}\n\t}\n\n\t/**\n\t * Draws the timeline base grid, between props.start and props.end. \n\t */\n\tdrawFullGrid () {\n\n\t\tlet myDuration = this.end - this.start;\n\n\t\tthis.canvasContext.clearRect(0, 0, this.canvas.width, this.canvas.height);\n\n\t\tlet state = this.getCanvasState();\n\n\t\tthis.drawLine(0, 40, this.canvas.width, 40);\n\n\t\tlet fullWidth = Math.ceil(state.viewportWidth + state.viewportStart);\n\n\t\tfor (var i = Math.floor(state.viewportStart); i < fullWidth; i++) {\n\n\t\t\tlet x = (i - state.viewportStart) * state.unitMap / state.unit;\n\n\t\t\tlet mySeconds = i;\n\t\t\tlet amIMaj = (i % state.unit) == 0;\n\n\t\t\t// draw major steps\n\t\t\tif ((i % (state.unit / state.steps)) == 0) {\n\n\t\t\t\tthis.canvasContext.strokeStyle = amIMaj ?  '#CCC' : 'rgba(255, 255, 255, 0.3)';\n\n\n\t\t\t\tthis.drawLine(x, 80, x, amIMaj ? 30 : 37);\n\t\t\t}\n\n\t\t\t// draw time code every interval\n\t\t\tif (amIMaj) {\n\t\t\t\tlet timecode = this.timecode(mySeconds);\n\t\t\t\tthis.drawText(x, 15, timecode[0]);\n\t\t\t\tthis.drawText(x, 30, timecode[1]);\n\t\t\t}\n\n\t\t}\n\n\t\tthis.saveCanvas();\n\t\tthis.drawPlayhead();\n\n\t}\n\n\t/**\n\t * Back-up the pixel data so it can be quickly restored without redrawing everything\n\t * This makes redrawing the canvas much faster\n\t */\n\tsaveCanvas () {\n\t\tthis.canvasState = this.canvasContext.getImageData(0,0, this.canvas.width, this.canvas.height);\n\t}\n\n\trestoreCanvas () {\n\t\tthis.canvasContext.putImageData(this.canvasState, 0, 0);\n\t}\n\n\trecenter () {\n\t\tlet state = this.getCanvasState();\n\n\t\tif (!this.draggingTimeline && state.cursorPosition > state.viewportStart + state.viewportWidth) {\n\t\t\tthis.setState({\n\t\t\t\tviewportStart: this.props.offset - state.viewportWidth / 3\n\t\t\t});\n\t\t}\n\t}\n\n\trerender () {\n\t\tif (!this.canvasContext) {\n\t\t\treturn;\n\t\t}\n\n\t\tlet state = this.getCanvasState();\n\n\t\tif (!this.draggingTimeline && this.props.autoUpdateViewport\n\t\t\t\t&& state.cursorPosition > state.viewportStart + state.viewportWidth) {\n\t\t\tthis.setState({\n\t\t\t\tviewportStart: state.cursorPosition - 2\n\t\t\t})\n\t\t\treturn this.fullRender();\n\t\t} else {\n\t\t\tthis.fastRender();\n\t\t}\n\t}\n\n\tfullRender () {\n\t\tthis.drawFullGrid();\n\t}\n\n\tfastRender () {\n\t\tthis.restoreCanvas();\n\t\tthis.drawSegments();\n\t\tthis.drawPlayhead();\n\t}\n\n\tdrawPlayhead () {\n\t\tthis.playhead.draw();\n\t}\n\n\tdrawSegments () {\n\t\tthis.drawSegment({\n\t\t\tstart: this.props.segmentStart,\n\t\t\tend: this.props.segmentEnd\n\t\t})\n\n\t\tthis.segments.start.draw();\n\t\tthis.segments.end.draw();\n\t}\n\n\tdrawSegment (segment) {\n\n\t\tlet state = this.getCanvasState();\n\n\t\tlet startX = (segment.start - state.viewportStart) * state.unitMap / state.unit;\n\t\tlet endX = (segment.end - state.viewportStart) * state.unitMap / state.unit;\n\n\t\t// No point drawing it if it's really far off screen.\n\t\tif (startX > this.canvasWidth + 40 || endX < -40) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.canvasContext.strokeStyle = 'rgba(200, 0, 0, 0.4)';\n\t\tthis.canvasContext.fillStyle = 'rgba(200, 0, 0, 0.7)';\n\n\t\tthis.canvasContext.fillRect(startX, 40, endX - startX, 40);\n\n\t}\n\n\tdrawLine (x1, y1, x2, y2) {\n\t\tthis.canvasContext.beginPath();\n\t\tthis.canvasContext.moveTo(x1, y1);\n\t\tthis.canvasContext.lineTo(x2, y2);\n\t\tthis.canvasContext.stroke();\n\t}\n\n\tdrawText (x1, y1, text) {\n\t\tthis.canvasContext.textAlign = 'center';\n\t\tthis.canvasContext.textBaseline = 'bottom';\n\n\t\tthis.canvasContext.fillStyle = '#FFF';\n\t\tthis.canvasContext.fillText(text, x1, y1);\n\t}\n\n\t/**\n\t * Return mouse X/Y. DPI scaling is irrelevant in our logic\n\t */\n\tgetMousePosition (event) {\n\t\tlet rect = this.canvas.getBoundingClientRect();\n\t\treturn [event.clientX - rect.left, event.clientY - rect.top]\n\t}\n\n\tdraggingPlayhead () {\n\t\treturn this.dragging == this.playhead;\n\t}\n\n\tmouseDown (event) {\n\t\tlet state = this.getCanvasState(), mousePosition = this.getMousePosition(event);\n\n\t\tif (this.playhead.isHit(mousePosition)) {\n\t\t\tthis.dragging = this.playhead;\n\t\t} else if (this.segments.start.isHit(mousePosition)) {\n\t\t\tthis.dragging = this.segments.start;\n\t\t} else if (this.segments.end.isHit(mousePosition)) {\n\t\t\tthis.dragging = this.segments.end;\n\t\t}\n\n\t\tlet playheadX = (state.cursorPosition - state.viewportStart) * state.unitMap / state.unit;\n\n\t\tif (mousePosition[1] >= 40) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.draggingStartX = mousePosition[0];\n\t\tthis.draggingViewportStart = this.state.viewportStart;\n\t\tthis.draggingTimeline = true;\n\t\tthis.hasMovedTimeline = false;\n\n\t\tif (this.playhead.isHit(mousePosition)) {\n\t\t\tthis.draggingTimeline = false;\n\t\t\tthis.dragging = this.playhead;\n\t\t\tthis.playhead.startDrag();\n\t\t}  else if (this.segments.start.isHit(mousePosition) && !this.props.readOnly) {\n\t\t\tthis.draggingTimeline = false;\n\t\t\tthis.dragging = this.segments.start;\n\t\t\tthis.segments.start.startDrag();\n\t\t} else if (this.segments.end.isHit(mousePosition) && !this.props.readOnly) {\n\t\t\tthis.draggingTimeline = false;\n\t\t\tthis.dragging = this.segments.end;\n\t\t\tthis.segments.end.startDrag();\n\t\t}\n\n\t}\n\n\tmouseMove (event) {\n\n\t\tlet state = this.getCanvasState(), mousePosition = this.getMousePosition(event);\n\n\t\tif (this.draggingTimeline) {\n\n\t\t\tlet newX = (this.draggingStartX - mousePosition[0]) * state.unit / state.unitMap;\n\n\t\t\tif (newX != 0) {\n\t\t\t\tthis.hasMovedTimeline = true;\n\t\t\t}\n\n\t\t\tthis.setState({\n\t\t\t\tviewportStart: this.draggingViewportStart + newX\n\t\t\t}, () => {\n\t\t\t\tthis.rerender();\n\t\t\t})\n\n\t\t\treturn;\n\t\t}\n\n\t\tif (!this.dragging) {\n\t\t\treturn;\n\t\t}\n\n\t\tlet data = this.dragging.mouseMove(mousePosition)\n\n\t}\n\n\tmouseUp (event) {\n\n\t\tlet state = this.getCanvasState(), mousePosition = this.getMousePosition(event);\n\n\t\tif (!this.dragging && !this.hasMovedTimeline) {\n\n\t\t\tthis.draggingTimeline = false;\n\n\t\t\tif (mousePosition[1] <= 28 || mousePosition[1] >= 40) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// User clicked timeline without moving it\n\n\t\t\t/* let finalCursorPosition = (mousePosition[0] * state.unit / state.unitMap) + state.viewportStart;\n\n\t\t\tfinalCursorPosition = Math.max(Math.min(finalCursorPosition, this.end), this.start);\n\n\t\t\tthis.setState({\n\t\t\t\tcursorPosition: finalCursorPosition\n\t\t\t}, () => {\n\t\t\t\tthis.rerender();\n\t\t\t\tthis.props.onChange && this.props.onChange(this.state.cursorPosition);\n\t\t\t}) */\n\n\t\t\tthis.playhead.stopDrag(mousePosition);\n\n\t\t\treturn;\n\t\t}\n\n\t\tif (this.draggingTimeline) {\n\t\t\t// User dragged timeline, we don't want to register their drop position as we don't care.\n\t\t\tthis.draggingTimeline = false;\n\t\t\treturn;\n\t\t}\n\n\t\tlet dragging = this.dragging;\n\t\tthis.dragging = null;\n\n\t\tdragging && dragging.stopDrag(mousePosition);\n\n\t}\n\n\tsendOnChange () {\n\t\tthis.props.onChange && this.props.onChange(this.state.cursorPosition);\n\t}\n\n\ttimecode (seconds) {\n\t\tlet date = moment.unix(seconds).local();\n\t\treturn [date.format('DD/MM/YYYY'), date.format('HH:mm:ss')];\n\t}\n\n\tsetZoom (value) {\n\t\t// given the zoom level, work out where the cursor is in pixels & align it properly\n\n\t\tlet state = this.getCanvasState();\n\t\tlet posX = (state.cursorPosition - state.viewportStart) * state.unitMap / state.unit;\n\n\t\tlet newZoom = this.getZoom(value);\n\t\tlet newUnitMap = newZoom[0], newUnit = newZoom[1];\n\n\t\tlet viewportStart = state.cursorPosition - (posX * newUnit / newUnitMap);\n\n\t\tthis.setState({\n\t\t\tzoom: value,\n\t\t\tviewportStart: viewportStart\n\t\t}, () => this.fullRender())\n\t}\n\n\trender () {\n\n\t\treturn <div style={{ textAlign: 'right' }}>\n\t\t\t<div style={ styles.slider }>\n\t\t\t\t<Slider\n\t\t\t\t\tcolor={ styles.slider.color }\n\t\t\t\t\tvalue={ this.state.zoom }\n\t\t\t\t\tmin={ 1 }\n\t\t\t\t\tmax={ 10 }\n\t\t\t\t\tonChange={ (value) => this.setZoom(value) }></Slider>\n\t\t\t</div>\n\t\t\t<canvas\n\t\t\t\tclassName=\"timeline-canvas\"\n\t\t\t\tref={ (c) => this.setCanvas(c) }\n\t\t\t\tonMouseDown={ this.mouseDown.bind(this) }\n\t\t\t\tonMouseMove={ this.mouseMove.bind(this) }\n\t\t\t\tonMouseUp={ this.mouseUp.bind(this) } ></canvas>\n\t\t</div>;\n\n\t}\n\n}\n\nexport default withStyles(styles)(Timeline);","import React, { Component } from 'react';\nimport moment from 'moment';\n\nimport Hls from 'hls.js';\n\nimport { withStyles } from '@material-ui/core/styles';\n\n/**\n * Video is a very simple wrapper of the built-in HTML5 video.\n * \n * It is used to allow very simple external control of a video\n */\nclass Video extends Component {\n\n\tstate = {\n\t\tloading: true,\n\t\ttimecodeBase: 0,\n\t\tdiscontinuity: false\n\t}\n\n\tshouldComponentUpdate (nextProps, nextState) {\n\n\t\t// If the SRC updates anywhere, we need to update.\n\t\tif (this.state.src != nextState.src || this.props.src != nextProps.src) {\n\t\t\treturn true;\n\t\t}\n\n\t\treturn false;\n\t}\n\n\tcomponentWillMount () {\n\n\t\tthis.setSRC();\n\n\t\tif (this.props.hls) {\n\t\t\t// We can't use web workers with WebPack/create-react-app.\n\t\t\tthis.hls = new Hls({ enableWorker: false });\n\t\t\tthis.registerEvents();\n\t\t}\n\n\t}\n\n\tcomponentDidUpdate (prevProps) {\n\n\t\tif (this.props.src != prevProps.src || this.props.hls != this.props.hls) {\n\t\t\tthis.setSRC();\n\t\t}\n\n\t}\n\n\tregisterEvents () {\n\n\t\tthis.hls.on(Hls.Events.MANIFEST_PARSED, () => {\n\t\t\tthis.setState({\n\t\t\t\tloading: false,\n\t\t\t\tdiscontinuity: false\n\t\t\t})\n\t\t});\n\n\t\tthis.hls.on(Hls.Events.ERROR, (e, data) => {\n\t\t\tconsole.warn('HLS error', e, data)\n\t\t})\n\n\t\tthis.hls.on(Hls.Events.LEVEL_LOADED, (event, data) => {\n\t\t\tlet rawDateTime = data.details.fragments[0].programDateTime;\n\n\t\t\t// As old fragments are discarded (think sliding window), this allows us to work out\n\t\t\t// the exact timecode where video.currentTime = 0\n\t\t\tlet syncOffset = data.details.fragments[0].start * 1000;\n\n\t\t\tthis.state.discontinuity || this.setState({\n\t\t\t\ttimecodeBase: rawDateTime - syncOffset\n\t\t\t});\n\t\t});\n\n\t\tthis.hls.on(Hls.Events.FRAG_CHANGED, (event, data) => {\n\t\t\tthis.currentFrag = data.frag;\n\n\t\t\tlet fragmentTime = data.frag.programDateTime;\n\n\t\t\tlet expectedFragmentTime = this.state.timecodeBase + this.video.currentTime * 1000;\n\n\t\t\tlet error = data.frag.duration * 1100;\n\n\t\t\tif (Math.abs(expectedFragmentTime - fragmentTime) > error) {\n\t\t\t\tthis.setState({\n\t\t\t\t\ttimecodeBase: fragmentTime - this.video.currentTime * 1000,\n\t\t\t\t\tdiscontinuity: true\n\t\t\t\t})\n\t\t\t}\n\n\n\t\t});\n\n\t}\n\n\tgetTimecode () {\n\n\t\tif (!this.state.timecodeBase || !this.video) {\n\t\t\treturn 0;\n\t\t}\n\n\t\treturn (this.state.timecodeBase / 1000) + this.video.currentTime;\n\n\t}\n\n\tsetTimecode (timecode) {\n\t\t\n\t\t// If this timecode isn't loaded, return false.\n\t\t// It's the responsibility of our parent element to try and load the manifest at that point.\n\t\tif (timecode < this.state.timecodeBase / 1000) {\n\t\t\tconsole.error('Tried to seek to timecode that isn\\'t loaded');\n\t\t\treturn false;\n\t\t}\n\n\t\tthis.video.currentTime = timecode - this.state.timecodeBase / 1000;\n\t\treturn true;\n\n\t}\n\n\tgetEdgeTimecode () {\n\t\treturn this.state.timecodeBase / 1000 + this.hls.liveSyncPosition;\n\t}\n\n\tsetSRC () {\n\n\t\tthis.setState({\n\t\t\tsrc: this.props.hls ? '' : this.props.src,\n\t\t\thls: this.props.hls,\n\t\t}, () => {\n\t\t\tthis.forceUpdate();\n\t\t\tthis.state.hls && this.loadHLS();\n\t\t});\n\n\t}\n\n\tloadHLS () {\n\n\t\tif (!this.video) {\n\t\t\tthis.pendingLoadHLS = true;\n\t\t}\n\n\t\t// TODO\n\t\tconsole.error('HLS NOT IMPLEMENTED YET')\n\n\t\tthis.hls.loadSource(this.props.src);\n\t\tthis.hls.attachMedia(this.video);\n\n\t}\n\n\tsetVideo (v) {\n\n\t\tif (this.video) {\n\t\t\treturn;\n\t\t}\n\t\tthis.video = v;\n\n\t\tif (this.pendingLoadHLS) {\n\t\t\tthis.pendingLoadHLS = false;\n\t\t\tthis.loadHLS();\n\t\t}\n\n\t}\n\n\tplay () {\n\t\tthis.video.play();\n\t}\n\n\tpause () {\n\t\tthis.video.pause();\n\t}\n\n\tgetFrameRate () {\n\t\treturn 25;\n\t}\n\n\tstepBackwards () {\n\t\tlet frameRate = this.getFrameRate();\n\t\tthis.video.currentTime -= 1/frameRate;\n\t}\n\n\tstepForwards () {\n\t\tlet frameRate = this.getFrameRate();\n\t\tthis.video.currentTime += 1/frameRate;\n\t}\n\n\tseekStart () {\n\t\tthis.setTimecode(this.props.segmentStart);\n\t}\n\n\tseekEnd () {\n\t\tthis.setTimecode(this.props.segmentEnd);\n\t}\n\n\tonVideoStateChange (event) {\n\t\tlet target = event.target;\n\n\t\tlet loadingState = (!this.state.hls && event.type == 'canplay') ? false : this.state.loading;\n\n\t\tthis.setState({\n\t\t\tloading: loadingState,\n\t\t\tvideoState: {\n\t\t\t\tplaying: (!target.paused && !target.ended && !loadingState && target.currentTime >= 0)\n\t\t\t}\n\t\t}, () => this.props.onStateChange && this.props.onStateChange(this.state.videoState));\n\t}\n\n\trender () {\n\n\t\tlet props = Object.assign({}, this.props);\n\t\tprops.src = this.state.src;\n\n\t\treturn <video\n\t\t\tref={ (v) => this.setVideo(v) }\n\t\t\tonPlay={ this.onVideoStateChange.bind(this) }\n\t\t\tonCanPlay={ this.onVideoStateChange.bind(this) }\n\t\t\tonPause={ this.onVideoStateChange.bind(this) }\n\t\t\tonEnded={ this.onVideoStateChange.bind(this) }\n\t\t\t{...props} />;\n\t}\n\n}\n\nexport default Video;","import React, { Component } from 'react';\nimport moment from 'moment';\n\nimport { withStyles } from '@material-ui/core/styles';\n\nimport Button from '@material-ui/core/Button';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\n\n/**\n * VideoControls is a simple stepped component to allow a specified video to be controlled.\n * \n * It is used to allow very simple external control of a video\n */\nclass VideoControls extends Component {\n\n\tcomponentWillMount () {\n\n\t}\n\n\tplayPause () {\n\t\tthis.props.videoState.playing ? this.props.video.pause() : this.props.video.play();\n\t}\n\n\tseekStart () {\n\t\tthis.props.video.seekStart();\n\t}\n\n\tseekEnd () {\n\t\tthis.props.video.seekEnd();\n\t}\n\n\tstepBackwards () {\n\t\tthis.props.video.stepBackwards();\n\t}\n\n\tstepForwards () {\n\t\tthis.props.video.stepForwards();\n\t}\n\n\trender () {\n\n\t\treturn (\n\t\t\t<div className=\"video-controls\">\n\t\t\t\t<div className=\"video-controls-toolbar \">\n\t\t\t\t\t<Button variant=\"outlined\" color=\"white\" onClick={ this.playPause.bind(this) }>\n\t\t\t\t\t\t<FontAwesomeIcon icon={ this.props.videoState.playing ? 'pause' : 'play' } />\n\t\t\t\t\t</Button>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"video-controls-toolbar flex-right\">\n\t\t\t\t\t<Button variant=\"outlined\" color=\"white\" onClick={ this.seekStart.bind(this) }>\n\t\t\t\t\t\t<b>{ '{' }</b> <FontAwesomeIcon icon=\"long-arrow-alt-left\" />\n\t\t\t\t\t</Button>\n\t\t\t\t\t<Button variant=\"outlined\" color=\"white\" onClick={ this.stepBackwards.bind(this) }>\n\t\t\t\t\t\t<FontAwesomeIcon icon=\"step-backward\" />\n\t\t\t\t\t</Button>\n\t\t\t\t\t<Button variant=\"outlined\" color=\"white\" onClick={ this.stepForwards.bind(this) }>\n\t\t\t\t\t\t<FontAwesomeIcon icon=\"step-forward\" />\n\t\t\t\t\t</Button>\n\t\t\t\t\t<Button variant=\"outlined\" color=\"white\" onClick={ this.seekEnd.bind(this) }>\n\t\t\t\t\t\t<FontAwesomeIcon icon=\"long-arrow-alt-right\" /> <b>{ '}' }</b>\n\t\t\t\t\t</Button>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n\n}\n\nexport default VideoControls;","import React, { Component } from 'react';\n\nimport TimelineComponent from '../components/Timeline';\n\nimport Video from '../components/Video';\nimport VideoControls from '../components/VideoControls';\n\nimport { withStyles } from '@material-ui/core/styles';\nimport Button from '@material-ui/core/Button';\n\nimport AppBar from '@material-ui/core/AppBar';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport Typography from '@material-ui/core/Typography';\nimport IconButton from '@material-ui/core/IconButton';\nimport Switch from '@material-ui/core/Switch';\nimport FormGroup from '@material-ui/core/FormGroup';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport Menu from '@material-ui/core/Menu';\n\nimport Checkbox from '@material-ui/core/Checkbox';\nimport Radio from '@material-ui/core/Radio';\nimport RadioGroup from '@material-ui/core/RadioGroup';\nimport FormHelperText from '@material-ui/core/FormHelperText';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport FormControl from '@material-ui/core/FormControl';\nimport FormLabel from '@material-ui/core/FormLabel';\nimport TextField from '@material-ui/core/TextField';\n\nconst styles = theme => ({\n\tbutton: {\n\t\tmargin: theme.spacing.unit,\n\t},\n});\n\n\nclass Frame extends Component {\n\n\tthemeConfig = {\n\t\ttext: {\n\t\t\tline1: {\n\t\t\t\tx: (state) => state['layers.logo'] ? 350 : 512,\n\t\t\t\ty: 155,\n\t\t\t\tw: (state) => state['layers.logo'] ? 600 : 915,\n\t\t\t\th: 125,\n\t\t\t\tmaxFont: 80,\n\t\t\t\twrap: {\n\t\t\t\t\tminFont: 40\n\t\t\t\t},\n\t\t\t\ttextAlign: (state) => state['layers.logo'] ? 'start' : 'middle',\n\t\t\t\ttextBaseline: 'middle'\n\t\t\t},\n\t\t\tline2: {\n\t\t\t\tx: 512,\n\t\t\t\ty: 900,\n\t\t\t\tw: 915,\n\t\t\t\th: 175,\n\t\t\t\tmaxFont: 70,\n\t\t\t\twrap: {\n\t\t\t\t\tminFont: 40\n\t\t\t\t},\n\t\t\t\ttextAlign: 'center',\n\t\t\t\ttextBaseline: 'middle'\n\t\t\t}\n\t\t}\n\t}\n\n\tcanva = {};\n\n\tstate = {\n\t\t'line1': '',\n\t\t'line2': '',\n\t\t'layers.logo': true,\n\t\t'layers.background': false,\n\t\t'layers.foreground': true,\n\t\tvideo: {\n\t\t\tplaying: false\n\t\t}\n\t}\n\n\tcomponentWillMount () {\n\t\ttry {\n\t\t\tlet initialStateData = JSON.parse(this.props.initialState);\n\t\t\tdelete initialStateData.raw;\n\t\t\tthis.setState(initialStateData);\n\t\t} catch (e) {\n\t\t}\n\t}\n\n\tsetLayer (canvas, layer) {\n\n\t\tif (this.canva[layer]) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.canva[layer] = canvas;\n\n\t\tcanvas.width = canvas.height = 1024;\n\n\t\tif (layer == 'text') {\n\t\t\tthis.rerender();\n\t\t\treturn;\n\t\t}\n\n\t\tvar image = new Image();\n\t\timage.onload = () => {\n\t\t\tcanvas.getContext('2d').drawImage(image, 0, 0, 1024, 1024);\n\t\t}\n\n\t\timage.src = '/frames/demo/' + layer + '.png';\n\n\t}\n\n\tclearText () {\n\t\tlet canvas = this.canva['text'];\n\t\tlet context = canvas.getContext('2d');\n\t\tcontext.clearRect(0, 0, canvas.width, canvas.height);\n\n\t}\n\n\t/**\n\t * Evaluates the configuration given the current state. Useful for dynamic width/heights\n\t */\n\tevaluateConfig (config) {\n\n\t\tlet newConfig = Object.assign({}, config);\n\n\t\tfor (var i in newConfig) {\n\t\t\tif (typeof newConfig[i] == 'function') {\n\t\t\t\tnewConfig[i] = newConfig[i](this.state);\n\t\t\t}\n\t\t}\n\n\t\treturn newConfig;\n\n\t}\n\n\t/**\n\t * Draws the given line of text.\n\t */\n\tdrawText (config, line) {\n\n\t\tconfig = this.evaluateConfig(config);\n\t\tlet context = this.canva['text'].getContext('2d');\n\n\t\tcontext.fillStyle = 'white';\n\t\tcontext.textAlign = config.textAlign;\n\t\tcontext.textBaseline = config.textBaseline;\n\n\t\tvar size = config.maxFont;\n\n\t\tif (config.wrap == false) {\n\n\t\t\tdo {\n\t\t\t\tcontext.font = \"bold \" + size + \"px Bebas Neue\";\n\t\t\t\tsize -= 5;\n\t\t\t} while (context.measureText(line).width > config.w);\n\n\t\t\tcontext.fillText(line, config.x, config.y);\n\t\t\treturn;\n\n\t\t}\n\n\t\tlet i = 0;\n\n\t\tlet BREAK_CHARACTER = '^';\n\n\t\tlet words = line.split(' ');\n\n\t\tif (line.indexOf(BREAK_CHARACTER) == -1) {\n\t\t\twhile (true) {\n\n\t\t\t\tcontext.font = \"bold \" + size + \"px Bebas Neue\";\n\t\t\t\tsize -= 5;\n\n\t\t\t\tif (context.measureText(line).width <= config.w) {\n\t\t\t\t\t// Single line!\n\t\t\t\t\tcontext.fillText(line, config.x, config.y);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (size <= config.wrap.minFont) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tfor (i = words.length; i > 0; i--) {\n\t\t\t\tlet phrase = words.slice(0, i).join(' ');\n\t\t\t\tif (context.measureText(phrase).width < config.w) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\t\t} else {\n\t\t\ti = 1;\n\t\t\twords = line.split(BREAK_CHARACTER);\n\t\t}\n\t\t\n\t\tsize = config.wrap.minFont;\n\n\n\t\tcontext.font = \"bold \" + size + \"px Bebas Neue\";\n\t\tcontext.fillText(words.slice(0, i).join(' '), config.x, config.y - size * 0.7);\n\t\tcontext.fillText(words.slice(i, words.length).join(' '), config.x, config.y + size * 0.7);\n\n\t}\n\n\tonValueChange(control, modifier, event) {\n\n\t\tlet value = (event.target.type == 'checkbox') ? event.target.checked : event.target.value;\n\n\t\tif (modifier != null) {\n\t\t\tvalue = modifier(value);\n\t\t}\n\n\t\tthis.setState({\n\t\t\t[control]: value\n\t\t}, () => this.rerender());\n\n\t}\n\n\trerender () {\n\t\tthis.clearText();\n\t\tthis.drawText(this.themeConfig.text.line1, this.state.line1);\n\t\tthis.drawText(this.themeConfig.text.line2, this.state.line2);\n\t}\n\n\tgetStyleForLayer (layer) {\n\n\t\tif (typeof this.state['layers.' + layer] != 'undefined') {\n\t\t\treturn this.state['layers.' + layer] ? {} : { display: 'none'}\n\t\t}\n\n\t\treturn {};\n\n\t}\n\n\texportData () {\n\t\tlet background = this.mergeLayers(['background'], '#000000');\n\t\tlet foreground = this.mergeLayers(['text', 'logo', 'foreground']);\n\n\t\tlet data = {\n\t\t\t'line1': this.state.line1,\n\t\t\t'line2': this.state.line2,\n\t\t\t'layers.logo': this.state['layers.logo'],\n\t\t\t'layers.background': this.state['layers.background'],\n\t\t\t'layers.foreground': this.state['layers.foreground'],\n\t\t\traw: {\n\t\t\t\tbackground: background,\n\t\t\t\tforeground: foreground\n\t\t\t}\n\t\t}\n\n\t\treturn JSON.stringify(data);\n\t}\n\n\tmergeLayers (layers, backgroundColour) {\n\n\t\tlet canvas = document.createElement('canvas');\n\t\tcanvas.width = canvas.height = this.canva[layers[0]].width;\n\t\tlet context = canvas.getContext('2d');\n\n\t\tif (backgroundColour != undefined) {\n\t\t\tcontext.fillStyle = backgroundColour;\n\t\t\tcontext.fillRect(0, 0, canvas.width, canvas.height);\n\t\t}\n\n\t\tfor (var i = 0; i < layers.length; i++) {\n\t\t\tcontext.drawImage(this.canva[layers[i]], 0, 0);\n\t\t}\n\n\t\treturn canvas.toDataURL();\n\t}\n\n\tsetVideo (video) {\n\t\tif (this.video) {\n\t\t\treturn false;\n\t\t}\n\t\tthis.video = video;\n\t\tthis.forceUpdate();\n\t}\n\n\tsetVideoState (state) {\n\t\tthis.setState({\n\t\t\tvideo: state\n\t\t})\n\t}\n\n\trender () {\n\t\treturn (\n\n\t\t\t<div class=\"fullpage\">\n\n\t\t\t\t<div class=\"video-container\">\n\n\t\t\t\t\t<div class=\"video-preview-square\">\n\n\t\t\t\t\t\t<canvas ref={ (r) => this.setLayer(r, 'background') } className=\"layer-0\" style={ this.getStyleForLayer('background') } />\n\t\t\t\t\t\t<div className={ this.state['layers.background'] ? \"layer-1 video-layer\" : \"layer-1 video-layer video-layer-stretch\"} >\n\t\t\t\t\t\t\t<Video\n\t\t\t\t\t\t\t\tref={ (v) => this.setVideo(v) }\n\t\t\t\t\t\t\t\thls={ true }\n\t\t\t\t\t\t\t\tsrc={ this.props.previewSRC}\n\t\t\t\t\t\t\t\tstyle={ this.getStyleForLayer('video') } \n\t\t\t\t\t\t\t\tonStateChange={ (state) => this.setVideoState(state) }\n\t\t\t\t\t\t\t\tsegmentStart = { 0 }\n\t\t\t\t\t\t\t\tsegmentEnd = { 10 } />\n\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<canvas ref={ (r) => this.setLayer(r, 'text') } className=\"layer-2\" style={ this.getStyleForLayer('text') } />\n\t\t\t\t\t\t<canvas ref={ (r) => this.setLayer(r, 'logo') } className=\"layer-3\" style={ this.getStyleForLayer('logo') } />\n\t\t\t\t\t\t<canvas ref={ (r) => this.setLayer(r, 'foreground') } className=\"layer-4\" style={ this.getStyleForLayer('foreground') } />\n\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<VideoControls video={ this.video } videoState={ this.state.video } />\n\n\t\t\t\t</div>\n\n\n\t\t\t\t<div class=\"video-side\">\n\n\t\t\t\t\t<div class=\"video-selector\">\n\n\t\t\t\t\t\t<AppBar position=\"static\">\n\t\t\t\t\t\t\t<Toolbar>\n\t\t\t\t\t\t\t\t<div style={{ flex: 1 }}>{ this.props.coreImportObj.title }</div>\n\t\t\t\t\t\t\t</Toolbar>\n\t\t\t\t\t\t</AppBar>\n\n\t\t\t\t\t\t<div class=\"side-content\">\n\n\t\t\t\t\t\t\t<FormControlLabel control={<Checkbox checked={ true } value=\"checkedC\" />} label=\"Enable Frame\" />\n\n\t\t\t\t\t\t\t<br />\n\n\t\t\t\t\t\t\t<FormControlLabel\n\t\t\t\t\t\t\t\tcontrol={<Checkbox checked={ this.state['layers.logo'] }\n\t\t\t\t\t\t\t\tonChange={ this.onValueChange.bind(this, 'layers.logo', null) }\n\t\t\t\t\t\t\t\tvalue=\"true\" />} label=\"Show Logo\" />\n\n\t\t\t\t\t\t\t<h2 class=\"side-title\">Text Settings</h2>\n\n\t\t\t\t\t\t\t<TextField\n\t\t\t\t\t\t\t\tvalue={ this.state.line1 }\n\t\t\t\t\t\t\t\tonChange={ this.onValueChange.bind(this, 'line1', null) }\n\t\t\t\t\t\t\t\tlabel=\"Show Title Text (Top Line)\"\n\t\t\t\t\t\t\t\tstyle={{ width: '100%'}} />\n\n\t\t\t\t\t\t\t<TextField\n\t\t\t\t\t\t\t\tvalue={ this.state.line2 }\n\t\t\t\t\t\t\t\tonChange={ this.onValueChange.bind(this, 'line2', null) }\n\t\t\t\t\t\t\t\tlabel=\"Segment Title Text (Bottom Line)\"\n\t\t\t\t\t\t\t\tstyle={{ width: '100%'}} />\n\n\t\t\t\t\t\t\t<h2 class=\"side-title\">Frame Settings</h2>\n\n\t\t\t\t\t\t\t<FormControlLabel\n\t\t\t\t\t\t\t\tcontrol={<Checkbox checked={ this.state['layers.foreground'] }\n\t\t\t\t\t\t\t\tonChange={ this.onValueChange.bind(this, 'layers.foreground', null) }\n\t\t\t\t\t\t\t\tvalue=\"true\" />} label=\"Foreground Graphics\" />\n\t\t\t\t\t\t\t<Button color=\"secondary\">\n\t\t\t\t\t\t\t\tBrowse\n\t\t\t\t\t\t\t</Button>\n\n\n\t\t\t\t\t\t\t<p class=\"label-hint\">(Check me to enable the graphics in the theme that can overlap the video)</p>\n\n\t\t\t\t\t\t\t<RadioGroup\n\t\t\t\t\t\t\t\tonChange={ this.onValueChange.bind(this, 'layers.background', (value) => value == 'true')}\n\t\t\t\t\t\t\t\tvalue={ this.state['layers.background'] }>\n\n\t\t\t\t\t\t\t\t<FormControlLabel control={ <Radio color=\"primary\" /> } label={ <div>Background Graphic&nbsp;&nbsp;\n\t\t\t\t\t\t\t\t\t<Button color=\"secondary\">\n\t\t\t\t\t\t\t\t\t\tBrowse\n\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t</div> } value={ true } />\n\n\t\t\t\t\t\t\t\t<p class=\"label-hint\"></p>\n\n\t\t\t\t\t\t\t\t<FormControlLabel control={ <Radio color=\"primary\" /> } label=\"Fit To Screen\" value={ false } />\n\n\t\t\t\t\t\t\t</RadioGroup>\n\n\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\tvariant=\"contained\"\n\t\t\t\t\t\t\t\t\tcolor=\"secondary\"\n\t\t\t\t\t\t\t\t\tfullWidth={ true }\n\t\t\t\t\t\t\t\t\tonClick={ this.props.saveAndClose.bind(this, this.exportData.bind(this)) }\n\t\t\t\t\t\t\t\t\tclassName=\"padded-button\">\n\t\t\t\t\t\t\t\tSave &amp; Return\n\t\t\t\t\t\t\t</Button>\n\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t</div>\n\n\t\t);\n\t}\n}\n\nexport default withStyles(styles)(Frame);\n\t","import React, { Component } from 'react';\nimport { withStyles } from '@material-ui/core/styles';\n\nimport Button from '@material-ui/core/Button';\n\nclass VideoThumbnail extends Component {\n\n\trender () {\n\t\treturn (\n\t\t\t<div className=\"video-thumbnail-video\">\n\t\t\t\t<Button variant=\"outlined\" onClick={ this.props.onClick }>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<img src={ this.props.thumbnail } />\n\t\t\t\t\t\t<p>{ this.props.title }</p>\n\t\t\t\t\t</div>\n\t\t\t\t</Button>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default VideoThumbnail;\n","import React, { Component } from 'react';\nimport { withStyles } from '@material-ui/core/styles';\n\n\nclass VideoThumbnailContainer extends Component {\n\n\trender () {\n\t\treturn (\n\t\t\t<div className=\"video-thumbnail-container\">\n\t\t\t\t{ this.props.children }\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default VideoThumbnailContainer;\n","import React, { Component } from 'react';\nimport moment from 'moment';\n\nimport { withStyles } from '@material-ui/core/styles';\n\nimport Button from '@material-ui/core/Button';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\n\nimport Menu from '@material-ui/core/Menu';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport TextField from '@material-ui/core/TextField';\n\nlet styles = {\n\ttextField: {\n\t\tfontSize: '10pt'\n\t},\n\ttopRowButton: {\n\t\tminWidth: '30px'\n\t}\n}\n\n/**\n * AbsoluteTimePicker renders all the necessary bits to select a cue point with very high accuracy.\n */\nclass AbsoluteTimePicker extends Component {\n\n\tcomponentWillMount () {\n\n\t}\n\n\tplayPause () {\n\t\tthis.props.videoState.playing ? this.props.video.pause() : this.props.video.play();\n\t}\n\n\tseekStart () {\n\n\t}\n\n\tseekEnd () {\n\n\t}\n\n\tstepBackwards () {\n\t\tthis.props.video.stepBackwards();\n\t}\n\n\tstepForwards () {\n\t\tthis.props.video.stepForwards();\n\t}\n\n\tformat (dateTime) {\n\t\treturn dateTime;\n\t}\n\n\ttimecode (seconds) {\n\t\tlet date = moment.unix(seconds).local();\n\t\treturn [date.format('DD/MM/YYYY HH:mm:ss.SSS Z')];\n\t}\n\n\tsetBackwards () {\n\t\tthis.triggerOnChange(this.props.value - (1 / this.props.video.getFrameRate()));\n\t}\n\n\tsetForwards () {\n\t\tthis.triggerOnChange(this.props.value + (1 / this.props.video.getFrameRate()));\n\t}\n\n\tsetNow () {\n\t\tthis.triggerOnChange(this.props.video.getTimecode());\n\t}\n\n\ttriggerOnChange (value) {\n\t\tconsole.log('trigger on change', value, this.props.onChange)\n\t\tthis.props.onChange && this.props.onChange(value);\n\t}\n\n\trender () {\n\n\t\treturn (\n\t\t\t<div className=\"absolute-time-container\">\n\n\t\t\t\t<TextField\n\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\tmargin=\"normal\"\n\t\t\t\t\tstyle={{ width: '270px', flex: '1' }}\n\t\t\t\t\tInputProps={{\n\t\t\t\t\t\tclasses: {\n\t\t\t\t\t\t\tinput: this.props.classes.textField\n\t\t\t\t\t\t}\n\t\t\t\t\t}}\n\t\t\t\t\tlabel={ this.props.label }\n\t\t\t\t\tvalue={ this.timecode(this.props.value)[0] }\n\t\t\t\t\tonChange={ (a) => '' } />\n\n\t\t\t\t<div class=\"absolute-time-button-array\">\n\t\t\t\t\t<Button\n\t\t\t\t\t\t\tonClick={ this.setBackwards.bind(this) }\n\t\t\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\t\t\tcolor=\"white\"\n\t\t\t\t\t\t\tsize=\"small\"\n\t\t\t\t\t\t\tclassName={ this.props.classes.topRowButton }>\n\t\t\t\t\t\t<FontAwesomeIcon icon=\"step-backward\" />\n\t\t\t\t\t</Button>\n\t\t\t\t\t<Button\n\t\t\t\t\t\t\tonClick={ this.setNow.bind(this) }\n\t\t\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\t\t\tcolor=\"white\"\n\t\t\t\t\t\t\tsize=\"small\"\n\t\t\t\t\t\t\tclassName={ this.props.classes.topRowButton }>\n\t\t\t\t\t\t<FontAwesomeIcon icon=\"stopwatch\" />\n\t\t\t\t\t</Button>\n\t\t\t\t\t<Button\n\t\t\t\t\t\t\tonClick={ this.setForwards.bind(this) }\n\t\t\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\t\t\tcolor=\"white\"\n\t\t\t\t\t\t\tsize=\"small\"\n\t\t\t\t\t\t\tclassName={ this.props.classes.topRowButton }>\n\t\t\t\t\t\t<FontAwesomeIcon icon=\"step-forward\" />\n\t\t\t\t\t</Button>\n\t\t\t\t</div>\n\n\t\t\t</div>\n\t\t);\n\t}\n\n}\n\nexport default withStyles(styles)(AbsoluteTimePicker);","import React, { Component } from 'react';\nimport { withStyles } from '@material-ui/core/styles';\n\nimport AirTower from '../network/AirTower';\n\nimport VideoThumbnail from '../components/VideoThumbnail.jsx';\nimport VideoThumbnailContainer from '../components/VideoThumbnailContainer.jsx';\n\nimport Button from '@material-ui/core/Button';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport TextField from '@material-ui/core/TextField';\nimport Typography from '@material-ui/core/Typography';\n\nimport AbsoluteTimePicker from '../components/AbsoluteTimePicker';\n\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\n\n\nclass VideoSelectorNew extends Component {\n\n\tstate = {\n\t\tcuePoint: '1.0',\n\t\tname: '',\n\t\tfile: null,\n\t\tuploading: false\n\t}\n\n\thandleClose () {\n\t\tthis.props.onClose(undefined);\n\t}\n\n\thandleSelect (slate) {\n\t\tthis.props.onClose(slate);\n\t}\n\n\thandleSelect (slate) {\n\t\tif (isNaN(parseFloat(this.state.cuePoint)) || !this.state.file || this.state.name.length < 4) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.setState({\n\t\t\tuploading: true\n\t\t});\n\n\t\tlet airTower = AirTower.getInstance().core;\n\t\tairTower.uploadSlate(this.state.name, this.state.file, parseFloat(this.state.cuePoint))\n\t\t\t.then((slate) => this.props.onClose(slate))\n\t}\n\n\tselectFile (file) {\n\t\tthis.setState({\n\t\t\tfile: file\n\t\t})\n\t}\n\n\tsetData (name, event) {\n\t\tthis.setState({\n\t\t\t[name]: event.target.value\n\t\t})\n\t}\n\n\trender () {\n\t\treturn (\n\t\t\t<Dialog open={ true } scroll=\"paper\">\n\t\t\t\t<DialogTitle>Upload New Video</DialogTitle>\n\n\t\t\t\t<DialogContent>\n\n\t\t\t\t\t<TextField\n\t\t\t\t\t\tlabel=\"Name\"\n\t\t\t\t\t\tonChange={ this.setData.bind(this, 'name') }\n\t\t\t\t\t\tvalue={ this.state.name }\n\t\t\t\t\t\ttype=\"text\" />\n\t\t\t\t\t<br />\n\n\t\t\t\t\t<input\n\t\t\t\t\t\ttype=\"file\"\n\t\t\t\t\t\tonChange={ (e) => this.selectFile(e.target.files[0]) } />\n\t\t\t\t\t<br />\n\n\t\t\t\t\t<TextField\n\t\t\t\t\t\tlabel=\"Cue Point\"\n\t\t\t\t\t\tonChange={ this.setData.bind(this, 'cuePoint') }\n\t\t\t\t\t\tvalue={ this.state.cuePoint }\n\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\tplaceholder=\"0.00\"\n\t\t\t\t\t\tmask=\"[0-9]+(\\.[0-9]{1,2})?\" />\n\n\t\t\t\t</DialogContent>\n\n\t\t\t\t<DialogActions>\n\t\t\t\t\t<Button\n\t\t\t\t\t\t\tonClick={ this.handleClose.bind(this) }\n\t\t\t\t\t\t\tdisabled={ this.state.uploading }\n\t\t\t\t\t\t\tcolor=\"secondary\">\n\t\t\t\t\t\tCancel\n\t\t\t\t\t</Button>\n\t\t\t\t\t<Button\n\t\t\t\t\t\t\tonClick={ this.handleSelect.bind(this) }\n\t\t\t\t\t\t\tdisabled={ this.state.uploading }\n\t\t\t\t\t\t\tcolor=\"secondary\"\n\t\t\t\t\t\t\tautoFocus>\n\t\t\t\t\t\tUpload\n\t\t\t\t\t</Button>\n\t\t\t\t</DialogActions>\n\t\t\t</Dialog>\n\t\t);\n\t}\n}\n\nexport default VideoSelectorNew;\n","import React, { Component } from 'react';\nimport { withStyles } from '@material-ui/core/styles';\n\nimport AirTower from '../network/AirTower';\n\nimport VideoThumbnail from '../components/VideoThumbnail.jsx';\nimport VideoThumbnailContainer from '../components/VideoThumbnailContainer.jsx';\n\nimport Button from '@material-ui/core/Button';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport DialogActions from '@material-ui/core/DialogActions';\n\nimport VideoSelectorNew from './VideoSelectorNew';\n\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\n\nclass VideoSelector extends Component {\n\n\tstate = {\n\t\tdialog: '',\n\t\tslates: []\n\t}\n\n\tcomponentWillMount () {\n\t\tthis.loadSlates();\n\t}\n\n\tloadSlates () {\n\t\tlet airTower = AirTower.getInstance().core;\n\n\t\tairTower.loadSlates().then((slates) => this.setState({ slates }))\n\t}\n\n\thandleClose () {\n\t\tthis.props.onClose(undefined);\n\t}\n\n\thandleSelect (slate) {\n\t\tthis.props.onClose(slate)\n\t}\n\n\topenNew () {\n\t\tthis.setState({\n\t\t\tdialog: 'new'\n\t\t})\n\t}\n\n\tcloseSlateView (saveData) {\n\t\tthis.props.onClose(saveData);\n\t}\n\n\trender () {\n\t\treturn (\n\t\t\t<Dialog open={ true } maxWidth={ 'xl' } scroll=\"paper\">\n\t\t\t\t<DialogTitle>Select Video</DialogTitle>\n\n\t\t\t\t{ this.state.dialog == 'new' && (\n\t\t\t\t\t<VideoSelectorNew\n\t\t\t\t\t\tonClose={ this.closeSlateView.bind(this) } />\n\t\t\t\t)}\n\n\t\t\t\t<DialogContent>\n\t\t\t\t\t<VideoThumbnailContainer>\n\t\t\t\t\t\t{ this.state.slates.map((slate) => (\n\t\t\t\t\t\t\t<VideoThumbnail\n\t\t\t\t\t\t\t\tthumbnail={ slate.getThumbnailPath() }\n\t\t\t\t\t\t\t\ttitle={ slate.name }\n\t\t\t\t\t\t\t\tonClick={ this.handleSelect.bind(this, slate) } />\n\t\t\t\t\t\t))}\n\n\t\t\t\t\t\t<div className=\"video-thumbnail-video\">\n\t\t\t\t\t\t\t<Button variant=\"outlined\" onClick={ this.openNew.bind(this) }>\n\t\t\t\t\t\t\t\t<FontAwesomeIcon icon=\"plus\" />\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</VideoThumbnailContainer>\n\t\t\t\t</DialogContent>\n\n\t\t\t\t<DialogActions>\n\t\t\t\t\t<Button onClick={ this.handleClose.bind(this) } color=\"secondary\">\n\t\t\t\t\t\tCancel\n\t\t\t\t\t</Button>\n\t\t\t\t</DialogActions>\n\t\t\t</Dialog>\n\t\t);\n\t}\n}\n\nexport default VideoSelector;\n","import React, { Component } from 'react';\n\nimport TimelineComponent from '../components/Timeline';\n\nimport Video from '../components/Video';\nimport VideoControls from '../components/VideoControls';\n\nimport VideoSelectorDialog from './VideoSelector';\n\nimport { withStyles } from '@material-ui/core/styles';\nimport Button from '@material-ui/core/Button';\n\nimport AppBar from '@material-ui/core/AppBar';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport Typography from '@material-ui/core/Typography';\nimport IconButton from '@material-ui/core/IconButton';\nimport Switch from '@material-ui/core/Switch';\nimport FormGroup from '@material-ui/core/FormGroup';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport Menu from '@material-ui/core/Menu';\n\nimport Checkbox from '@material-ui/core/Checkbox';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport FormControl from '@material-ui/core/FormControl';\nimport FormLabel from '@material-ui/core/FormLabel';\nimport Select from '@material-ui/core/Select';\n\nconst styles = theme => ({\n\tbutton: {\n\t\tmargin: theme.spacing.unit,\n\t},\n});\n\n\nclass Slate extends Component {\n\n\tstate = {\n\t\t'intro_slate_id': null,\n\t\t'outro_slate_id': null,\n\t\t'intro_slate_name': 'None',\n\t\t'outro_slate_name': 'None',\n\n\t\tdialog: null,\n\n\t\tvideoSRC: '/slates/default/intro.mp4',\n\t\tvideo: {\n\t\t\tplaying: false\n\t\t}\n\t}\n\n\tcomponentWillMount () {\n\t\ttry {\n\t\t\tlet initialStateData = JSON.parse(this.props.initialState);\n\t\t\tdelete initialStateData.raw;\n\t\t\tthis.setState(initialStateData);\n\t\t} catch (e) {\n\t\t}\n\t}\n\n\n\tonValueChange(control, modifier, event) {\n\n\t\tlet value = (event.target.type == 'checkbox') ? event.target.checked : event.target.value;\n\n\t\tif (modifier != null) {\n\t\t\tvalue = modifier(value);\n\t\t}\n\n\t\tthis.setState({\n\t\t\t[control]: value\n\t\t}, () => this.rerender());\n\n\t}\n\n\texportData () {\n\t\tlet data = {\n\t\t\t'intro_slate_id': this.state.intro_slate_id,\n\t\t\t'outro_slate_id': this.state.outro_slate_id,\n\t\t\t'intro_slate_name': this.state.intro_slate_name,\n\t\t\t'outro_slate_name': this.state.outro_slate_name\n\t\t}\n\n\t\treturn JSON.stringify(data);\n\t}\n\n\tsetVideo (video) {\n\t\tif (this.video) {\n\t\t\treturn false;\n\t\t}\n\t\tthis.video = video;\n\t\tthis.forceUpdate();\n\t}\n\n\tsetVideoState (state) {\n\t\tthis.setState({\n\t\t\tvideo: state\n\t\t})\n\t}\n\n\tpreview (type) {\n\t\tlet id = this.state[type + '_slate_id'];\n\n\t\tthis.setState({\n\t\t\tvideoSRC: '/api/slates/' + id + '/download.mp4'\n\t\t}, () => this.video.play())\n\t}\n\n\tselectSlate (type) {\n\t\tthis.setState({\n\t\t\tdialog: 'video_selector',\n\t\t\tdialogArg: type\n\t\t})\n\t}\n\n\tcloseSlateView (saveData) {\n\t\tif (saveData != undefined) {\n\t\t\tthis.setState({\n\t\t\t\t[this.state.dialogArg + '_slate_id']: saveData.id,\n\t\t\t\t[this.state.dialogArg + '_slate_name']: saveData.name,\n\t\t\t})\n\t\t}\n\t\tthis.setState({\n\t\t\tdialog: null\n\t\t})\n\t}\n\n\trender () {\n\t\treturn (\n\t\t\t<div className=\"fullpage\">\n\n\t\t\t\t<div className=\"video-container\">\n\t\t\t\t\t<div className=\"video-player fit\">\n\t\t\t\t\t\t<div className=\"video-player-video-element\">\n\t\t\t\t\t\t\t<Video\n\t\t\t\t\t\t\t\tref={ (v) => this.setVideo(v) }\n\t\t\t\t\t\t\t\tonStateChange={ (state) => this.setVideoState(state) }\n\t\t\t\t\t\t\t\thls={ false }\n\t\t\t\t\t\t\t\tsrc={ this.state.videoSRC }\n\t\t\t\t\t\t\t\tsegmentStart = { 0 }\n\t\t\t\t\t\t\t\tsegmentEnd = { 999999999 } />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<VideoControls video={ this.video } videoState={ this.state.video } />\n\n\t\t\t\t</div>\n\n\t\t\t\t<div class=\"video-side\">\n\n\t\t\t\t\t<div class=\"video-selector\">\n\n\t\t\t\t\t\t<AppBar position=\"static\">\n\t\t\t\t\t\t\t<Toolbar>\n\t\t\t\t\t\t\t\t<div style={{ flex: 1 }}>{ this.props.coreImportObj.title }</div>\n\t\t\t\t\t\t\t</Toolbar>\n\t\t\t\t\t\t</AppBar>\n\n\t\t\t\t\t\t<div class=\"side-content\">\n\n\t\t\t\t\t\t\t<FormControlLabel control={<Checkbox checked={ true } value=\"checkedC\" />} label=\"Enable Intro & Outro\" />\n\n\t\t\t\t\t\t\t<h2 class=\"side-title\">Intro Video</h2>\n\n\t\t\t\t\t\t\t<div style={{ display: 'flex' }}>\n\t\t\t\t\t\t\t\t<Select\n\t\t\t\t\t\t\t\t\topen={ false }\n\t\t\t\t\t\t\t\t\tonOpen={ this.selectSlate.bind(this, 'intro') }\n\t\t\t\t\t\t\t\t\tfullWidth={ true }\n\t\t\t\t\t\t\t\t\tvalue={ 0 }>\n\t\t\t\t\t\t\t\t\t<MenuItem value={ 0 }>{ this.state.intro_slate_name }</MenuItem>\n\t\t\t\t\t\t\t\t</Select>\n\t\t\t\t\t\t\t\t<Button onClick={ this.preview.bind(this, 'intro') }>Preview</Button>\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t<h2 class=\"side-title\">Outro Video</h2>\n\n\t\t\t\t\t\t\t<div style={{ display: 'flex' }}>\n\t\t\t\t\t\t\t\t<Select\n\t\t\t\t\t\t\t\t\topen={ false }\n\t\t\t\t\t\t\t\t\tonOpen={ this.selectSlate.bind(this, 'outro') }\n\t\t\t\t\t\t\t\t\tfullWidth={ true }\n\t\t\t\t\t\t\t\t\tvalue={ 0 }>\n\t\t\t\t\t\t\t\t\t<MenuItem value={ 0 }>{ this.state.outro_slate_name }</MenuItem>\n\t\t\t\t\t\t\t\t</Select>\n\t\t\t\t\t\t\t\t<Button onClick={ this.preview.bind(this, 'outro') }>Preview</Button>\n\t\t\t\t\t\t\t</div>\n\n\n\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\tvariant=\"contained\"\n\t\t\t\t\t\t\t\t\tcolor=\"secondary\"\n\t\t\t\t\t\t\t\t\tfullWidth={ true }\n\t\t\t\t\t\t\t\t\tonClick={ this.props.saveAndClose.bind(this, this.exportData.bind(this)) }\n\t\t\t\t\t\t\t\t\tclassName=\"padded-button\">\n\t\t\t\t\t\t\t\tSave &amp; Return\n\t\t\t\t\t\t\t</Button>\n\n\t\t\t\t\t\t\t{ this.state.dialog == 'video_selector' && (\n\t\t\t\t\t\t\t\t<VideoSelectorDialog\n\t\t\t\t\t\t\t\t\ttype={ this.state.dialogArg }\n\t\t\t\t\t\t\t\t\tonClose={ this.closeSlateView.bind(this) } />\n\t\t\t\t\t\t\t)}\n\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default withStyles(styles)(Slate);\n","import React, { Component } from 'react';\nimport { withStyles } from '@material-ui/core/styles';\n\nimport Button from '@material-ui/core/Button';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport TextField from '@material-ui/core/TextField';\nimport FormHelperText from '@material-ui/core/FormHelperText';\nimport OutlinedInput from '@material-ui/core/OutlinedInput';\n\nimport MenuItem from '@material-ui/core/MenuItem';\nimport FormControl from '@material-ui/core/FormControl';\nimport Select from '@material-ui/core/Select';\n\nexport default class DefaultConfig extends Component {\n\n\tstate = {\n\t\ttitle: '',\n\t\tdescription: '',\n\t\tvisibility: 'public'\n\t}\n\n\tcomponentWillMount () {\n\t\tlet share = this.props.share;\n\n\t\tshare != undefined && this.setState({\n\t\t\ttitle: share.title,\n\t\t\tdescription: share.description, \n\t\t\t... share.configuration\n\t\t})\n\t}\n\n\thandleClose () {\n\t\tthis.props.saveAndClose(undefined);\n\t}\n\n\thandleSave () {\n\t\tthis.props.saveAndClose({\n\t\t\ttitle: this.state.title,\n\t\t\tdescription: this.state.description,\n\t\t\tconfiguration: JSON.stringify(this.state),\n\t\t\timmediate: this.props.immediate\n\t\t})\n\t}\n\n\tupdateLocalField (field, event) {\n\t\tthis.setState({\n\t\t\t[field]:  event.target[event.target.hasOwnProperty('checked') ? 'checked' : 'value']\n\t\t});\n\t}\n\n\trenderWindow () {\n\t\treturn (\n\t\t\t<div className=\"form-container\">\n\t\t\t</div>\n\t\t);\n\t}\n\n\twordCount (field, max) {\n\t\tlet length = typeof field == 'string' ? field.length : 0;\n\n\t\treturn (\n\t\t\t<FormHelperText className=\"form-helper\">\n\t\t\t\t{ length + '/' + max }\n\t\t\t</FormHelperText>\n\t\t)\n\t}\n\n\trender () {\n\t\treturn (\n\t\t\t<Dialog open={ true } maxWidth={ 'xl' } fullWidth={ true } scroll=\"paper\">\n\t\t\t\t<DialogTitle>{ this.platformName }</DialogTitle>\n\n\t\t\t\t<DialogContent>\n\t\t\t\t\t{ this.renderWindow() }\n\t\t\t\t</DialogContent>\n\n\t\t\t\t<DialogActions>\n\t\t\t\t\t<Button onClick={ this.handleClose.bind(this) } color=\"secondary\">\n\t\t\t\t\t\tCancel\n\t\t\t\t\t</Button>\n\t\t\t\t\t<Button onClick={ this.handleSave.bind(this) } color=\"secondary\" autofocus>\n\t\t\t\t\t\t{ this.props.immediate ? 'Share Now' : 'Save' }\n\t\t\t\t\t</Button>\n\t\t\t\t</DialogActions>\n\t\t\t</Dialog>\n\t\t);\n\t}\n}","import React, { Component } from 'react';\nimport { withStyles } from '@material-ui/core/styles';\n\nimport Button from '@material-ui/core/Button';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport TextField from '@material-ui/core/TextField';\nimport FormHelperText from '@material-ui/core/FormHelperText';\nimport OutlinedInput from '@material-ui/core/OutlinedInput';\n\nimport MenuItem from '@material-ui/core/MenuItem';\nimport FormControl from '@material-ui/core/FormControl';\nimport Select from '@material-ui/core/Select';\n\nimport DefaultConfig from './Default';\n\nexport default class FacebookConfig extends DefaultConfig {\n\n\tplatformName = 'Facebook';\n\n\tstate = {\n\t\ttitle: '',\n\t\tdescription: '',\n\t\tvisibility: 'public'\n\t}\n\n\trenderWindow () {\n\t\treturn (\n\t\t\t<div className=\"form-container\">\n\t\t\t\t<div className=\"form-column\">\n\t\t\t\t\t<TextField\n\t\t\t\t\t\tfullWidth={ true }\n\t\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\t\thelperText={ this.wordCount(this.state.title, 100) }\n\t\t\t\t\t\trows={ 2 } rowsMax={ 2 }\n\t\t\t\t\t\tonChange={ this.updateLocalField.bind(this, 'title') }\n\t\t\t\t\t\tvalue={ this.state.title }\n\t\t\t\t\t\tlabel=\"Video Title (Optional)\" />\n\n\t\t\t\t\t<TextField\n\t\t\t\t\t\tmultiline\n\t\t\t\t\t\tfullWidth={ true }\n\t\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\t\thelperText={ this.wordCount(this.state.description, 5000) }\n\t\t\t\t\t\trows={ 10 } rowsMax={ 10 }\n\t\t\t\t\t\tonChange={ this.updateLocalField.bind(this, 'description') }\n\t\t\t\t\t\tvalue={ this.state.description }\n\t\t\t\t\t\tlabel=\"Post Content\" />\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n}","import React, { Component } from 'react';\nimport { withStyles } from '@material-ui/core/styles';\n\nimport Button from '@material-ui/core/Button';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport TextField from '@material-ui/core/TextField';\nimport FormHelperText from '@material-ui/core/FormHelperText';\nimport OutlinedInput from '@material-ui/core/OutlinedInput';\n\nimport MenuItem from '@material-ui/core/MenuItem';\nimport FormControl from '@material-ui/core/FormControl';\nimport Select from '@material-ui/core/Select';\n\nimport DefaultConfig from './Default';\n\nexport default class YouTubeConfig extends DefaultConfig {\n\n\tplatformName = 'YouTube';\n\n\tstate = {\n\t\ttitle: '',\n\t\tdescription: '',\n\t\tvisibility: 'public'\n\t}\n\n\trenderWindow () {\n\t\treturn (\n\t\t\t<div className=\"form-container\">\n\t\t\t\t<div className=\"form-column\">\n\t\t\t\t\t<TextField\n\t\t\t\t\t\tfullWidth={ true }\n\t\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\t\thelperText={ this.wordCount(this.state.title, 100) }\n\t\t\t\t\t\trows={ 2 } rowsMax={ 2 }\n\t\t\t\t\t\tonChange={ this.updateLocalField.bind(this, 'title') }\n\t\t\t\t\t\tvalue={ this.state.title }\n\t\t\t\t\t\tlabel=\"Title\" />\n\n\t\t\t\t\t<TextField\n\t\t\t\t\t\tmultiline\n\t\t\t\t\t\tfullWidth={ true }\n\t\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\t\thelperText={ this.wordCount(this.state.description, 5000) }\n\t\t\t\t\t\trows={ 10 } rowsMax={ 10 }\n\t\t\t\t\t\tonChange={ this.updateLocalField.bind(this, 'description') }\n\t\t\t\t\t\tvalue={ this.state.description }\n\t\t\t\t\t\tlabel=\"Video Description\" />\n\t\t\t\t</div>\n\t\t\t\t<div className=\"form-column\">\n\t\t\t\t\t<FormControl variant=\"outlined\" fullWidth={ true }>\n\t\t\t\t\t\t<Select\n\t\t\t\t\t\t\tfullWidth={ true }\n\t\t\t\t\t\t\tvalue={ this.state.visibility }\n\t\t\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\t\t\tonChange={ this.updateLocalField.bind(this, 'visibility') }\n\t\t\t\t\t\t\tinput={ <OutlinedInput fullWidth={ true } /> }>\n\t\t\t\t\t\t\t<MenuItem value=\"public\">Public</MenuItem>\n\t\t\t\t\t\t\t<MenuItem value=\"unlisted\">Unlisted</MenuItem>\n\t\t\t\t\t\t\t<MenuItem value=\"private\">Private</MenuItem>\n\t\t\t\t\t\t</Select>\n\t\t\t\t\t</FormControl>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n}","import React, { Component } from 'react';\nimport { withStyles } from '@material-ui/core/styles';\n\nimport Button from '@material-ui/core/Button';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport TextField from '@material-ui/core/TextField';\nimport FormHelperText from '@material-ui/core/FormHelperText';\nimport OutlinedInput from '@material-ui/core/OutlinedInput';\n\nimport MenuItem from '@material-ui/core/MenuItem';\nimport FormControl from '@material-ui/core/FormControl';\nimport Select from '@material-ui/core/Select';\n\nimport DefaultConfig from './Default';\n\nexport default class TwitterConfig extends DefaultConfig {\n\n\tplatformName = 'Twitter';\n\n\tstate = {\n\t\ttitle: '',\n\t\tdescription: '',\n\t\tvisibility: 'public'\n\t}\n\n\trenderWindow () {\n\t\treturn (\n\t\t\t<div className=\"form-container\">\n\t\t\t\t<div className=\"form-column\">\n\t\t\t\t\t<TextField\n\t\t\t\t\t\tmultiline\n\t\t\t\t\t\tfullWidth={ true }\n\t\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\t\thelperText={ this.wordCount(this.state.tweet, 280) }\n\t\t\t\t\t\trows={ 2 } rowsMax={ 10 }\n\t\t\t\t\t\tonChange={ this.updateLocalField.bind(this, 'tweet') }\n\t\t\t\t\t\tvalue={ this.state.tweet }\n\t\t\t\t\t\tlabel=\"Tweet\" />\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n}","import React, { Component } from 'react';\nimport { withStyles } from '@material-ui/core/styles';\n\nimport Button from '@material-ui/core/Button';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport TextField from '@material-ui/core/TextField';\nimport FormHelperText from '@material-ui/core/FormHelperText';\nimport OutlinedInput from '@material-ui/core/OutlinedInput';\n\nimport MenuItem from '@material-ui/core/MenuItem';\nimport FormControl from '@material-ui/core/FormControl';\nimport Select from '@material-ui/core/Select';\n\nimport DefaultConfig from './Default';\n\nexport default class InstagramConfig extends DefaultConfig {\n\n\tplatformName = 'Instagram';\n\n\tstate = {\n\t\ttitle: '',\n\t\tdescription: '',\n\t\tvisibility: 'public'\n\t}\n\n\trenderWindow () {\n\t\treturn (\n\t\t\t<div className=\"form-container\">\n\t\t\t\t<div className=\"form-column\">\n\t\t\t\t\t<TextField\n\t\t\t\t\t\tmultiline\n\t\t\t\t\t\tfullWidth={ true }\n\t\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\t\thelperText={ this.wordCount(this.state.description, 2200) }\n\t\t\t\t\t\trows={ 2 } rowsMax={ 10 }\n\t\t\t\t\t\tonChange={ this.updateLocalField.bind(this, 'description') }\n\t\t\t\t\t\tvalue={ this.state.description }\n\t\t\t\t\t\tlabel=\"Caption\" />\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n}","import React, { Component } from 'react';\nimport { withStyles } from '@material-ui/core/styles';\n\nimport Button from '@material-ui/core/Button';\nimport Card from '@material-ui/core/Card';\nimport CardActions from '@material-ui/core/CardActions';\nimport CardContent from '@material-ui/core/CardContent';\nimport Checkbox from '@material-ui/core/Checkbox';\nimport FormGroup from '@material-ui/core/FormGroup';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport IconButton from '@material-ui/core/IconButton';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport MenuList from '@material-ui/core/MenuList';\nimport Typography from '@material-ui/core/Typography';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\n\nimport FacebookConfig from './config/Facebook';\nimport YouTubeConfig from './config/YouTube';\nimport TwitterConfig from './config/Twitter';\nimport InstagramConfig from './config/Instagram';\n\nlet platformNames = {\n\tfacebook: 'Facebook',\n\ttwitter: 'Twitter',\n\tinstagram: 'Instagram',\n\tyoutube: 'YouTube'\n}\n\n\nclass EditVideoType extends Component {\n\n\tstate = {\n\t\tplatformConfig: {},\n\n\t\t// Contains a mapping of backend share IDs for each platform, allowing configurability. \n\t\tshare: {\n\t\t}\n\t}\n\n\tcomponentWillMount () {\n\n\t\tlet videoType = this.props.videoType;\n\n\t\t// Convert big platforms object into an array of platforms we have available for this video type. \n\t\tlet enabledProviders = Object.entries(this.props.enabledProviders).map((plat) => plat[1][videoType] ? plat[0] : null);\n\t\tenabledProviders = enabledProviders.filter((a) => a != null);\n\n\t\tthis.setState({\n\t\t\tenabledProviders: enabledProviders\n\t\t})\n\t}\n\n\tgetStyle () {\n\t\tlet styles = ['selectionCardContainer'], video = this.props.video;\n\n\t\tif (video != null && (video.queued || video.rendered)) {\n\t\t\tstyles.push('rendering');\n\t\t\tstyles.push('render-state-' + this.getRenderStateClass(video.id));\n\t\t}\n\n\t\treturn styles.join(' ');\n\t}\n\n\tgetRenderStateClass (videoID) {\n\t\tlet renderState = this.props.renderState;\n\n\t\tif (!renderState) {\n\t\t\treturn 'none';\n\t\t}\n\n\t\treturn renderState.status;\n\t}\n\n\tgetRenderProgressPC () {\n\t\tlet renderState = this.props.renderState;\n\n\t\tif (!renderState) {\n\t\t\treturn 0;\n\t\t}\n\n\t\treturn renderState.level;\n\t}\n\n\trenderRenderProgress (videoType) {\n\t\tlet renderState = this.props.renderState, video = this.props.video;\n\n\t\tif (video == null || (!video.queued && !video.rendered)) {\n\t\t\treturn null;\n\t\t}\n\n\t\treturn (\n\t\t\t<div className=\"rendering-progress\">\n\t\t\t\t<div\n\t\t\t\t\tclassName=\"rendering-progress-element\"\n\t\t\t\t\tstyle={{ width: this.getRenderProgressPC() + '%' }}>\n\t\t\t\t</div>\n\t\t\t\t<p>{ renderState ? renderState.state : 'N/A' }</p>\n\t\t\t</div>\n\t\t);\n\t}\n\n\treset () {\n\t\tif (!window.confirm('Really delete this rendered video?')) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.props.updateState({\n\t\t\ttarget: {\n\t\t\t\tvalue: false\n\t\t\t}\n\t\t});\n\t}\n\n\trenderPostOptions () {\n\t\tlet videoType = this.props.videoType;\n\n\t\treturn (\n\t\t\t<div>\n\t\t\t\t<CardContent>\n\t\t\t\t\t<div class=\"title-with-action-button\">\n\t\t\t\t\t\t<Typography variant=\"h5\" component=\"h2\">\n\t\t\t\t\t\t\t{ this.props.description }\n\t\t\t\t\t\t</Typography>\n\t\t\t\t\t\t<IconButton onClick={ this.props.downloadVideo.bind(this, videoType) }>\n\t\t\t\t\t\t\t<FontAwesomeIcon icon=\"download\" className=\"small-icon\" />\n\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t\t<IconButton onClick={ this.reset.bind(this) }>\n\t\t\t\t\t\t\t<FontAwesomeIcon icon=\"trash\" className=\"small-icon\" />\n\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<p>\n\t\t\t\t\t\tSend To Platforms\n\t\t\t\t\t</p>\n\n\t\t\t\t\t<MenuList fullWidth={ true } className=\"platform-menu-list\">\n\t\t\t\t\t{ this.getPlatforms().map((platform) => (\n\t\t\t\t\t\t<MenuItem onClick={ this.configurePlatform.bind(this, platform) }>\n\t\t\t\t\t\t\t<ListItemIcon>\n\t\t\t\t\t\t\t\t<FontAwesomeIcon prefix=\"fab\" icon={ platform.icon } />\n\t\t\t\t\t\t\t</ListItemIcon>\n\t\t\t\t\t\t\t<ListItemText primary={ platform.name } />\n\t\t\t\t\t\t</MenuItem>\n\t\t\t\t\t))}\n\t\t\t\t\t</MenuList>\n\n\t\t\t\t</CardContent>\n\t\t\t</div>\n\t\t);\n\t}\n\n\tfindShareForPlatform (platform) {\n\t\tlet video = this.props.video;\n\n\t\tif (!video) {\n\t\t\treturn null;\n\t\t}\n\n\t\tlet shares = video.shares;\n\t\tlet share = shares.find((share) => share.platform.id == platform.id);\n\n\t\treturn share;\n\t}\n\n\t// If a box is checked for the first time, open the configuration window for the platform\n\tupdatePlatform (platform, event) {\n\n\t\tif (!this.isPlatformEnabled(platform) && event.target.checked) {\n\t\t\treturn this.configurePlatform(platform);\n\t\t}\n\n\t\tlet videoType = this.props.videoType;\n\t\tthis.props.updatePlatform(platform, videoType, event.target.checked);\n\t}\n\n\t// Callback to specifically open a configuration window for a platform\n\tconfigurePlatform (platform) {\n\t\tthis.openSubView(platform.platform_type, this.findShareForPlatform(platform), platform);\n\t}\n\n\tsaveConfiguration (platform, data) {\n\t\tlet videoType = this.props.videoType;\n\t\tthis.props.updatePlatform(platform, videoType, true, data);\n\t}\n\n\topenSubView (view, argument, stateData) {\n\t\tthis.setState({\n\t\t\tsubview: view,\n\t\t\tsubviewArgument: argument,\n\t\t\tsubviewState: stateData\n\t\t})\n\t}\n\n\tcloseSubView (platform, saveData) {\n\t\tif (saveData != undefined) {\n\t\t\tthis.saveConfiguration(this.state.subviewState, saveData);\n\t\t}\n\n\t\tthis.setState({\n\t\t\tsubview: null\n\t\t})\n\t}\n\n\tgetPlatforms () {\n\t\treturn this.props.platforms.filter((a) => this.state.enabledProviders.indexOf(a.platform_type) > -1);\n\t}\n\n\tisPlatformEnabled (platformID) {\n\t\tif (!this.props.video) {\n\t\t\treturn;\n\t\t}\n\n\t\tfor (var i in this.props.video.shares) {\n\t\t\tlet share = this.props.video.shares[i];\n\t\t\tif (share.platform.id == platformID) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t}\n\n\tisVideoReady () {\n\t\tlet renderState = this.props.renderState, video = this.props.video;\n\t\treturn (renderState && renderState.status == 'completed') || (video && video.rendered == true);\n\t}\n\n\trenderBody () {\n\t\tlet videoType = this.props.videoType;\n\n\t\tif (this.isVideoReady()) {\n\t\t\treturn this.renderPostOptions();\n\t\t}\n\n\t\treturn (\n\t\t\t<div className=\"selectionCard\">\n\t\t\t\t{ this.renderRenderProgress() }\n\t\t\t\t<CardActions>\n\t\t\t\t\t<Checkbox\n\t\t\t\t\t\tchecked={ this.props.enabled }\n\t\t\t\t\t\tonChange={ this.props.updateState.bind(this) }\n\t\t\t\t\t\tcolor=\"primary\" />\n\t\t\t\t</CardActions>\n\t\t\t\t<CardContent>\n\t\t\t\t\t<Typography variant=\"h5\" component=\"h2\">\n\t\t\t\t\t\t{ this.props.description }\n\t\t\t\t\t\t&nbsp;&nbsp;\n\t\t\t\t\t\t<Button disabled={ !this.props.enabled } onClick={ this.props.openSubView.bind(this) }>\n\t\t\t\t\t\t\tEdit\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</Typography>\n\n\t\t\t\t\t<p>\n\t\t\t\t\t\tSelect platforms to share on\n\t\t\t\t\t</p>\n\n\t\t\t\t\t<FormGroup>\n\t\t\t\t\t\t{ this.getPlatforms().map((platform) => \n\t\t\t\t\t\t\t<FormControlLabel\n\t\t\t\t\t\t\t\tcontrol={\n\t\t\t\t\t\t\t\t\t<Checkbox\n\t\t\t\t\t\t\t\t\t\tdisabled={ !this.props.enabled }\n\t\t\t\t\t\t\t\t\t\tchecked={ this.isPlatformEnabled(platform.id) }\n\t\t\t\t\t\t\t\t\t\tonChange={ this.updatePlatform.bind(this, platform) } />\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tlabel={\n\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t<FontAwesomeIcon icon={ platform.icon } />\n\t\t\t\t\t\t\t\t\t\t&nbsp;&nbsp;\n\t\t\t\t\t\t\t\t\t\t{ platform.name }\n\t\t\t\t\t\t\t\t\t\t&nbsp;&nbsp;\n\t\t\t\t\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\t\t\t\t\t\tdisabled={ !this.props.enabled }\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={ this.configurePlatform.bind(this, platform) }>\n\t\t\t\t\t\t\t\t\t\t\t<FontAwesomeIcon icon=\"pencil-alt\" className=\"small-icon\" />\n\t\t\t\t\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t} />\n\t\t\t\t\t\t)}\n\t\t\t\t\t</FormGroup>\n\n\t\t\t\t</CardContent>\n\t\t\t</div>\n\t\t);\n\t}\n\n\trender () {\n\t\treturn (\n\t\t\t<Card className={ this.getStyle() }>\n\t\t\t\t{ this.renderDialog() }\n\t\t\t\t{ this.renderBody() }\n\t\t\t</Card>\n\t\t)\n\t}\n\n\trenderDialog () {\n\n\t\tlet props = {\n\t\t\tshare: this.state.subviewArgument,\n\t\t\tsaveAndClose: this.closeSubView.bind(this, this.state.subview),\n\t\t\timmediate: this.isVideoReady()\n\t\t}\n\n\t\tswitch (this.state.subview) {\n\t\t\tcase 'youtube':\n\t\t\t\treturn <YouTubeConfig {...props} />;\n\t\t\tcase 'facebook':\n\t\t\t\treturn <FacebookConfig {...props} />;\n\t\t\tcase 'twitter':\n\t\t\t\treturn <TwitterConfig {...props} />;\n\t\t\tcase 'instagram':\n\t\t\t\treturn <InstagramConfig {...props} />;\n\t\t\tdefault:\n\t\t\t\treturn null;\n\t\t}\n\t}\n}\n\nexport default EditVideoType;","import React, { Component } from 'react';\nimport { Link } from 'react-router-dom';\nimport { withStyles } from '@material-ui/core/styles';\nimport Button from '@material-ui/core/Button';\n\nimport AppBar from '@material-ui/core/AppBar';\nimport Card from '@material-ui/core/Card';\nimport CardActions from '@material-ui/core/CardActions';\nimport CardContent from '@material-ui/core/CardContent';\nimport Checkbox from '@material-ui/core/Checkbox';\nimport FormGroup from '@material-ui/core/FormGroup';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport IconButton from '@material-ui/core/IconButton';\nimport TextField from '@material-ui/core/TextField';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport Typography from '@material-ui/core/Typography';\n\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\n\nimport AirTower from '../network/AirTower';\n\nimport FrameComponent from '../frame/Frame';\nimport SlateComponent from '../slate/Slate';\n\nimport EditVideoType from './EditVideoType';\n\nimport TimelineComponent from '../components/Timeline';\nimport Video from '../components/Video';\nimport VideoControls from '../components/VideoControls';\n\nconst styles = theme => ({\n\tbutton: {\n\t\tmargin: theme.spacing.unit,\n\t},\n});\n\n\nclass Edit extends Component {\n\n\tstate = {\n\t\timportObj: null,\n\t\tcurrentTime: 0,\n\t\tlastSaveTime: 0,\n\t\tvideo: {\n\t\t\tplaying: false\n\t\t},\n\t\tslate: false,\n\t\tframe: false,\n\t\tvideoTitle: null,\n\t\tplatforms: {},\n\t\tplatformState: {},\n\t\tsubview: null,\n\t\trenderState: []\n\t}\n\n\tproviders = {\n\t\tyoutube: {\n\t\t\tslate: true,\n\t\t\tframe: false\n\t\t},\n\t\tfacebook: {\n\t\t\tslate: true,\n\t\t\tframe: true\n\t\t},\n\t\ttwitter: {\n\t\t\tslate: true,\n\t\t\tframe: true\n\t\t},\n\t\tinstagram: {\n\t\t\tslate: false,\n\t\t\tframe: true\n\t\t}\n\t}\n\n\tcomponentWillMount () {\n\t\tthis.loadImport();\n\t\tthis.loadRenderState();\n\t\tthis.loadPlatforms();\n\n\t\tthis.interval = setInterval(() => {\n\n\t\t\tif (!this.video) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (this.video.getTimecode() == 0) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (this.video.getTimecode() >= this.state.importObj.end_time) {\n\t\t\t\tthis.video.pause();\n\t\t\t\tthis.video.seekStart();\n\t\t\t}\n\n\t\t\tthis.setState({\n\t\t\t\tcurrentTime: this.video.getTimecode(),\n\t\t\t});\n\n\n\t\t}, 100);\n\t}\n\n\tcomponentWillUnmount () {\n\t\tclearInterval(this.interval);\n\t}\n\n\tgetServiceName () {\n\t\treturn 'video';\n\t}\n\n\tgetImportID () {\n\t\treturn this.props.match.params.id;\n\t}\n\n\tloadImport () {\n\t\tlet airTower = AirTower.getInstance();\n\t\tairTower.ingest.findImportByID(this.getServiceName(), this.getImportID())\n\t\t\t.then((importObj) => {\n\t\t\t\tthis.setState({\n\t\t\t\t\timportObj: importObj\n\t\t\t\t})\n\t\t\t})\n\n\t\tairTower.core.findImportByID(this.getImportID())\n\t\t\t.then((coreImportObj) => {\n\t\t\t\tthis.setState({\n\t\t\t\t\tcoreImportObj: coreImportObj,\n\t\t\t\t\tvideoTitle: coreImportObj.title\n\t\t\t\t}, () => this.checkForVideos());\n\t\t\t})\n\t\t\t.catch((error) => {\n\t\t\t\tconsole.log('error finding', error)\n\t\t\t\tairTower.core.takeOwnership(this.getServiceName(), this.getImportID(), this.state.videoTitle)\n\t\t\t\t\t.then((coreImportObj) => {\n\t\t\t\t\t\tthis.setState({\n\t\t\t\t\t\t\tcoreImportObj: coreImportObj\n\t\t\t\t\t\t}, () => this.checkForVideos());\n\t\t\t\t\t})\n\t\t\t})\n\t}\n\n\tloadPlatforms () {\n\t\tlet airTower = AirTower.getInstance();\n\t\tairTower.core.loadPlatforms()\n\t\t\t.then((platforms) => this.setState({ platforms }));\n\t}\n\n\tloadRenderState () {\n\t\tlet airTower = AirTower.getInstance();\n\n\t\tairTower.core.loadRenderState(this.getImportID())\n\t\t\t.then((renderState) => {\n\t\t\t\tthis.setState({\n\t\t\t\t\trenderState: renderState\n\t\t\t\t});\n\t\t\t\tif (renderState.length > 0) {\n\t\t\t\t\tsetTimeout(this.loadRenderState.bind(this), 5000);\n\t\t\t\t}\n\t\t\t});\n\t}\n\n\t// Based on what videos exist on the backend, check the relevant boxes to show that they exist. \n\tcheckForVideos () {\n\t\tlet videos = this.state.coreImportObj.videos;\n\n\t\tlet enabledState = {};\n\t\tfor (var i = 0; i < videos.length; i++) {\n\t\t\tenabledState[videos[i].type] = true;\n\t\t}\n\n\t\tthis.setState(enabledState);\n\t}\n\n\tgetEnabledVideoTypes () {\n\t\tlet types = ['default', 'slate', 'frame'];\n\t\treturn types.filter((a) => this.state[a] == true);\n\t}\n\n\tcheckAndCreateVideos () {\n\t\tlet required = this.getEnabledVideoTypes(); \n\t\tlet videos = this.state.coreImportObj.videos;\n\n\t\tlet airTower = AirTower.getInstance();\n\t\tfor (var i = 0; i < videos.length; i++) {\n\t\t\tif (required.includes(videos[i].type)) {\n\t\t\t\trequired = required.filter((a) => a != videos[i].type)\n\t\t\t} else {\n\t\t\t\t// no longer required, delete this!\n\t\t\t\tairTower.core.deleteVideoById(this.getImportID(), videos[i].id)\n\t\t\t\t\t.then((coreImportObj) => {\n\t\t\t\t\t\tthis.setState({\n\t\t\t\t\t\t\tcoreImportObj: coreImportObj\n\t\t\t\t\t\t})\n\t\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\tfor (var i = 0; i < required.length; i++) {\n\t\t\tairTower.core.createVideoByType(this.getImportID(), required[i])\n\t\t\t\t.then((coreImportObj) => this.setState({ coreImportObj }));\n\t\t}\n\t}\n\n\tfindVideoForType (type) {\n\t\treturn this.state.coreImportObj.videos.find((video) => video.type == type);\n\t}\n\n\tupdatePlatform (platform, videoType, enabled, configuration) {\n\t\t// if enabled, create platform for video type. otherwise, find it & delete it\n\t\tlet share = this.findShareForPlatformAndType(platform, videoType);\n\t\tlet video = this.findVideoForType(videoType);\n\t\tlet airTower = AirTower.getInstance();\n\n\t\tif (share) {\n\t\t\tif (!enabled) {\n\t\t\t\tairTower.core.deleteShare(this.getImportID(), video.id, share.id)\n\t\t\t\t\t.then((coreImportObj) => this.setState({ coreImportObj }))\n\t\t\t} else {\n\t\t\t\tairTower.core.updateShare(\n\t\t\t\t\tthis.getImportID(),\n\t\t\t\t\tvideo.id,\n\t\t\t\t\tshare.id,\n\t\t\t\t\tconfiguration.title,\n\t\t\t\t\tconfiguration.description,\n\t\t\t\t\tconfiguration.configuration\n\t\t\t\t)\n\t\t\t\t\t.then((coreImportObj) => this.setState({ coreImportObj }))\n\t\t\t\t\t.then(() => configuration.immediate && this.publishShare(video, share))\n\t\t\t}\n\t\t} else {\n\t\t\tif (enabled) {\n\t\t\t\tairTower.core.createShare(\n\t\t\t\t\tthis.getImportID(),\n\t\t\t\t\tvideo.id,\n\t\t\t\t\tplatform.id,\n\t\t\t\t\tconfiguration.title,\n\t\t\t\t\tconfiguration.description,\n\t\t\t\t\tconfiguration.configuration\n\t\t\t\t)\n\t\t\t\t\t.then((coreImportObj) => this.setState({ coreImportObj }))\n\t\t\t}\n\t\t}\n\t}\n\n\tpublishShare (video, share) {\n\t\tlet airTower = AirTower.getInstance();\n\t\tconsole.log('Publishing share', share);\n\t\tairTower.core.publishShare(this.getImportID(), video.id, share.id)\n\t\t\t.then((resp) => console.log(resp));\n\t}\n\n\tfindShareForPlatformAndType (platform, videoType) {\n\t\tlet video = this.findVideoForType(videoType);\n\n\t\tif (!video) {\n\t\t\treturn null;\n\t\t}\n\n\t\tlet shares = video.shares;\n\t\tlet share = shares.find((share) => share.platform.id == platform.id);\n\n\t\treturn share;\n\t}\n\n\tonTimelineUpdate (timecode) {\n\t\tthis.video.setTimecode(timecode);\n\t}\n\n\tsetVideo (video) {\n\t\tthis.video = video;\n\t}\n\n\tsetVideoState (state) {\n\t\tthis.setState({\n\t\t\tvideo: state\n\t\t});\n\t}\n\n\tgetVideoSRC () {\n\t\treturn this.state.importObj.getPreviewPath();\n\t}\n\n\tupdateLocalField (field, event, callback) {\n\t\tthis.setState({\n\t\t\t[field]:  event.target[event.target.hasOwnProperty('checked') ? 'checked' : 'value']\n\t\t}, () => (typeof callback == 'function' && callback()) || this.checkAndCreateVideos());\n\t}\n\n\tupdateLocalFieldAndSave (field, event) {\n\t\tthis.updateLocalField(field, event, () => {\n\t\t\tthis.rateLimitSave();\n\t\t\treturn this.checkAndCreateVideos();\n\t\t});\n\t}\n\n\topenSubView (url) {\n\t\tif (this.props.location.pathname.substr(-1, 1) == '/') {\n\t\t\tthis.props.history.replace(this.props.location.pathname + url)\n\t\t} else {\n\t\t\tthis.props.history.replace(this.props.location.pathname + '/' + url)\n\t\t}\n\t}\n\n\tcloseSubView (type, saveData) {\n\t\tif (saveData != undefined) {\n\t\t\tlet data = saveData();\n\t\t\tthis.saveConfiguration(type, data);\n\t\t}\n\n\t\tthis.props.history.replace(this.props.location.pathname + '/..');\n\t}\n\n\trateLimitSave () {\n\t\tif (this.saveTimer) {\n\t\t\treturn;\n\t\t}\n\t\tthis.saveTimer = setTimeout(this.save.bind(this), 500);\n\t}\n\n\tsave () {\n\t\tthis.saveTimer = null;\n\n\t\tlet airTower = AirTower.getInstance();\n\t\tairTower.core.takeOwnership(this.getServiceName(), this.getImportID(), this.state.videoTitle)\n\t\t/*\t.then((coreImportObj) => {\n\t\t\t\tcoreImportObj.set('title', this.state.videoTitle);\n\t\t\t\tthis.setState({\n\t\t\t\t\tcoreImportObj: this.state.coreImportObj\n\t\t\t\t});\n\t\t\t});*/\n\t}\n\n\tsendRender () {\n\t\tlet videosToSendForRender = this.getEnabledVideoTypes().map((type) => this.findVideoForType(type));\n\n\t\tvideosToSendForRender.forEach((video) => this.sendVideoForRender(video));\n\t}\n\n\tsendVideoForRender (video) {\n\t\tlet airTower = AirTower.getInstance();\n\t\tairTower.core.renderVideo(this.getImportID(), video.id)\n\t\t\t.then((coreImportObj) => {\n\t\t\t\tcoreImportObj.set('title', this.state.videoTitle);\n\t\t\t\tthis.setState({\n\t\t\t\t\tcoreImportObj: this.state.coreImportObj\n\t\t\t\t})\n\t\t\t\tthis.loadRenderState();\n\t\t\t});\n\t}\n\n\tdownloadRawVideo () {\n\t\twindow.open(this.state.importObj.getPreviewPath(), '_blank');\n\t}\n\n\tdownloadVideo (videoType) {\n\t\twindow.open(this.findVideoForType(videoType).getDownloadPath(), '_blank');\n\t}\n\n\t/**\n\t * For a child video, save its configuration\n\t */\n\tsaveConfiguration (type, data) {\n\t\tlet airTower = AirTower.getInstance();\n\t\tlet videoID = this.findVideoForType(type).id;\n\n\t\tairTower.core.updateVideo(this.getImportID(), videoID, data)\n\t\t\t.then((coreImportObj) => {\n\t\t\t\tthis.setState({\n\t\t\t\t\tcoreImportObj: coreImportObj\n\t\t\t\t})\n\t\t\t})\n\t}\n\n\tgetRenderState (videoType) {\n\t\tlet video = this.findVideoForType(videoType);\n\t\tif (!video) {\n\t\t\treturn null;\n\t\t}\n\t\treturn this.state.renderState.find((state) => state.video_id == video.id);\n\t}\n\n\t/**\n\t * Escape back to the main page\n\t */\n\thandleClose () {\n\t\tthis.props.history.push('/imports');\n\t}\n\t\n\trender () {\n\n\t\tif (!this.state.importObj || !this.state.coreImportObj) {\n\t\t\treturn (<b>loading</b>);\n\t\t}\n\n\t\tlet urlParamArgument = this.props.location.pathname.split('/').pop()\n\n\t\tswitch (urlParamArgument) {\n\t\t\tcase 'frame':\n\t\t\t\treturn <FrameComponent\n\t\t\t\t\timportObj={ this.state.importObj }\n\t\t\t\t\tcoreImportObj={ this.state.coreImportObj }\n\t\t\t\t\tpreviewSRC={ this.getVideoSRC() }\n\t\t\t\t\tinitialState={ this.findVideoForType('frame').configuration }\n\t\t\t\t\tsaveAndClose={ this.closeSubView.bind(this, 'frame') } />;\n\n\t\t\tcase 'slate':\n\t\t\t\treturn <SlateComponent\n\t\t\t\t\timportObj={ this.state.importObj }\n\t\t\t\t\tcoreImportObj={ this.state.coreImportObj }\n\t\t\t\t\tpreviewSRC={ this.getVideoSRC() }\n\t\t\t\t\tinitialState={ this.findVideoForType('slate').configuration }\n\t\t\t\t\tsaveAndClose={ this.closeSubView.bind(this, 'slate') } />;\n\n\t\t}\n\n\t\tlet trusted = true;\n\n\t\treturn (\n\n\t\t\t<div className=\"fullpage\">\n\t\t\t\t<div className=\"video-container\">\n\t\t\t\t\t<div className=\"video-player fit\">\n\t\t\t\t\t\t<div className=\"video-player-video-element\">\n\t\t\t\t\t\t\t<Video\n\t\t\t\t\t\t\t\tref={ (v) => this.setVideo(v) }\n\t\t\t\t\t\t\t\tonStateChange={ (state) => this.setVideoState(state) }\n\t\t\t\t\t\t\t\thls={ true }\n\t\t\t\t\t\t\t\tsrc={ this.getVideoSRC() }\n\t\t\t\t\t\t\t\tsegmentStart = { this.state.importObj.start_time }\n\t\t\t\t\t\t\t\tsegmentEnd = { this.state.importObj.end_time } />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<VideoControls video={ this.video } videoState={ this.state.video } />\n\n\t\t\t\t\t<div className=\"video-timeline\">\n\t\t\t\t\t\t\n\t\t\t\t\t\t<TimelineComponent\n\t\t\t\t\t\t\tstart={ this.state.importObj.start_time }\n\t\t\t\t\t\t\tend={ this.state.importObj.end_time }\n\t\t\t\t\t\t\toffset={ this.state.currentTime }\n\t\t\t\t\t\t\tonChange={ this.onTimelineUpdate.bind(this) }\n\t\t\t\t\t\t\tsegmentStart = { this.state.importObj.start_time }\n\t\t\t\t\t\t\tsegmentEnd = { this.state.importObj.end_time }\n\t\t\t\t\t\t\tautoUpdateViewport={ true }\n\t\t\t\t\t\t\treadOnly={ true }\n\t\t\t\t\t\t\tinitialOffset={ 0 } />\n\n\t\t\t\t\t</div>\n\n\t\t\t\t</div>\n\n\t\t\t\t<div className=\"video-side\">\n\t\t\t\t\t<div className=\"video-selector\">\n\t\t\t\t\t\t<AppBar position=\"static\">\n\t\t\t\t\t\t\t<Toolbar>\n\t\t\t\t\t\t\t\t<div style={{ flex: 1 }}>\n\t\t\t\t\t\t\t\t\t<TextField\n\t\t\t\t\t\t\t\t\t\tfullWidth={ true }\n\t\t\t\t\t\t\t\t\t\tplaceholder={ 'Untitled' }\n\t\t\t\t\t\t\t\t\t\tvalue={ this.state.videoTitle }\n\t\t\t\t\t\t\t\t\t\tonChange={ this.updateLocalFieldAndSave.bind(this, 'videoTitle') }\n\t\t\t\t\t\t\t\t\t\tmargin=\"normal\" />\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</Toolbar>\n\t\t\t\t\t\t</AppBar>\n\n\t\t\t\t\t\t<div className=\"side-content\">\n\n\t\t\t\t\t\t\t<Typography variant=\"h5\" component=\"h2\">\n\t\t\t\t\t\t\t\tTarget Platforms\n\t\t\t\t\t\t\t</Typography>\n\n\t\t\t\t\t\t\t{ [['slate', 'Linear Video'], ['frame', 'Square Video']].map((videoType) => \n\t\t\t\t\t\t\t\t<EditVideoType \n\t\t\t\t\t\t\t\t\tvideoType={ videoType[0] }\n\t\t\t\t\t\t\t\t\tdescription={ videoType[1] }\n\t\t\t\t\t\t\t\t\tplatforms={ this.state.platforms }\n\t\t\t\t\t\t\t\t\tenabledProviders={ this.providers }\n\t\t\t\t\t\t\t\t\tenabled={ this.state[videoType[0]] }\n\t\t\t\t\t\t\t\t\tupdatePlatform={ this.updatePlatform.bind(this) }\n\t\t\t\t\t\t\t\t\topenSubView={ this.openSubView.bind(this, videoType[0]) }\n\t\t\t\t\t\t\t\t\tupdateState={ this.updateLocalField.bind(this, videoType[0]) }\n\t\t\t\t\t\t\t\t\tdownloadVideo={ this.downloadVideo.bind(this, videoType[0]) }\n\t\t\t\t\t\t\t\t\trenderState={ this.getRenderState(videoType[0]) }\n\t\t\t\t\t\t\t\t\tvideo={ this.findVideoForType(videoType[0]) } />\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\tvariant=\"contained\"\n\t\t\t\t\t\t\t\t\tcolor=\"secondary\"\n\t\t\t\t\t\t\t\t\tfullWidth={ true }\n\t\t\t\t\t\t\t\t\tonClick={ this.sendRender.bind(this) }\n\t\t\t\t\t\t\t\t\tclassName=\"padded-button\">\n\t\t\t\t\t\t\t\tExport &amp; Share\n\t\t\t\t\t\t\t</Button>\n\n\t\t\t\t\t\t\t<p className=\"small-text\">Rendering may take a few minutes and is dependent on available server resources</p>\n\n\t\t\t\t\t\t\t<p className=\"small-text\">{ trusted ? \"Video will be immediately shared\" : \"Video will be sent for approval before it is shared\" }</p>\n\n\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\tvariant=\"contained\"\n\t\t\t\t\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\t\t\t\t\tfullWidth={ true }\n\t\t\t\t\t\t\t\t\tonClick={ this.downloadRawVideo.bind(this) }\n\t\t\t\t\t\t\t\t\tclassName=\"padded-button\">\n\t\t\t\t\t\t\t\tDownload Raw Video\n\t\t\t\t\t\t\t</Button>\n\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default withStyles(styles)(Edit);\n","import React, { Component } from 'react';\nimport { Redirect, Link } from 'react-router-dom';\nimport { withStyles } from '@material-ui/core/styles';\n\nconst styles = theme => ({\n\tbutton: {\n\t\tmargin: theme.spacing.unit,\n\t},\n});\n\n\nclass Home extends Component {\n\trender () {\n\t\treturn (<Redirect to=\"/import\" />);\n\t}\n}\n\nexport default withStyles(styles)(Home);\n","import React, { Component } from 'react';\nimport { withStyles } from '@material-ui/core/styles';\n\nimport AirTower from '../network/AirTower';\n\nimport VideoThumbnail from '../components/VideoThumbnail.jsx';\nimport VideoThumbnailContainer from '../components/VideoThumbnailContainer.jsx';\n\nimport Button from '@material-ui/core/Button';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport DialogActions from '@material-ui/core/DialogActions';\n\nimport Moment from 'moment';\n\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\n\nclass CuePointSelector extends Component {\n\n\tstate = {\n\t\tdialog: '',\n\t\tpoints: []\n\t}\n\n\tcomponentWillMount () {\n\t\tthis.loadCuePoints()\n\t}\n\n\tloadCuePoints () {\n\t\tlet airTower = AirTower.getInstance().ingest;\n\t\tairTower.loadCuePoints().then((points) => this.setState({ points }));\n\t}\n\n\thandleClose () {\n\t\tthis.props.onClose(undefined);\n\t}\n\n\thandleSelect (point) {\n\t\tthis.props.onClose(point)\n\t}\n\n\tformatTime (point) {\n\t\treturn this.formatHMS(new Date(point.start_time * 1000)) + \" - \" + this.formatHMS(new Date(point.end_time * 1000));\n\t}\n\n\tformatHMS (time) {\n\t\treturn time.toISOString().substr(11, 8);\n\t}\n\n\trender () {\n\t\treturn (\n\t\t\t<Dialog open={ true } maxWidth={ 'xl' } scroll=\"paper\">\n\t\t\t\t<DialogTitle>Select Video</DialogTitle>\n\n\t\t\t\t<DialogContent>\n\t\t\t\t\t<VideoThumbnailContainer>\n\n\t\t\t\t\t\t{ this.state.points.map((point) => (\n\t\t\t\t\t\t\t<VideoThumbnail\n\t\t\t\t\t\t\t\tthumbnail={ point.getThumbnailPath() }\n\t\t\t\t\t\t\t\ttitle={ this.formatTime(point) }\n\t\t\t\t\t\t\t\tonClick={ this.handleSelect.bind(this, point) } />\n\t\t\t\t\t\t))}\n\n\t\t\t\t\t</VideoThumbnailContainer>\n\t\t\t\t</DialogContent>\n\n\t\t\t\t<DialogActions>\n\t\t\t\t\t<Button onClick={ this.handleClose.bind(this) } color=\"secondary\">\n\t\t\t\t\t\tCancel\n\t\t\t\t\t</Button>\n\t\t\t\t</DialogActions>\n\t\t\t</Dialog>\n\t\t);\n\t}\n}\n\nexport default CuePointSelector;\n","import React, { Component } from 'react';\nimport { withStyles } from '@material-ui/core/styles';\n\nimport Button from '@material-ui/core/Button';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport DialogActions from '@material-ui/core/DialogActions';\n\nimport {DateFormatInput, TimeFormatInput} from 'material-ui-next-pickers'\n\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\n\nclass TimeSelector extends Component {\n\n\tstate = {\n\t\tdate: null,\n\t\ttime: null\n\t}\n\n\tcomponentWillMount () {\n\t\tthis.setState({\n\t\t\tdate: new Date(this.props.initial),\n\t\t\ttime: new Date(this.props.initial)\n\t\t})\n\t}\n\n\tchange (value, time) {\n\t\tthis.setState({\n\t\t\t[value]: time\n\t\t})\n\t}\n\n\thandleClose () {\n\t\tthis.props.onClose(undefined);\n\t}\n\n\thandleSelect () {\n\t\tthis.props.onClose(this.getTime());\n\t}\n\n\tgetTime () {\n\t\tlet date = new Date(this.state.date.getTime());\n\n\t\tdate.setHours(this.state.time.getHours())\n\t\tdate.setMinutes(this.state.time.getMinutes())\n\t\tdate.setSeconds(this.state.time.getSeconds())\n\t\tdate.setMilliseconds(this.state.time.getMilliseconds())\n\n\t\treturn date;\n\t}\n\n\trender () {\n\t\treturn (\n\t\t\t<Dialog open={ true } maxWidth={ 'xl' } scroll=\"paper\">\n\t\t\t\t<DialogTitle>Select Time</DialogTitle>\n\n\t\t\t\t<DialogContent style={{ minWidth: '300px', minHeight: '300px'}}>\n\t\t\t\t\t<DateFormatInput\n\t\t\t\t\t\tvalue={this.state.date}\n\t\t\t\t\t\tonChange={this.change.bind(this, 'date')} />\n\t\t\t\t\t<TimeFormatInput\n\t\t\t\t\t\tvalue={this.state.time}\n\t\t\t\t\t\tonChange={this.change.bind(this, 'time')} />\n\t\t\t\t</DialogContent>\n\n\t\t\t\t<DialogActions>\n\t\t\t\t\t<Button onClick={ this.handleClose.bind(this) } color=\"secondary\">\n\t\t\t\t\t\tCancel\n\t\t\t\t\t</Button>\n\t\t\t\t\t<Button onClick={ this.handleSelect.bind(this) } color=\"secondary\">\n\t\t\t\t\t\tGo\n\t\t\t\t\t</Button>\n\t\t\t\t</DialogActions>\n\t\t\t</Dialog>\n\t\t);\n\t}\n}\n\nexport default TimeSelector;\n","import React, { Component } from 'react';\n\nimport AirTower from '../network/AirTower';\n\nimport AbsoluteTimePicker from '../components/AbsoluteTimePicker';\nimport CuePointSelector from './CuePointSelector';\nimport Video from '../components/Video';\nimport VideoControls from '../components/VideoControls';\nimport TimeSelector from './TimeSelector';\nimport TimelineComponent from '../components/Timeline';\n\nimport { withStyles } from '@material-ui/core/styles';\nimport Button from '@material-ui/core/Button';\n\nimport AppBar from '@material-ui/core/AppBar';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport IconButton from '@material-ui/core/IconButton';\n\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\n\nconst styles = theme => ({\n\tbutton: {\n\t\tmargin: theme.spacing.unit,\n\t},\n});\n\n\nclass Import extends Component {\n\n\tstate = {\n\t\tcurrentTime: 0,\n\t\tready: false,\n\t\tvideo: {\n\t\t\tplaying: false\n\t\t},\n\n\t\tdialog: null,\n\t\tsegmentStart: -1,\n\t\tsegmentEnd: -1\n\t}\n\n\tcomponentWillMount () {\n\n\t\tlet topOfHour = (Date.now() / 1000 | 0); topOfHour = topOfHour - (topOfHour % 3600);\n\n\t\tthis.start = topOfHour - 3600*5;\n\n\t\tthis.interval = setInterval(() => {\n\n\t\t\tif (!this.video) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (this.video.getTimecode() == 0) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tlet ready = this.state.ready\n\n\t\t\tthis.setState({\n\t\t\t\tcurrentTime: this.video.getTimecode(),\n\t\t\t\tcurrentEdge: this.video.getEdgeTimecode(),\n\t\t\t\tready: true\n\t\t\t}, () => ready || this.videoLoaded())\n\n\t\t}, 100);\n\n\t}\n\n\tcomponentWillUnmount () {\n\t\tclearInterval(this.interval);\n\t}\n\n\tgetServiceName () {\n\t\treturn 'video';\n\t}\n\n\t// videoLoaded is called when the video has loaded sufficiently that we can begin\n\tvideoLoaded () {\n\t\tthis.setState({\n\t\t\tsegmentStart: (Date.now() / 1000 | 0) - 660,\n\t\t\tsegmentEnd: (Date.now() / 1000 | 0) - 60\n\t\t})\n\t}\n\n\tsetVideo (video) {\n\t\tthis.video = video;\n\t}\n\n\tonTimelineUpdate (timecode) {\n\t\tthis.video.setTimecode(timecode);\n\t}\n\n\tsetVideoState (state) {\n\t\tthis.setState({\n\t\t\tvideo: state\n\t\t})\n\t}\n\n\tsetSegmentStart (value) {\n\n\t\tconsole.log('request set segment start', value)\n\n\t\tlet segmentEnd = this.state.segmentEnd;\n\n\t\tif (segmentEnd <= value) {\n\t\t\tsegmentEnd = value + 30;\n\t\t}\n\n\t\tthis.setState({\n\t\t\tsegmentStart: value,\n\t\t\tsegmentEnd: segmentEnd\n\t\t})\n\n\t}\n\n\tsetSegmentEnd (value) {\n\n\t\tlet segmentStart = this.state.segmentStart;\n\n\t\tif (segmentStart >= value) {\n\t\t\tsegmentStart = value - 30;\n\t\t}\n\n\t\tthis.setState({\n\t\t\tsegmentStart: segmentStart,\n\t\t\tsegmentEnd: value\n\t\t})\n\n\t}\n\n\tserialize () {\n\t\treturn {\n\t\t\tname: this.state.name,\n\t\t\tstartTime: this.state.segmentStart,\n\t\t\tendTime: this.state.segmentEnd\n\t\t}\n\t}\n\n\t/**\n\t * Import the selected video and return a promise that resolves once complete.\n\t */\n\timportVideo () {\n\t\tlet data = this.serialize();\n\t\tlet airTower = AirTower.getInstance();\n\n\t\treturn airTower.ingest.importVideo(this.getServiceName(), data.startTime, data.endTime);\n\t}\n\n\t/**\n\t * Imports video and, upon completion, redirects to the homepage\n\t */\n\tsaveForLater () {\n\t\tthis.importVideo()\n\t\t\t.then((importObj) => {\n\t\t\t\tconsole.log('IMPORT OBJECT', importObj)\n\t\t\t});\n\t}\n\n\t/**\n\t * Imports video and, upon completion, redirects to the editor\n\t */\n\tsaveAndAdvance () {\n\t\tthis.importVideo()\n\t\t\t.then((importObj) => {\n\t\t\t\tconsole.log('IMPORT OBJECT 2', importObj)\n\t\t\t\tthis.props.history.push('/import/' + importObj.uuid + '/edit');\n\t\t\t});\n\t}\n\n\t/**\n\t * Quickly download video between two specified times. \n\t * This call is deferred to the backend! \n\t */\n\tquickDownload () {\n\t\twindow.open('/api/ingest/'\n\t\t\t+ this.getServiceName()\n\t\t\t+ '/download.mp4?start_time='\n\t\t\t+ this.state.segmentStart\n\t\t\t+ '&end_time=' + this.state.segmentEnd,\n\t\t\t'_blank')\n\t}\n\n\t/**\n\t * Escape back to the main page\n\t */\n\thandleClose () {\n\t\tthis.props.history.push('/');\n\t}\n\n\tselectCuePoint (type) {\n\t\tthis.setState({\n\t\t\tdialog: 'cue_point',\n\t\t\tdialogArg: 'cue_point'\n\t\t})\n\t}\n\n\tselectTime (type) {\n\t\tthis.setState({\n\t\t\tdialog: 'time',\n\t\t\tdialogArg: 'time'\n\t\t})\n\t}\n\n\tcloseSlateView (saveData) {\n\t\tif (saveData != undefined && this.state.dialog == 'cue_point') {\n\t\t\tthis.setState({\n\t\t\t\tsegmentStart: saveData.start_time,\n\t\t\t\tsegmentEnd: saveData.end_time\n\t\t\t}, () => {\n\t\t\t\tthis.video.seekStart();\n\t\t\t})\n\t\t}\n\t\tif (saveData != undefined && this.state.dialog == 'time') {\n\t\t\tthis.setState({\n\t\t\t\tsegmentStart: saveData / 1000 | 0,\n\t\t\t\tsegmentEnd: (saveData / 1000 | 0) + 30\n\t\t\t}, () => {\n\t\t\t\tthis.video.seekStart();\n\t\t\t})\n\t\t}\n\t\tthis.setState({\n\t\t\tdialog: null\n\t\t})\n\t}\n\n\trender () {\n\t\treturn (\n\n\t\t\t<div className=\"fullpage\">\n\n\t\t\t\t<div className=\"video-container\">\n\n\t\t\t\t\t<div className=\"video-player fit\">\n\t\t\t\t\t\t<div className=\"video-player-video-element\">\n\t\t\t\t\t\t\t<Video\n\t\t\t\t\t\t\t\tref={ (v) => this.setVideo(v) }\n\t\t\t\t\t\t\t\tonStateChange={ (state) => this.setVideoState(state) }\n\t\t\t\t\t\t\t\thls={ true }\n\t\t\t\t\t\t\t\tsrc={ \"/api/ingest/\" + this.getServiceName() + \"/preview.m3u8?start_time=1545354123&end_time=99999999999\" }\n\t\t\t\t\t\t\t\tsegmentStart = { this.state.segmentStart }\n\t\t\t\t\t\t\t\tsegmentEnd = { this.state.segmentEnd } />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<VideoControls video={ this.video } videoState={ this.state.video } />\n\n\t\t\t\t\t<div className=\"video-timeline\">\n\t\t\t\t\t\t\n\t\t\t\t\t\t<TimelineComponent\n\t\t\t\t\t\t\tstart={ this.start }\n\t\t\t\t\t\t\tend={ this.state.currentEdge }\n\t\t\t\t\t\t\toffset={ this.state.currentTime }\n\t\t\t\t\t\t\tonChange={ this.onTimelineUpdate.bind(this) }\n\t\t\t\t\t\t\tsegmentStart = { this.state.segmentStart }\n\t\t\t\t\t\t\tsegmentEnd = { this.state.segmentEnd }\n\n\t\t\t\t\t\t\tautoUpdateViewport={ true || this.state.video.playing }\n\n\t\t\t\t\t\t\tonSegmentStart={ this.setSegmentStart.bind(this) }\n\t\t\t\t\t\t\tonSegmentEnd={ this.setSegmentEnd.bind(this) }\n\t\t\t\t\t\t\tinitialOffset={ 0 } />\n\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t\t<div className=\"video-side\">\n\t\t\t\t\t<div className=\"video-selector\">\n\n\t\t\t\t\t\t<AppBar position=\"static\">\n\t\t\t\t\t\t\t<Toolbar>\n\t\t\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\t\t\t\tcolor=\"inherit\"\n\t\t\t\t\t\t\t\t\t\taria-label=\"Save For Later\"\n\t\t\t\t\t\t\t\t\t\tonClick={ this.handleClose.bind(this) } >\n\t\t\t\t\t\t\t\t\t<FontAwesomeIcon icon=\"long-arrow-alt-left\" />\n\t\t\t\t\t\t\t\t</IconButton>\n\n\t\t\t\t\t\t\t\t<div style={{ flex: 1 }}></div>\n\t\t\t\t\t\t\t</Toolbar>\n\t\t\t\t\t\t</AppBar>\n\n\t\t\t\t\t\t<div className=\"side-content import-wizard\">\n\n\t\t\t\t\t\t\t<h1>Import Wizard.</h1>\n\n\t\t\t\t\t\t\t<h3>1. Find Content</h3>\n\n\t\t\t\t\t\t\t<div class=\"row\">\n\t\t\t\t\t\t\t\t<Button \n\t\t\t\t\t\t\t\t\t\tvariant=\"contained\"\n\t\t\t\t\t\t\t\t\t\tcolor=\"secondary\"\n\t\t\t\t\t\t\t\t\t\tfullWidth={ true }\n\t\t\t\t\t\t\t\t\t\tonClick={ this.selectTime.bind(this) }>\n\t\t\t\t\t\t\t\t\t<FontAwesomeIcon icon=\"stopwatch\" />&nbsp;Search By Time\n\t\t\t\t\t\t\t\t</Button>\n\n\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\tvariant=\"contained\"\n\t\t\t\t\t\t\t\t\t\tcolor=\"secondary\"\n\t\t\t\t\t\t\t\t\t\tfullWidth={ true }\n\t\t\t\t\t\t\t\t\t\tonClick={ this.selectCuePoint.bind(this) }>\n\t\t\t\t\t\t\t\t\t<FontAwesomeIcon icon=\"file-video\" />&nbsp;Search By Clip\n\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t<br /><br />\n\n\t\t\t\t\t\t\t<h3>2. Fine Tune</h3>\n\n\t\t\t\t\t\t\t<AbsoluteTimePicker\n\t\t\t\t\t\t\t\tlabel=\"Start\"\n\t\t\t\t\t\t\t\tvideo={ this.video }\n\t\t\t\t\t\t\t\tonChange={ this.setSegmentStart.bind(this) }\n\t\t\t\t\t\t\t\tvalue={ this.state.segmentStart } />\n\n\t\t\t\t\t\t\t<AbsoluteTimePicker\n\t\t\t\t\t\t\t\tlabel=\"End\"\n\t\t\t\t\t\t\t\tvideo={ this.video }\n\t\t\t\t\t\t\t\tonChange={ this.setSegmentEnd.bind(this) }\n\t\t\t\t\t\t\t\tvalue={ this.state.segmentEnd } />\n\n\t\t\t\t\t\t\t<br /><br />\n\n\t\t\t\t\t\t\t<h3>3. Import</h3>\n\n\t\t\t\t\t\t\t<div class=\"row\">\n\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\tvariant=\"contained\"\n\t\t\t\t\t\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\t\t\t\t\t\tfullWidth={ true }\n\t\t\t\t\t\t\t\t\t\tclassName=\"padded-button\"\n\t\t\t\t\t\t\t\t\t\tonClick={ this.saveForLater.bind(this) }>\n\t\t\t\t\t\t\t\t\tSave For Later\n\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\tvariant=\"contained\"\n\t\t\t\t\t\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\t\t\t\t\t\tfullWidth={ true }\n\t\t\t\t\t\t\t\t\t\tclassName=\"padded-button\"\n\t\t\t\t\t\t\t\t\t\tonClick={ this.quickDownload.bind(this) }>\n\t\t\t\t\t\t\t\t\tQuick Download\n\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\tvariant=\"contained\"\n\t\t\t\t\t\t\t\t\tcolor=\"secondary\"\n\t\t\t\t\t\t\t\t\tfullWidth={ true }\n\t\t\t\t\t\t\t\t\tclassName=\"padded-button\"\n\t\t\t\t\t\t\t\t\tonClick={ this.saveAndAdvance.bind(this) }>\n\t\t\t\t\t\t\t\tNext: Edit Video\n\t\t\t\t\t\t\t</Button>\n\n\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t\t{ this.state.dialog == 'cue_point' && (\n\t\t\t\t\t<CuePointSelector onClose={ this.closeSlateView.bind(this) } /> \n\t\t\t\t)}\n\n\t\t\t\t{ this.state.dialog == 'time' && (\n\t\t\t\t\t<TimeSelector initial={ this.state.currentTime * 1000 } onClose={ this.closeSlateView.bind(this) } /> \n\t\t\t\t)}\n\t\t\t</div>\n\n\t\t);\n\t}\n}\n\nexport default withStyles(styles)(Import);\n","import React, { Component } from 'react';\nimport { Link } from 'react-router-dom';\nimport { withStyles } from '@material-ui/core/styles';\n\nimport AppBar from '@material-ui/core/AppBar';\nimport Button from '@material-ui/core/Button';\nimport IconButton from '@material-ui/core/IconButton';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport Typography from '@material-ui/core/Typography';\n\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\n\nimport AirTower from '../network/AirTower';\n\nimport VideoThumbnail from '../components/VideoThumbnail.jsx';\nimport VideoThumbnailContainer from '../components/VideoThumbnailContainer.jsx';\n\nconst styles = theme => ({\n\tbutton: {\n\t\tmargin: theme.spacing.unit,\n\t},\n});\n\n\nclass Imports extends Component {\n\n\tstate = {\n\t\timports: [],\n\t\tcoreImports: [],\n\t\tqueue: 2\n\t}\n\n\tcomponentWillMount () {\n\t\tthis.loadImports()\n\t}\n\n\tgetServiceName () {\n\t\treturn 'video';\n\t}\n\n\tloadImports () {\n\t\tlet airTower = AirTower.getInstance();\n\t\tairTower.ingest.findImports(this.getServiceName())\n\t\t\t.then((imports) => {\n\t\t\t\timports = imports.sort((a, b) => a.end_time < b.end_time);\n\t\t\t\tthis.setState({\n\t\t\t\t\timports: imports,\n\t\t\t\t\tqueue: this.state.queue - 1\n\t\t\t\t}, () => this.recoverMissing())\n\t\t\t});\n\n\t\tairTower.core.loadImports()\n\t\t\t.then((coreImports) => {\n\t\t\t\tthis.setState({\n\t\t\t\t\tcoreImports: coreImports,\n\t\t\t\t\tqueue: this.state.queue - 1\n\t\t\t\t}, () => this.recoverMissing())\n\t\t\t});\n\t}\n\n\tfindCoreImport (importObj) {\n\t\tlet coreImport = this.state.coreImports.find((coreImp) => coreImp.uuid == importObj.uuid);\n\n\t\treturn coreImport || {};\n\t}\n\n\trecoverMissing () {\n\t\t// Wait for all promises to resolve. \n\t\tif (this.state.queue != 0) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.state.imports.forEach((importObj) => {\n\t\t\tlet coreImport = this.state.coreImports.find((coreImp) => coreImp && coreImp.uuid == importObj.uuid);\n\n\t\t\tif (!coreImport) {\n\t\t\t\tthis.createCoreImport(importObj);\n\t\t\t}\n\t\t})\n\t}\n\n\tcreateCoreImport (importObj) {\n\t\tlet airTower = AirTower.getInstance();\n\t\tairTower.core.takeOwnership(importObj.service_name, importObj.uuid, '')\n\t\t\t.then((coreImportObj) => {\n\t\t\t\t// Add the new import object into the array! :-) \n\t\t\t\tlet newCoreImports = this.state.coreImports.slice(0);\n\t\t\t\tnewCoreImports.push(coreImportObj);\n\n\t\t\t\tthis.setState({\n\t\t\t\t\tcoreImports: newCoreImports\n\t\t\t\t});\n\t\t\t})\n\t}\n\n\thandleSelect (importObj) {\n\t\tthis.props.history.push('/import/' + importObj.uuid + '/edit');\n\t}\n\n\topenNew () {\n\n\t}\n\n\t/**\n\t * Escape back to the main page\n\t */\n\thandleClose () {\n\t\tthis.props.history.push('/');\n\t}\n\n\trender () {\n\t\treturn (\n\n\t\t\t<div class=\"fullpage home imports\">\n\n\t\t\t\t<div class=\"main-navigation\">\n\n\t\t\t\t\t<VideoThumbnailContainer>\n\t\t\t\t\t\t{ this.state.imports.map((importObj) => (\n\t\t\t\t\t\t\t<VideoThumbnail\n\t\t\t\t\t\t\t\tthumbnail={ importObj.getThumbnailPath() }\n\t\t\t\t\t\t\t\ttitle={ this.findCoreImport(importObj).title }\n\t\t\t\t\t\t\t\tonClick={ this.handleSelect.bind(this, importObj) } />\n\t\t\t\t\t\t))}\n\t\t\t\t\t</VideoThumbnailContainer>\n\n\t\t\t\t</div>\n\n\t\t\t</div>\n\n\t\t);\n\t}\n}\n\nexport default withStyles(styles)(Imports);\n","import React, { Component } from 'react';\n\nexport default class Preload extends Component {\n\trender () {\n\t\treturn (\n\t\t\t<div class=\"fullpage home\">\n\t\t\t\ti am loading\n\t\t\t</div>\n\t\t);\n\t}\n}\n\n","import React, { Component } from 'react';\nimport { Router, Route, Switch } from 'react-router';\nimport { BrowserRouter } from 'react-router-dom';\n\nexport default class Header extends Component {\n\trender () {\n\t\treturn (\n\t\t\t<div className=\"header\">\n\t\t\t\ttest\n\t\t\t</div>\n\t\t);\n\t}\n}","import React, { Component } from 'react';\nimport { Router, Route, Switch } from 'react-router';\nimport { BrowserRouter, Link } from 'react-router-dom';\nimport classNames from 'classnames';\n\nimport { withStyles } from '@material-ui/core/styles';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport Divider from '@material-ui/core/Divider';\nimport Drawer from '@material-ui/core/Drawer';\nimport IconButton from '@material-ui/core/IconButton';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItemText from '@material-ui/core/ListItemText';\n\nimport ChevronLeftIcon from '@material-ui/icons/ChevronLeft';\nimport HomeIcon from '@material-ui/icons/Home';\nimport MenuIcon from '@material-ui/icons/Menu';\nimport PublicIcon from '@material-ui/icons/Public';\nimport QueuePlayNextIcon from '@material-ui/icons/QueuePlayNext';\nimport VideoLibraryIcon from '@material-ui/icons/VideoLibrary';\n\nconst drawerWidth = 240;\n\nconst styles = (theme) => ({\n\tdrawerBase: {\n\t\twidth: drawerWidth,\n\t\tflexShrink: 0,\n\t\twhiteSpace: 'nowrap'\n\t},\n\tdrawerOpen: {\n\t\toverflowX: 'hidden',\n\t\twidth: drawerWidth,\n\t\ttransition: theme.transitions.create('width', {\n\t\t\teasing: theme.transitions.easing.sharp,\n\t\t\tduration: theme.transitions.duration.enteringScreen\n\t\t})\n\t},\n\tdrawerClose: {\n\t\toverflowX: 'hidden',\n\t\twidth: theme.spacing.unit * 7 + 1,\n\t\t[theme.breakpoints.up('sm')]: {\n\t\t\twidth: theme.spacing.unit * 8 + 7,\n\t\t},\n\t\ttransition: theme.transitions.create('width', {\n\t\t\teasing: theme.transitions.easing.sharp,\n\t\t\tduration: theme.transitions.duration.leavingScreen\n\t\t})\n\t},\n\tmenu: {\n\t\tpaddingTop: 0\n\t},\n\n\tuserBox: {\n\t\theight: '0px',\n\t\toverflowY: 'hidden',\n\t\topacity: 0,\n\t\tvisibility: 'hidden',\n\t\ttransition: theme.transitions.create('height', {\n\t\t\teasing: theme.transitions.easing.sharp,\n\t\t\tduration: theme.transitions.duration.leavingScreen\n\t\t})\n\t},\n\tuserBoxVisible: {\n\t\theight: '100px',\n\t\topacity: 1,\n\t\tvisibility: 'visible'\n\t},\n\n\thideState: {\n\t\topacity: '0',\n\t\ttransition: theme.transitions.create('opacity', {\n\t\t\teasing: theme.transitions.easing.sharp,\n\t\t\tduration: theme.transitions.duration.leavingScreen\n\t\t})\n\t},\n\tshowState: {\n\t\topacity: '1'\n\t}\n})\n\nclass Navigation extends Component {\n\n\tstate = {\n\t\topen: false\n\t}\n\n\ttoggle () {\n\t\tthis.setState({\n\t\t\topen: !this.state.open \n\t\t}, () => {\n\t\t\tsetTimeout(() => {\n\t\t\t\twindow.dispatchEvent(new Event('resize'));\n\t\t\t}, 295);\n\t\t})\n\t}\n\n\tclose () {\n\t\tthis.setState({\n\t\t\topen: false\n\t\t}, () => {\n\t\t\tsetTimeout(() => {\n\t\t\t\twindow.dispatchEvent(new Event('resize'));\n\t\t\t}, 295);\n\t\t})\n\t}\n\n\trender () {\n\t\tconst { classes } = this.props;\n\n\t\tconst drawerClasses = classNames(classes.drawerBase, {\n\t\t\t[classes.drawerOpen]: this.state.open,\n\t\t\t[classes.drawerClose]: !this.state.open,\n\t\t})\n\n\t\tconst userBoxClasses = classNames(classes.userBox, {\n\t\t\t[classes.userBoxVisible]: this.state.open\n\t\t})\n\n\t\tconst hideOnOpen = classNames({\n\t\t\t[classes.hideState]: this.state.open,\n\t\t\t[classes.showState]: !this.state.open\n\t\t})\n\n\t\treturn (\n\t\t\t<Drawer open={ this.state.open } anchor=\"left\" variant=\"permanent\" className={ drawerClasses } classes={{ paper: drawerClasses }}>\n\t\t\t\t<List className={ classes.menu }>\n\t\t\t\t\t<ListItem button={ !this.state.open } onClick={ this.toggle.bind(this) }>\n\t\t\t\t\t\t<ListItemIcon>\n\t\t\t\t\t\t\t<MenuIcon className={ hideOnOpen } />\n\t\t\t\t\t\t</ListItemIcon>\n\t\t\t\t\t\t<ListItemText primary={\"\"} />\n\t\t\t\t\t\t<IconButton>\n\t\t\t\t\t\t\t<ChevronLeftIcon />\n\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t</ListItem>\n\n\t\t\t\t\t<div className={ userBoxClasses }>\n\t\t\t\t\t\t{ '{ user.name }' }\n\t\t\t\t\t</div>\n\t\t\t\t\t<Divider />\n\n\t\t\t\t\t<ListItem component={ Link } button to=\"/\" onClick={ this.close.bind(this) }>\n\t\t\t\t\t\t<ListItemIcon>\n\t\t\t\t\t\t\t<HomeIcon />\n\t\t\t\t\t\t</ListItemIcon>\n\t\t\t\t\t\t<ListItemText primary=\"Home\" />\n\t\t\t\t\t</ListItem>\n\n\t\t\t\t\t<ListItem component={ Link } button to=\"/import\" onClick={ this.close.bind(this) }>\n\t\t\t\t\t\t<ListItemIcon>\n\t\t\t\t\t\t\t<QueuePlayNextIcon />\n\t\t\t\t\t\t</ListItemIcon>\n\t\t\t\t\t\t<ListItemText primary=\"New Import\" />\n\t\t\t\t\t</ListItem>\n\n\t\t\t\t\t<ListItem component={ Link } button to=\"/imports\" onClick={ this.close.bind(this) }>\n\t\t\t\t\t\t<ListItemIcon>\n\t\t\t\t\t\t\t<VideoLibraryIcon />\n\t\t\t\t\t\t</ListItemIcon>\n\t\t\t\t\t\t<ListItemText primary=\"Import Library\" />\n\t\t\t\t\t</ListItem>\n\n\t\t\t\t\t<ListItem component={ Link } button to=\"/config\" onClick={ this.close.bind(this) }>\n\t\t\t\t\t\t<ListItemIcon>\n\t\t\t\t\t\t\t<PublicIcon />\n\t\t\t\t\t\t</ListItemIcon>\n\t\t\t\t\t\t<ListItemText primary=\"Platform Settings\" />\n\t\t\t\t\t</ListItem>\n\n\t\t\t\t</List>\n\t\t\t</Drawer>\n\t\t);\n\t}\n}\n\nexport default withStyles(styles, { withTheme: true })(Navigation);","import React, { Component } from 'react';\nimport { Router, Route, Switch } from 'react-router';\nimport { BrowserRouter } from 'react-router-dom';\n\nimport './App.css';\nimport logo from './logo.svg';\n\nimport AirTower from './network/AirTower';\n\nimport ConfigComponent from './config/Config';\nimport CreatePlatformComponent from './config/CreatePlatform';\nimport EditPlatformComponent from './config/EditPlatform';\n\nimport EditComponent from './edit/Edit';\nimport HomeComponent from './home/Home';\nimport ImportComponent from './import/Import';\nimport ImportsComponent from './imports/Imports';\nimport PreloadComponent from './Preload';\n\nimport Header from './navigation/Header';\nimport Navigation from './navigation/Navigation';\n\nimport { MuiThemeProvider, createMuiTheme } from '@material-ui/core/styles';\n\n// Set up Font Awesome icons.\n// We only import what we need to ensure that we don't use crazy resources.\n\nimport { library } from '@fortawesome/fontawesome-svg-core';\n\nimport {\n\tfaPlay,\n\tfaPause,\n\tfaLongArrowAltLeft,\n\tfaLongArrowAltRight,\n\tfaStepBackward,\n\tfaStepForward,\n\tfaSave,\n\tfaPlus,\n\tfaFileVideo,\n\tfaTrash,\n\tfaDownload,\n\tfaPencilAlt,\n\tfaStopwatch\n} from '@fortawesome/free-solid-svg-icons';\n\nimport {\n\tfaFacebookF,\n\tfaTwitter,\n\tfaInstagram,\n\tfaYoutube\n} from '@fortawesome/free-brands-svg-icons';\n\nlibrary.add(\n\tfaPlay,\n\tfaPause,\n\tfaLongArrowAltLeft,\n\tfaLongArrowAltRight,\n\tfaStepBackward,\n\tfaStepForward,\n\tfaSave,\n\tfaPlus,\n\tfaFileVideo,\n\tfaPencilAlt,\n\tfaTrash,\n\tfaDownload,\n\tfaStopwatch,\n\tfaFacebookF,\n\tfaTwitter,\n\tfaInstagram,\n\tfaYoutube\n);\n\n\nconst theme = createMuiTheme({\n\tpalette: {\n\t\ttype: 'dark',\n\t},\n});\n\nclass App extends Component {\n\tstate = {\n\t\tready: false\n\t}\n\tcomponentWillMount () {\n\t\tAirTower.getInstance().bootstrap().then((a) => {\n\t\t\tthis.setState({\n\t\t\t\tready: true\n\t\t\t})\n\t\t})\n\t}\n\trender () {\n\n\t\tif (!this.state.ready) {\n\t\t\treturn <PreloadComponent />\n\t\t}\n\n\t\treturn (\n\t\t\t<BrowserRouter>\n\t\t\t\t<MuiThemeProvider theme={theme}>\n\t\t\t\t\t<div className=\"page-master\">\n\t\t\t\t\t\t<div className=\"page-container\">\n\t\t\t\t\t\t\t<Navigation />\n\t\t\t\t\t\t\t<div className=\"page-outlet\">\n\t\t\t\t\t\t\t\t<Route exact path=\"/\" component={ HomeComponent } />\n\t\t\t\t\t\t\t\t<Route exact path=\"/import\" component={ ImportComponent } />\n\t\t\t\t\t\t\t\t<Route exact path=\"/imports\" component={ ImportsComponent } />\n\t\t\t\t\t\t\t\t<Route path=\"/import/:id/edit\" component={ EditComponent } />\n\t\t\t\t\t\t\t\t<Route exact path=\"/config\" component={ ConfigComponent } />\n\t\t\t\t\t\t\t\t<Route path=\"/config/platform/:id\" component={ EditPlatformComponent } />\n\t\t\t\t\t\t\t\t<Route exact path=\"/config/platform/new\" component={ CreatePlatformComponent } />\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</MuiThemeProvider>\n\t\t\t</BrowserRouter>\n\t\t);\n\t}\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA.\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      if (\n        response.status === 404 ||\n        response.headers.get('content-type').indexOf('javascript') === -1\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}