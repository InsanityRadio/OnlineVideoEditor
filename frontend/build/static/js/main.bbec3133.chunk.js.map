{"version":3,"sources":["logo.svg","network/IAirTower.js","network/models/Model.js","network/models/Platform.js","network/models/CoreShare.js","network/models/CoreVideo.js","network/models/CoreImport.js","network/models/Slate.js","network/CoreAirTower.js","network/models/CuePoint.js","network/models/Import.js","network/IngestAirTower.js","network/AirTower.js","config/authorisation/Facebook.jsx","config/authorisation/Instagram.jsx","config/CreatePlatform.jsx","config/EditPlatform.jsx","config/Config.jsx","components/Timeline.jsx","components/Video.jsx","components/VideoControls.jsx","frame/Frame.jsx","components/VideoThumbnail.jsx","components/VideoThumbnailContainer.jsx","components/AbsoluteTimePicker.jsx","slate/VideoSelectorNew.jsx","slate/VideoSelector.jsx","slate/Slate.jsx","edit/config/Default.jsx","edit/config/Facebook.jsx","edit/config/YouTube.jsx","edit/config/Twitter.jsx","edit/config/Instagram.jsx","edit/EditVideoType.jsx","edit/Edit.jsx","home/Home.jsx","import/CuePointSelector.jsx","import/TimeSelector.jsx","import/Import.jsx","imports/Imports.jsx","Preload.jsx","navigation/Header.jsx","navigation/Navigation.jsx","App.js","serviceWorker.js","index.js"],"names":["module","exports","__webpack_require__","p","IAirTower","url","query","options","_this","this","root","arguments","length","undefined","URLSearchParams","toString","credentials","headers","fetch","then","response","checkResponse","json","status","console","error","form","data","FormData","Object","keys","forEach","key","append","def","method","body","assign","file","fetchWithForm","Model","classCallCheck","initialize","attribute","structure","params","map","a","value","array","defineProperty","get","bind","Platform","serviceName","possibleConstructorReturn","getPrototypeOf","call","attr_reader","facebook","instagram","twitter","youtube","platform_type","CoreShare","CoreVideo","getBasePath","id","CoreImport","Slate","CoreAirTower","prototype","setCSRFToken","csrf_token","setServices","services","token","csrfToken","success","Error","imp","importID","importObj","find","uuid","title","_this2","service","createImportObj","videoID","configuration","_this3","type","_this4","_this5","renders","_this6","slateObj","platformObj","slates","name","videoFile","cuePoint","_this7","fetchWithFile","cue_point","createSlateObj","platforms","_this8","createPlatformObj","_this9","platform_id","description","_this10","shareID","_this11","_this12","CuePoint","Import","service_name","IngestAirTower","startTime","endTime","start_time","end_time","imports","importModel","points","point","AirTower","airtowers","instance","className","getInstance","register","tower","push","Promise","all","bootstrap","catch","e","FacebookAuthorisation","state","connected","facebookPageID","facebookPages","visiblePages","window","FB","asyncInit","fbAsyncInit","facebookReady","getLoginStatus","login","setState","findPages","auth_type","scope","resolve","reject","api","page","instagram_business_account","react_default","createElement","style","width","renderPageSelection","renderAuthentication","field","event","target","hasOwnProperty","pageID","fbAccessToken","access_token","page_id","user_access_token","getAuthResponse","page_access_token","props","createPlatform","FormControl_default","variant","fullWidth","Select_default","onChange","updateLocalField","input","OutlinedInput_default","MenuItem_default","Divider_default","ExpansionPanelActions_default","Button_default","onClick","connectPage","facebookLogin","Component","InstagramAuthorisation","instagramPageID","findInstagramPages","instagram_page_id","CreatePlatform","core","loadPlatforms","platform","JSON","stringify","change","embedded","renderBody","Paper_default","Facebook_FacebookAuthorisation","Instagram_InstagramAuthorisation","selectPlatform","disabled","EditPlatform","updatePlatform","reauthenticate","deletePlatform","class","removePlatform","Config","reload","ExpansionPanel_default","ExpansionPanelSummary_default","expandIcon","ExpandMore_default","Typography_default","classes","heading","index_es","prefix","icon","ExpansionPanelDetails_default","EditPlatform_EditPlatform","CreatePlatform_CreatePlatform","renderPlatform","renderNew","withStyles","theme","fontSize","typography","pxToRem","fontWeight","fontWeightRegular","styles","slider","color","float","padding","Draggable","timeline","canvasContext","getCanvasState","getX","viewportStart","unitMap","unit","x","mousePosition","dragging","cursorPosition","getCanvasX","canvasWidth","velocity","realViewportStart","applyBounds","finalCursorPosition","position","Math","max","min","end","start","finalPosition","setPositionAndUpdate","Playhead","playheadX","sendOnChange","posX","strokeStyle","fillStyle","drawLine","fillRect","SegmentTerminus","getDirectionPropLabel","prop","getDirection","drawStart","drawEnd","canvasX","Timeline","zoom","playhead","assertThisInitialized","segments","nextProps","nextState","draggingTimeline","offset","autoUpdateViewport","viewportWidth","rerender","initialOffset","resizeCanvasLocalised","resizeCanvas","addEventListener","removeEventListener","c","canvas","getContext","drawFullGrid","drawPlayhead","dpr","devicePixelRatio","offsetWidth","height","offsetHeight","scale","level","zoomLevels","getZoom","steps","clearRect","ceil","i","floor","clipDelay","mySeconds","amIMaj","timecode","drawText","saveCanvas","canvasState","getImageData","putImageData","fullRender","fastRender","restoreCanvas","drawSegments","draw","drawSegment","segmentStart","segmentEnd","segment","startX","endX","x1","y1","x2","y2","beginPath","moveTo","lineTo","stroke","text","textAlign","textBaseline","fillText","rect","getBoundingClientRect","clientX","left","clientY","top","getMousePosition","isHit","draggingStartX","draggingViewportStart","hasMovedTimeline","startDrag","readOnly","newX","mouseMove","stopDrag","seconds","date","moment","unix","local","format","newZoom","newUnitMap","newUnit","es5","setZoom","ref","setCanvas","onMouseDown","mouseDown","onMouseMove","onMouseUp","mouseUp","Video","loading","timecodeBase","discontinuity","src","setSRC","hls","Hls","enableWorker","maxBufferHole","registerEvents","prevProps","on","Events","MANIFEST_PARSED","ERROR","warn","LEVEL_LOADED","details","fragments","programDateTime","FRAG_CHANGED","currentFrag","frag","log","discont","video","currentTime","liveSyncPosition","forceUpdate","loadHLS","pendingLoadHLS","loadSource","attachMedia","v","play","pause","frameRate","getFrameRate","setTimecode","loadingState","videoState","playing","paused","ended","onStateChange","setVideo","onPlay","onVideoStateChange","onCanPlay","onPause","onEnded","VideoControls","seekStart","seekEnd","stepBackwards","stepForwards","playPause","Frame","themeConfig","line1","y","w","h","maxFont","wrap","minFont","line2","canva","layers.logo","layers.background","layers.foreground","initialStateData","parse","initialState","raw","layer","image","Image","onload","drawImage","config","newConfig","line","evaluateConfig","context","size","words","split","indexOf","font","measureText","phrase","slice","join","control","modifier","checked","clearText","display","background","mergeLayers","foreground","layers","backgroundColour","document","toDataURL","r","setLayer","getStyleForLayer","components_Video","previewSRC","setVideoState","components_VideoControls","AppBar_default","Toolbar_default","flex","coreImportObj","FormControlLabel_default","Checkbox_default","label","onValueChange","TextField_default","RadioGroup_default","Radio_default","saveAndClose","exportData","button","margin","spacing","VideoThumbnail","thumbnail","VideoThumbnailContainer","children","AbsoluteTimePicker","dateTime","triggerOnChange","getTimecode","InputProps","textField","setBackwards","topRowButton","setNow","setForwards","minWidth","VideoSelectorNew","uploading","onClose","slate","isNaN","parseFloat","uploadSlate","Dialog_default","open","scroll","DialogTitle_default","DialogContent_default","setData","selectFile","files","placeholder","mask","DialogActions_default","handleClose","handleSelect","autoFocus","VideoSelector","dialog","loadSlates","saveData","maxWidth","slate_VideoSelectorNew","closeSlateView","components_VideoThumbnailContainer","components_VideoThumbnail","getThumbnailPath","openNew","intro_slate_id","outro_slate_id","intro_slate_name","outro_slate_name","videoSRC","dialogArg","_this$setState2","onOpen","selectSlate","preview","slate_VideoSelector","DefaultConfig","visibility","share","objectSpread","immediate","FormHelperText_default","platformName","renderWindow","handleSave","autofocus","FacebookConfig","helperText","wordCount","rows","rowsMax","multiline","YouTubeConfig","TwitterConfig","tweet","InstagramConfig","EditVideoType","platformConfig","videoType","enabledProviders","entries","plat","filter","queued","rendered","getRenderStateClass","renderState","getRenderProgressPC","confirm","updateState","CardContent_default","component","IconButton_default","downloadVideo","reset","MenuList_default","getPlatforms","configurePlatform","ListItemIcon_default","ListItemText_default","primary","shares","isPlatformEnabled","openSubView","findShareForPlatform","view","argument","stateData","subview","subviewArgument","subviewState","saveConfiguration","platformID","isVideoReady","renderPostOptions","renderRenderProgress","CardActions_default","enabled","FormGroup_default","Card_default","getStyle","renderDialog","closeSubView","YouTube_YouTubeConfig","Facebook_FacebookConfig","Twitter_TwitterConfig","Instagram_InstagramConfig","Edit","lastSaveTime","frame","videoTitle","platformState","providers","loadImport","loadRenderState","interval","setInterval","clearInterval","match","airTower","ingest","findImportByID","getServiceName","getImportID","checkForVideos","takeOwnership","setTimeout","videos","enabledState","required","getEnabledVideoTypes","includes","deleteVideoById","createVideoByType","findShareForPlatformAndType","findVideoForType","updateShare","publishShare","deleteShare","createShare","resp","getPreviewPath","callback","checkAndCreateVideos","rateLimitSave","location","pathname","substr","history","replace","saveTimer","save","sendVideoForRender","renderVideo","set","getDownloadPath","_this13","updateVideo","video_id","deleteImport","deleteImportByID","_this14","pop","frame_Frame","getVideoSRC","slate_Slate","components_Timeline","onTimelineUpdate","updateLocalFieldAndSave","deleteClip","edit_EditVideoType","getRenderState","sendRender","downloadRawVideo","Home","Redirect","to","CuePointSelector","loadCuePoints","setPoints","reverse","formatHMS","Date","time","toISOString","formatTime","TimeSelector","initial","getTime","setHours","getHours","setMinutes","getMinutes","setSeconds","getSeconds","setMilliseconds","getMilliseconds","minHeight","dist","ready","topOfHour","now","newTimeCode","abs","currentEdge","getEdgeTimecode","videoLoaded","serialize","importVideo","setTimeline","onSegmentStart","setSegmentStart","onSegmentEnd","setSegmentEnd","aria-label","selectTime","selectCuePoint","components_AbsoluteTimePicker","saveForLater","quickDownload","saveAndAdvance","import_CuePointSelector","import_TimeSelector","Imports","coreImports","queue","loadImports","findImports","sort","b","recoverMissing","coreImp","createCoreImport","newCoreImports","findCoreImport","Preload","Navigation","dispatchEvent","Event","_classNames","_classNames3","drawerClasses","classNames","drawerBase","drawerOpen","drawerClose","userBoxClasses","userBox","userBoxVisible","hideOnOpen","hideState","showState","Drawer_default","anchor","paper","List_default","menu","ListItem_default","toggle","Menu_default","ChevronLeft_default","Link","close","Home_default","QueuePlayNext_default","VideoLibrary_default","Public_default","_drawerClose","flexShrink","whiteSpace","overflowX","transition","transitions","create","easing","sharp","duration","enteringScreen","breakpoints","up","leavingScreen","paddingTop","overflowY","opacity","withTheme","library","add","faPlay","faPause","faLongArrowAltLeft","faLongArrowAltRight","faStepBackward","faStepForward","faSave","faPlus","faFileVideo","faPencilAlt","faTrash","faDownload","faStopwatch","faFacebookF","faTwitter","faInstagram","faYoutube","createMuiTheme","palette","App","BrowserRouter","core_styles","navigation_Navigation","Route","exact","path","HomeComponent","ImportComponent","ImportsComponent","EditComponent","ConfigComponent","EditPlatformComponent","CreatePlatformComponent","Preload_Preload","Boolean","hostname","ReactDOM","render","src_App_0","getElementById","navigator","serviceWorker","registration","unregister"],"mappings":"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","file":"static/js/main.bbec3133.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/logo.5d5d9eef.svg\";","export default class IAirTower {\n\n\tfetch (url, query, options, root = '/api') {\n\n\t\tif (query != undefined) {\n\t\t\tvar search = new URLSearchParams(query)\n\t\t\turl += '?' + search.toString();\n\t\t}\n\n\t\tif (!options) {\n\t\t\toptions = {};\n\t\t}\n\n\t\toptions.credentials = 'same-origin';\n\n\t\tif (!options.headers) {\n\t\t\toptions.headers = {}\n\t\t}\n\n\t\t// Setting this header prevents the JsonCsrf web application firewall rule being triggered\n\t\toptions.headers['X-Requested-With'] = 'XMLHttpRequest';\n\n\t\treturn fetch(root + url, options)\n\t\t\t.then ((response) => this.checkResponse(response))\n\t\t\t.then ((response) => response.json());\n\n\t}\n\n\tcheckResponse (response) {\n\n\t\tif (response.status >= 500) {\n\t\t\tconsole.error(\"Backend returned \" + response.status);\n\t\t}\n\n\t\treturn response;\n\n\t}\n\n\tfetchWithForm (url, query, form, options) {\n\n\t\tlet data = new FormData();\n\t\tObject.keys(form).forEach(key => data.append(key, form[key]));\n\n\t\tlet def = {\n\t\t\tmethod: 'POST',\n\t\t\tbody: data\n\t\t};\n\t\tObject.assign(def, options || {})\n\n\t\treturn this.fetch(url, query, def)\n\n\t}\n\n\t/**\n\t * Upload a File object\n\t */\n\tfetchWithFile (url, query, file, options) {\n\t\treturn this.fetchWithForm(url, query, { file }, options);\n\t}\n\n}","/**\n * Model allows us to represent data loaded from the server. \n * It allows us to quickly create a model, including child models, from a single object from a JSON response.\n * \n * By using Object.defineProperty, we can rightly make this data structure immutable.\n */\nexport default class Model {\n\n\tconstructor (data) {\n\t\tif (!data) {\n\t\t\treturn;\n\t\t}\n\t\tthis.initialize(data);\n\t}\n\n\tinitialize (data) {\n\t\t// Lazy initialize all our getters, as we can't define them pre-super call.\n\t\tfor (var key in data) {\n\t\t\tthis['_' + key] = data[key];\n\t\t}\n\t}\n\n\tget (attribute) {\n\n\t\tlet structure = this['a_' + attribute];\n\t\tlet params = this['b_' + attribute];\n\t\tif (!structure) {\n\t\t\treturn this['_' + attribute];\n\t\t}\n\n\t\treturn this['_' + attribute].map((a) => new structure(a, params));\n\n\t}\n\n\tset (attribute, value) {\n\t\tthis['_' + attribute] = value;\n\t\treturn this;\n\t}\n\n\t/*\n\t * Create the appropriate getters for an attribute. Can be passed a class to be used as a constructor.\n\t */\n\tattr_reader (attribute, structure, array, params) {\n\n\t\tif (array && structure) {\n\t\t\tthis['a_' + attribute] = structure;\n\t\t\tthis['b_' + attribute] = params;\n\t\t\tObject.defineProperty(this, attribute, {\n\t\t\t\tget: function () {\n\t\t\t\t\treturn this.get(attribute);\n\t\t\t\t}.bind(this)\n\t\t\t})\n\t\t} else {\n\t\t\tObject.defineProperty(this, attribute, {\n\t\t\t\tget: function () {\n\t\t\t\t\treturn structure ? new structure(this.get(attribute)) : this.get(attribute);\n\t\t\t\t}.bind(this)\n\t\t\t})\n\t\t}\n\n\t}\n\n}","import Model from './Model';\n\n/**\n * Import is a model that represents an import object, as generated by the server.\n *\n * Hence, it is immutable. \n */\nexport default class Platform extends Model {\n\tconstructor (data, serviceName) {\n\t\tsuper(data);\n\n\t\tthis.attr_reader('id');\n\t\tthis.attr_reader('name');\n\t\tthis.attr_reader('configuration');\n\t\tthis.attr_reader('platform_type');\n\t\tthis.attr_reader('default_share_text');\n\t}\n\n\tget icon () {\n\t\tlet icons = {\n\t\t\tfacebook: ['fab', 'facebook-f'],\n\t\t\tinstagram: ['fab', 'instagram'],\n\t\t\ttwitter: ['fab', 'twitter'],\n\t\t\tyoutube: ['fab', 'youtube']\n\t\t}\n\n\t\treturn icons[this.platform_type] || this.platform_type;\n\t}\n}","import Model from './Model';\nimport Platform from './Platform';\n\n/**\n * Import is a model that represents an import object, as generated by the server.\n *\n * Hence, it is immutable. \n */\nexport default class CoreShare extends Model {\n\n\tconstructor (data, serviceName) {\n\t\tsuper(data);\n\n\t\tthis.attr_reader('id');\n\t\tthis.attr_reader('platform', Platform);\n\t\tthis.attr_reader('configuration');\n\t\tthis.attr_reader('title');\n\t\tthis.attr_reader('description');\n\t\tthis.attr_reader('publish_on');\n\t\tthis.attr_reader('shared');\n\t}\n\n}","import Model from './Model';\n\nimport CoreShare from './CoreShare';\n\n/**\n * Import is a model that represents an import object, as generated by the server.\n *\n * Hence, it is immutable. \n */\nexport default class CoreVideo extends Model {\n\n\tconstructor (data, serviceName) {\n\t\tsuper(data);\n\n\t\tthis.attr_reader('id');\n\t\tthis.attr_reader('created_by');\n\t\tthis.attr_reader('type');\n\t\tthis.attr_reader('configuration');\n\t\tthis.attr_reader('queued');\n\t\tthis.attr_reader('rendered');\n\t\tthis.attr_reader('shares', CoreShare, true);\n\t}\n\n\tgetDownloadPath () {\n\t\treturn this.getBasePath() + '/download.mp4';\n\t}\n\n\tgetBasePath () {\n\t\treturn '/api/import/todo/video/' + this.id;\n\t}\n\n}","import Model from './Model';\nimport CoreVideo from './CoreVideo';\n\n/**\n * Import is a model that represents an import object, as generated by the server.\n *\n * Hence, it is immutable. \n */\nexport default class CoreImport extends Model {\n\n\tconstructor (data, serviceName) {\n\t\tsuper(data);\n\n\t\tthis.attr_reader('uuid');\n\t\tthis.attr_reader('title');\n\t\tthis.attr_reader('videos', CoreVideo, true);\n\t\tthis.attr_reader('created_by');\n\t}\n\n}","import Model from './Model';\n\n/**\n * Import is a model that represents an import object, as generated by the server.\n *\n * Hence, it is immutable. \n */\nexport default class Slate extends Model {\n\tconstructor (data, serviceName) {\n\t\tsuper(data);\n\n\t\tthis.attr_reader('id');\n\t\tthis.attr_reader('name');\n\t}\n\n\tgetThumbnailPath () {\n\t\treturn this.getBasePath() + '/thumbnail.jpg';\n\t}\n\n\tgetPath () {\n\t\treturn this.getBasePath() + '/download.mp4';\n\t}\n\n\tgetBasePath () {\n\t\treturn '/api/slates/' + this.id;\n\t}\n}","import IAirTower from './IAirTower';\n\nimport CoreImport from './models/CoreImport';\nimport Platform from './models/Platform';\nimport Slate from './models/Slate';\n\nexport default class CoreAirTower extends IAirTower {\n\n\tfetch (url, query, options, root = '') {\n\t\treturn super.fetch(root + url, query, options);\n\t}\n\n\tbootstrap () {\n\t\treturn this.fetch('/bootstrap')\n\t\t\t.then ((response) => {\n\t\t\t\tthis.setCSRFToken(response.csrf_token);\n\t\t\t\tthis.setServices(response.services);\n\t\t\t})\n\t}\n\n\tsetCSRFToken (token) {\n\t\tthis.csrfToken = token;\n\t}\n\n\tsetServices (services) {\n\t\tthis.services = services;\n\t}\n\n\tgetServices () {\n\t\treturn this.services;\n\t}\n\n\tloadImports () {\n\t\treturn this.fetch('/_/imports')\n\t\t\t.then ((response) => {\n\t\t\t\tif (response.success != 1) {\n\t\t\t\t\tthrow new Error('Failed to load a list of imports from the server!');\n\t\t\t\t}\n\n\t\t\t\treturn response['imports'].map((imp) => new CoreImport(imp));\n\t\t\t});\n\t}\n\t/**\n\t * Find all active imports from service\n\t *\n\t * Returns a promise that resolves with the specified import.\n\t */\n\tfindImportByID (importID) {\n\t\treturn this.fetch('/_/imports')\n\t\t\t.then ((response) => {\n\t\t\t\tif (response.success != 1) {\n\t\t\t\t\tthrow new Error('Failed to load a list of imports from the server!');\n\t\t\t\t}\n\n\t\t\t\tlet importObj = response['imports'].find((imp) => imp.uuid == importID);\n\n\t\t\t\tif (!importObj) {\n\t\t\t\t\tthrow new Error('Could not find import on backend');\n\t\t\t\t}\n\n\t\t\t\treturn new CoreImport(importObj);\n\t\t\t});\n\t}\n\n\ttakeOwnership (serviceName, importID, title) {\n\t\treturn this.fetchWithForm('/_/import/new', {}, {\n\t\t\tservice: serviceName,\n\t\t\ttitle: title,\n\t\t\tuuid: importID\n\t\t})\n\t\t\t.then((response) => this.createImportObj(response));\n\t}\n\n\tdeleteImport (serviceName, uuid) {\n\t\treturn this.fetchWithForm('/_/import/' + uuid + '/delete', {}, {})\n\t\t\t.then((response) => response.success);\n\t}\n\n\tupdateVideo (uuid, videoID, configuration) {\n\t\treturn this.fetchWithForm('/import/' + uuid + '/' + videoID + '/save', {}, {\n\t\t\tconfiguration: configuration\n\t\t})\n\t\t\t.then((response) => this.createImportObj(response));\n\t}\n\n\tcreateVideoByType (uuid, type) {\n\t\treturn this.fetchWithForm('/import/' + uuid + '/create_video', { type: type }, {})\n\t\t\t.then((response) => this.createImportObj(response));\n\t}\n\n\tdeleteVideoById (uuid, videoID) {\n\t\treturn this.fetchWithForm('/import/' + uuid + '/' + videoID + '/delete', {}, {})\n\t\t\t.then((response) => this.createImportObj(response));\n\t}\n\n\tloadRenderState (uuid) {\n\t\treturn this.fetch('/import/' + uuid + '/render')\n\t\t\t.then((response) => {\n\t\t\t\tif (response.success != 1) {\n\t\t\t\t\tthrow new Error('Failed to load render states for given import');\n\t\t\t\t}\n\n\t\t\t\treturn response.renders;\n\t\t\t});\n\t}\n\n\trenderVideo (uuid, videoID) {\n\t\treturn this.fetchWithForm('/import/' + uuid + '/' + videoID + '/render', {}, {})\n\t\t\t.then((response) => this.createImportObj(response));\n\t}\n\n\n\tcreateImportObj (response) {\n\t\tif (response.success != 1) {\n\t\t\tthrow new Error('Failed to load a list of imports from the server!');\n\t\t}\n\n\t\tlet importObj = response['import'];\n\n\t\tif (!importObj) {\n\t\t\tthrow new Error('Could not find import on backend');\n\t\t}\n\n\t\treturn new CoreImport(importObj);\n\t}\n\n\tcreateSlateObj (response) {\n\t\tif (response.success != 1) {\n\t\t\tthrow new Error('Failed to load slate');\n\t\t}\n\n\t\tlet slateObj = response['slate'];\n\t\tif (!slateObj) {\n\t\t\tthrow new Error('Could not load slate from backend');\n\t\t}\n\n\t\treturn new Slate(slateObj);\n\t}\n\n\tcreatePlatformObj (response) {\n\t\tif (response.success != 1) {\n\t\t\tthrow new Error('Failed to load slate');\n\t\t}\n\n\t\tlet platformObj = response['platform'];\n\t\treturn new Platform(platformObj);\n\t}\n\n\tloadSlates () {\n\t\treturn this.fetch('/slates/')\n\t\t\t.then((response) => {\n\t\t\t\tif (!response.success) {\n\t\t\t\t\tthrow new Error('Failed to load list of slates from server');\n\t\t\t\t}\n\n\t\t\t\tlet slates = response.slates.map((slateObj) => new Slate(slateObj));\n\t\t\t\treturn slates;\n\t\t\t});\n\t}\n\n\tuploadSlate (name, videoFile, cuePoint) {\n\t\treturn this.fetchWithFile('/slates/new', { name: name, cue_point: cuePoint }, videoFile)\n\t\t\t.then((response) => this.createSlateObj(response));\n\t}\n\n\tdeleteSlate (id) {\n\t\treturn this.fetchWithForm('/slates/delete', { id: id }, {});\n\t}\n\n\tloadPlatforms () {\n\t\treturn this.fetch('/platform/')\n\t\t\t.then((response) => {\n\t\t\t\tif (!response.success) {\n\t\t\t\t\tthrow new Error('Failed to load list of platforms from server');\n\t\t\t\t}\n\n\t\t\t\tlet slates = response.platforms.map((slateObj) => new Platform(slateObj));\n\t\t\t\treturn slates;\n\t\t\t});\n\t}\n\n\tcreatePlatform (platform_type, name, configuration) {\n\t\treturn this.fetchWithForm('/platform/new', {}, { name, platform_type, configuration })\n\t\t\t.then((response) => this.createPlatformObj(response));\n\t}\n\n\tupdatePlatform (id, name, configuration) {\n\t\treturn this.fetchWithForm('/platform/' + id + '/save', {}, { name, configuration })\n\t\t\t.then((response) => this.createPlatformObj(response));\n\t}\n\n\tdeletePlatform (id) {\n\t\treturn this.fetchWithForm('/platform/' + id + '/delete', { id: id }, {});\n\t}\n\n\tcreateShare (uuid, videoID, platform_id, title, description, configuration) {\n\t\treturn this.fetchWithForm('/import/' + uuid + '/' + videoID + '/share/new', {}, { platform_id, title, description, configuration })\n\t\t\t.then((response) => this.createImportObj(response));\n\t}\n\n\tupdateShare (uuid, videoID, shareID, title, description, configuration) {\n\t\treturn this.fetchWithForm('/import/' + uuid + '/' + videoID + '/share/' + shareID + '/save', {}, { title, description, configuration })\n\t\t\t.then((response) => this.createImportObj(response));\n\t}\n\n\tdeleteShare (uuid, videoID, shareID) {\n\t\treturn this.fetchWithForm('/import/' + uuid + '/' + videoID + '/share/' + shareID + '/delete', {}, {})\n\t\t\t.then((response) => this.createImportObj(response));\n\t}\n\n\tpublishShare (uuid, videoID, shareID) {\n\t\treturn this.fetchWithForm('/import/' + uuid + '/' + videoID + '/share/' + shareID + '/now', {}, {})\n\t\t\t.then((response) => response.success == 1);\n\t}\n\n}\n","import Model from './Model';\n\n/**\n * CuePoint keeps track of sections of video that might contain useful events. \n *\n * Hence, it is immutable. \n */\nexport default class CuePoint extends Model {\n\n\tconstructor (data, serviceName) {\n\t\tsuper(data);\n\n\t\tthis.attr_reader('service');\n\t\tthis.attr_reader('start_time');\n\t\tthis.attr_reader('end_time');\n\t}\n\n\tgetThumbnailPath () {\n\t\treturn '/api/ingest/' + this.get('service') + '/thumbnail.jpg?time=' + (this.get('start_time') + 5);\n\t}\n\n}","import Model from './Model';\n\n/**\n * Import is a model that represents an import object, as generated by the server.\n *\n * Hence, it is immutable. \n */\nexport default class Import extends Model {\n\n\tconstructor (data, serviceName) {\n\t\tdata['service_name'] = serviceName;\n\t\tsuper(data);\n\n\t\tthis.attr_reader('uuid');\n\t\tthis.attr_reader('start_time');\n\t\tthis.attr_reader('end_time');\n\t\tthis.attr_reader('real_start_time');\n\t\tthis.attr_reader('real_end_time');\n\t\tthis.attr_reader('length');\n\t\tthis.attr_reader('start_offset');\n\t\tthis.attr_reader('expiry');\n\t\tthis.attr_reader('service_name');\n\t}\n\n\tgetPreviewPath () {\n\t\treturn this.getBasePath() + '/preview.m3u8';\n\t}\n\n\tgetDownloadPath () {\n\t\treturn this.getBasePath() + '/download.mp4';\n\t}\n\n\tgetThumbnailPath () {\n\t\treturn this.getBasePath() + '/preview.jpg';\n\t}\n\n\tgetBasePath () {\n\t\treturn '/api/ingest/' + this.service_name + '/import/' + this.uuid;\n\t}\n\n}","import IAirTower from './IAirTower';\n\nimport CuePoint from './models/CuePoint';\nimport Import from './models/Import';\n\nexport default class IngestAirTower extends IAirTower {\n\n\tfetch (url, query, options, root = '/ingest') {\n\t\treturn super.fetch(root + url, query, options);\n\t}\n\n\tbootstrap () {\n\t\treturn this.fetch('/bootstrap')\n\t\t\t.then ((response) => {\n\t\t\t\tthis.setCSRFToken(response.csrf_token)\n\t\t\t\tthis.setServices(response.services)\n\t\t\t})\n\t}\n\n\tsetCSRFToken (token) {\n\t\tthis.csrfToken = token;\n\t}\n\n\tsetServices (services) {\n\t\tthis.services = services;\n\t}\n\n\tgetServices () {\n\t\treturn this.services;\n\t}\n\n\t/**\n\t * Import video from service between the specified UNIX times (seconds, not MS).\n\t * \n\t * Returns a promise that resolves with an Import object representing our import.\n\t */\n\timportVideo (service, startTime, endTime) {\n\t\tlet data = {\n\t\t\tstart_time: startTime,\n\t\t\tend_time: endTime\n\t\t};\n\n\t\treturn this.fetchWithForm('/' + service + '/import', undefined, data)\n\t\t\t.then ((response) => {\n\t\t\t\tif (response.success != 1) {\n\t\t\t\t\tthrow new Error('Import failed');\n\t\t\t\t}\n\n\t\t\t\treturn new Import(response['data'], service);\n\t\t\t});\n\t}\n\n\t/**\n\t * Find all active imports from service\n\t *\n\t * Returns a promise that resolves with an array of Import objects.\n\t */\n\tfindImports (service) {\n\t\treturn this.fetch('/' + service + '/imports')\n\t\t\t.then ((response) => {\n\t\t\t\tif (response.success != 1) {\n\t\t\t\t\tthrow new Error('Failed to load a list of imports from the server!')\n\t\t\t\t}\n\n\t\t\t\treturn response.imports.map((importModel) => new Import(importModel, service));\n\t\t\t})\n\t}\n\n\t/**\n\t * Find all active imports from service\n\t *\n\t * Returns a promise that resolves with the specified import.\n\t */\n\tfindImportByID (service, importID) {\n\t\treturn this.fetch('/' + service + '/import/' + importID)\n\t\t\t.then ((response) => {\n\t\t\t\tif (response.success != 1) {\n\t\t\t\t\tthrow new Error('Failed to load a list of imports from the server!')\n\t\t\t\t}\n\n\t\t\t\treturn new Import(response['import'], service);\n\t\t\t})\n\t}\n\n\tdeleteImportByID (service, importID) {\n\t\treturn this.fetchWithForm('/' + service + '/import/' + importID + '/delete', {}, {})\n\t\t\t.then ((response) => {\n\t\t\t\tif (response.success != 1) {\n\t\t\t\t\tthrow new Error('Failed to delete import ' + importID)\n\t\t\t\t}\n\t\t\t\treturn true;\n\t\t\t})\n\t}\n\t\n\tloadCuePoints (service) {\n\t\treturn this.fetch('/' + service + '/cue_points')\n\t\t\t.then((response) => {\n\t\t\t\tif (response.success != 1) {\n\t\t\t\t\tthrow new Error('Failed to load list of cue points from the server!');\n\t\t\t\t}\n\n\t\t\t\treturn response.points.map((point) => new CuePoint(point));\n\t\t\t})\n\t}\n\n}\n","import 'whatwg-fetch';\n\nimport IAirTower from './IAirTower';\n\nimport CoreAirTower from './CoreAirTower';\nimport IngestAirTower from './IngestAirTower';\n\n/**\n * AirTower abstracts all network calls to the backend to hide complexity.\n */\nexport default class AirTower extends IAirTower {\n\t\n\tstatic getInstance () {\n\n\t\tif (!AirTower.instance)\n\t\t\tAirTower.instance = new AirTower();\n\n\t\treturn AirTower.instance;\n\n\t}\n\n\tstatic register (name, className) {\n\t\tAirTower.getInstance().register(name, className);\n\t}\n\n\tconstructor () {\n\t\tsuper();\n\t\tthis.airtowers = [];\n\t}\n\n\tregister (name, className) {\n\t\tlet tower = new className();\n\n\t\tthis.airtowers.push(tower)\n\t\tthis[name] = tower;\n\t}\n\n\t/**\n\t * Returns a promise that resolves once the airtowers have bootstrapped.\n\t */\n\tbootstrap () {\n\t\treturn Promise.all(this.airtowers.map((a) => a.bootstrap())).catch((e) => false);\n\t}\n\n}\n\nAirTower.register('ingest', IngestAirTower);\nAirTower.register('core', CoreAirTower);\n","import React, { Component } from 'react';\n\nimport Button from '@material-ui/core/Button';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport Divider from '@material-ui/core/Divider';\nimport TextField from '@material-ui/core/TextField';\nimport FormHelperText from '@material-ui/core/FormHelperText';\nimport OutlinedInput from '@material-ui/core/OutlinedInput';\n\nimport ExpansionPanelActions from '@material-ui/core/ExpansionPanelActions';\n\nimport MenuItem from '@material-ui/core/MenuItem';\nimport FormControl from '@material-ui/core/FormControl';\nimport Select from '@material-ui/core/Select';\n\nexport default class FacebookAuthorisation extends Component {\n\tstate = {\n\t\tconnected: false,\n\t\tfacebookPageID: 0,\n\t\tfacebookPages: [],\n\t\tvisiblePages: [],\n\t}\n\n\tcomponentWillMount () {\n\t\tif (!window.FB) {\n\t\t\tlet asyncInit = window.fbAsyncInit;\n\t\t\twindow.fbAsyncInit = function () {\n\t\t\t\tasyncInit();\n\t\t\t\tthis.facebookReady();\n\t\t\t}\n\t\t}\n\t\tthis.facebookReady();\n\t}\n\n\tfacebookReady () {\n\t\twindow.FB.getLoginStatus((response) => {\n\t\t})\n\t}\n\n\tfacebookLogin () {\n\t\twindow.FB.login((response) => {\n\t\t\tif (response.status == 'connected') {\n\t\t\t\tthis.setState({\n\t\t\t\t\tconnected: true\n\t\t\t\t}, () => this.findPages());\n\t\t\t}\n\t\t}, { auth_type: 'reauthenticate', scope: ['instagram_basic', 'manage_pages', 'publish_pages'] })\n\t}\n\n\tfindPages () {\n\t\treturn new Promise((resolve, reject) => {\n\t\t\twindow.FB.api('/me/accounts', (response) => {\n\t\t\t\tthis.setState({\n\t\t\t\t\tfacebookPages: response.data\n\t\t\t\t}); //, () => this.findInstagramPages())\n\t\t\t});\n\t\t});\n\t}\n\n\tfindInstagramPages () {\n\t\tlet visiblePages = [];\n\n\t\tthis.state.facebookPages.forEach((page) => {\n\t\t\twindow.FB.api('/' + page.id + '?fields=instagram_business_account', (response) => {\n\t\t\t\tif (response.instagram_business_account != null) {\n\t\t\t\t\tvisiblePages.push(page)\n\t\t\t\t\tthis.setState({\n\t\t\t\t\t\tvisiblePages: visiblePages\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t}\n\n\tcomponentWillUnmount () {\n\n\t}\n\n\trender () {\n\t\treturn (\n\t\t\t<div style={{ width: '100%' }}>\n\t\t\t\t{ this.state.connected ? this.renderPageSelection() : this.renderAuthentication() }\n\t\t\t</div>\n\t\t);\n\t}\n\n\tupdateLocalField (field, event) {\n\t\tthis.setState({\n\t\t\t[field]:  event.target[event.target.hasOwnProperty('checked') ? 'checked' : 'value']\n\t\t});\n\t}\n\n\tconnectPage () {\n\t\tlet pageID = this.state.facebookPageID;\n\t\tlet page = this.state.facebookPages.find((page) => page.id == pageID);\n\n\t\tif (!page) {\n\t\t\tthrow new Error('User selected ');\n\t\t}\n\n\t\t// Access tokens do not expire. We can just POST this to the backend.\n\t\tlet fbAccessToken = page.access_token;\n\t\tlet description = page.name;\n\n\t\tlet configuration = {\n\t\t\tpage_id: pageID,\n\t\t\tuser_access_token: window.FB.getAuthResponse()['accessToken'],\n\t\t\tpage_access_token: fbAccessToken\n\t\t};\n\n\t\tthis.props.createPlatform(\n\t\t\t'facebook',\n\t\t\tdescription,\n\t\t\tconfiguration\n\t\t);\n\t}\n\n\trenderPageSelection () {\n\t\treturn (\n\t\t\t<div style={{ width: '100%' }}>\n\t\t\t\t<FormControl variant=\"outlined\" fullWidth={ true }>\n\t\t\t\t\t<Select\n\t\t\t\t\t\tfullWidth={ true }\n\t\t\t\t\t\tvalue={ this.state.facebookPageID }\n\t\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\t\tonChange={ this.updateLocalField.bind(this, 'facebookPageID') }\n\t\t\t\t\t\tinput={ <OutlinedInput fullWidth={ true } /> }>\n\t\t\t\t\t\t{ this.state.facebookPages.map((page) => (\n\t\t\t\t\t\t\t<MenuItem value={ page.id }>{ page.name }</MenuItem>\n\t\t\t\t\t\t))}\n\t\t\t\t\t</Select>\n\t\t\t\t</FormControl>\n\t\t\t\t<Divider />\n\t\t\t\t<ExpansionPanelActions>\n\t\t\t\t\t<Button onClick={ this.connectPage.bind(this) }>\n\t\t\t\t\t\t{ this.props.instagram ? 'Link Instagram' : 'Connect Page' }\n\t\t\t\t\t</Button>\n\t\t\t\t</ExpansionPanelActions>\n\t\t\t</div>\n\t\t);\n\t}\n\n\trenderAuthentication () {\n\t\treturn (\n\t\t\t<Button variant=\"outlined\" onClick={ this.facebookLogin.bind(this) }>\n\t\t\t\tAuthorize Account\n\t\t\t</Button>\n\t\t);\n\t}\n}","import React, { Component } from 'react';\n\nimport Button from '@material-ui/core/Button';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport TextField from '@material-ui/core/TextField';\nimport FormHelperText from '@material-ui/core/FormHelperText';\nimport OutlinedInput from '@material-ui/core/OutlinedInput';\n\nimport MenuItem from '@material-ui/core/MenuItem';\nimport FormControl from '@material-ui/core/FormControl';\nimport Select from '@material-ui/core/Select';\n\nimport FacebookAuthorisation from './Facebook';\n\nexport default class InstagramAuthorisation extends FacebookAuthorisation {\n\tstate = {\n\t\tconnected: false,\n\t\tfacebookPageID: 0,\n\t\tfacebookPages: [],\n\n\t\tinstagramPageID: 0,\n\t\tvisiblePages: [],\n\t}\n\n\tfindPages () {\n\t\treturn new Promise((resolve, reject) => {\n\t\t\twindow.FB.api('/me/accounts', (response) => {\n\t\t\t\tthis.setState({\n\t\t\t\t\tfacebookPages: response.data\n\t\t\t\t}, () => this.findInstagramPages())\n\t\t\t});\n\t\t});\n\t}\n\n\tfindInstagramPages () {\n\t\tlet visiblePages = [];\n\n\t\tthis.state.facebookPages.forEach((page) => {\n\t\t\twindow.FB.api('/' + page.id + '?fields=instagram_business_account', (response) => {\n\t\t\t\tif (response.instagram_business_account != null) {\n\t\t\t\t\tpage.instagram_page_id = response.instagram_business_account.id;\n\t\t\t\t\tvisiblePages.push(page);\n\t\t\t\t\tthis.setState({\n\t\t\t\t\t\tvisiblePages: visiblePages\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t}\n\n\tconnectPage () {\n\t\tlet pageID = this.state.instagramPageID;\n\t\tlet page = this.state.visiblePages.find((page) => page.id == pageID);\n\n\t\tif (!page) {\n\t\t\tthrow new Error('User selected ');\n\t\t}\n\n\t\t// Access tokens do not expire. We can just POST this to the backend.\n\t\tlet fbAccessToken = page.access_token;\n\t\tlet description = page.name;\n\n\t\tlet configuration = {\n\t\t\tpage_id: pageID,\n\t\t\tinstagram_page_id: page.instagram_page_id,\n\t\t\taccess_token: fbAccessToken\n\t\t};\n\n\t\tthis.props.createPlatform(\n\t\t\t'instagram',\n\t\t\tdescription,\n\t\t\tconfiguration\n\t\t);\n\t}\n\n\trenderPageSelection () {\n\t\treturn (\n\t\t\t<div>\n\t\t\t\t<FormControl variant=\"outlined\" fullWidth={ true }>\n\t\t\t\t\t<Select\n\t\t\t\t\t\tfullWidth={ true }\n\t\t\t\t\t\tvalue={ this.state.instagramPageID }\n\t\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\t\tonChange={ this.updateLocalField.bind(this, 'instagramPageID') }\n\t\t\t\t\t\tinput={ <OutlinedInput fullWidth={ true } /> }>\n\t\t\t\t\t\t{ this.state.visiblePages.map((page) => (\n\t\t\t\t\t\t\t<MenuItem value={ page.id }>{ page.name }</MenuItem>\n\t\t\t\t\t\t))}\n\t\t\t\t\t</Select>\n\t\t\t\t</FormControl>\n\t\t\t\t<Button variant=\"outlined\" onClick={ this.connectPage.bind(this) }>\n\t\t\t\t\tLink Instagram\n\t\t\t\t</Button>\n\t\t\t</div>\n\t\t);\n\t}\n}","import React, { Component } from 'react';\n\nimport { Link } from 'react-router-dom';\n\nimport AirTower from '../network/AirTower';\nimport FacebookAuthorisation from './authorisation/Facebook';\nimport InstagramAuthorisation from './authorisation/Instagram';\n\nimport Button from '@material-ui/core/Button';\nimport Paper from '@material-ui/core/Paper';\n\nexport default class CreatePlatform extends Component {\n\n\tstate = {\n\t\tplatforms: []\n\t}\n\n\tcomponentWillMount () {\n\t\tlet airTower = AirTower.getInstance().core;\n\n\t\tairTower.loadPlatforms()\n\t\t\t.then((platforms) => this.setState({ platforms }))\n\t}\n\n\tselectPlatform (platform) {\n\t\tthis.setState({\n\t\t\tplatform: platform\n\t\t})\n\t}\n\n\tcreatePlatform (type, name, configuration) {\n\t\tlet airTower = AirTower.getInstance().core;\n\n\t\tairTower.createPlatform(type, name, JSON.stringify(configuration))\n\t\t\t.then((platform) => this.props.change())\n\t}\n\n\trender () {\n\t\tif (this.props.embedded) {\n\t\t\treturn this.renderBody();\n\t\t}\n\t\treturn (\n\t\t\t<div className=\"fullpage home one-page\">\n\t\t\t\t<Paper className=\"platform-container\">\n\t\t\t\t\t{ this.renderBody() }\n\t\t\t\t</Paper>\n\t\t\t</div>\n\t\t);\n\t}\n\n\trenderBody () {\n\t\tswitch (this.state.platform) {\n\t\t\tcase 'facebook':\n\t\t\t\treturn (\n\t\t\t\t\t<FacebookAuthorisation createPlatform={ this.createPlatform.bind(this)} />\n\t\t\t\t);\n\t\t\tcase 'instagram':\n\t\t\t\treturn (\n\t\t\t\t\t<InstagramAuthorisation createPlatform={ this.createPlatform.bind(this) } />\n\t\t\t\t);\n\t\t}\n\n\t\treturn (\n\t\t\t<div className=\"platform-list-container\">\n\t\t\t\t<Button variant=\"outlined\" onClick={ this.selectPlatform.bind(this, 'facebook') }>\n\t\t\t\t\tConnect Facebook\n\t\t\t\t</Button>\n\t\t\t\t<Button variant=\"outlined\" onClick={ this.selectPlatform.bind(this, 'instagram') }>\n\t\t\t\t\tConnect Instagram\n\t\t\t\t</Button>\n\t\t\t\t<Button variant=\"outlined\" disabled onClick={ this.selectPlatform.bind(this, 'twitter') }>\n\t\t\t\t\tConnect Twitter\n\t\t\t\t</Button>\n\t\t\t\t<Button variant=\"outlined\" disabled onClick={ this.selectPlatform.bind(this, 'youtube') }>\n\t\t\t\t\tConnect YouTube\n\t\t\t\t</Button>\n\t\t\t</div>\n\t\t);\n\t}\n}","import React, { Component } from 'react';\nimport { Link } from 'react-router-dom';\n\nimport AirTower from '../network/AirTower';\nimport FacebookAuthorisation from './authorisation/Facebook';\nimport InstagramAuthorisation from './authorisation/Instagram';\n\nimport Button from '@material-ui/core/Button';\nimport Paper from '@material-ui/core/Paper';\n\nexport default class EditPlatform extends Component {\n\n\tstate = {\n\t\tplatforms: []\n\t}\n\n\tcomponentWillMount () {\n\t}\n\n\tupdatePlatform (type, name, configuration) {\n\t\tlet airTower = AirTower.getInstance();\n\t\tairTower.core.updatePlatform(this.props.platform.id, name, JSON.stringify(configuration))\n\t\t\t.then((platform) => this.props.change())\n\t}\n\n\treauthenticate () {\n\t\tthis.setState({\n\t\t\treauthenticate: true\n\t\t})\n\t}\n\n\tremovePlatform () {\n\t\tlet airTower = AirTower.getInstance();\n\t\tairTower.core.deletePlatform(this.props.platform.id)\n\t\t\t.then((platform) => this.props.change())\n\t}\n\n\trender () {\n\t\tswitch (this.state.reauthenticate && this.props.platform.platform_type) {\n\t\t\tcase 'facebook':\n\t\t\t\treturn (\n\t\t\t\t\t<FacebookAuthorisation createPlatform={ this.updatePlatform.bind(this)} />\n\t\t\t\t);\n\t\t\tcase 'instagram':\n\t\t\t\treturn (\n\t\t\t\t\t<InstagramAuthorisation createPlatform={ this.updatePlatform.bind(this) } />\n\t\t\t\t);\n\t\t}\n\t\treturn (\n\t\t\t<div class=\"platform-list-container\">\n\t\t\t\t<Button variant=\"outlined\" onClick={ this.reauthenticate.bind(this) }>\n\t\t\t\t\tRe-Authenticate\n\t\t\t\t</Button>\n\t\t\t\t<Button variant=\"outlined\" onClick={ this.removePlatform.bind(this) }>\n\t\t\t\t\tRemove\n\t\t\t\t</Button>\n\t\t\t</div>\n\t\t);\n\t}\n}","import React, { Component } from 'react';\nimport { Link } from 'react-router-dom';\n\nimport AirTower from '../network/AirTower';\nimport FacebookAuthorisation from './authorisation/Facebook';\nimport CreatePlatform from './CreatePlatform';\nimport EditPlatform from './EditPlatform';\n\nimport { withStyles } from '@material-ui/core/styles';\n\nimport Button from '@material-ui/core/Button';\nimport Divider from '@material-ui/core/Divider';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nimport ExpansionPanel from '@material-ui/core/ExpansionPanel';\nimport ExpansionPanelActions from '@material-ui/core/ExpansionPanelActions';\nimport ExpansionPanelDetails from '@material-ui/core/ExpansionPanelDetails';\nimport ExpansionPanelSummary from '@material-ui/core/ExpansionPanelSummary';\nimport Paper from '@material-ui/core/Paper';\nimport Typography from '@material-ui/core/Typography';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\n\nconst styles = theme => ({\n\theading: {\n\t\tfontSize: theme.typography.pxToRem(15),\n\t\tfontWeight: theme.typography.fontWeightRegular,\n\t},\n});\n\nclass Config extends Component {\n\n\tstate = {\n\t\tplatforms: []\n\t}\n\n\tcomponentWillMount () {\n\t\tthis.reload();\n\t}\n\n\treload () {\n\t\tlet airTower = AirTower.getInstance().core;\n\n\t\tairTower.loadPlatforms()\n\t\t\t.then((platforms) => this.setState({ platforms }));\n\t}\n\n\trenderPlatform (platform) {\n\t\treturn (\n\t\t\t<ExpansionPanel>\n\t\t\t\t<ExpansionPanelSummary expandIcon={<ExpandMoreIcon />}>\n\t\t\t\t\t<Typography className={ this.props.classes.heading }>\n\t\t\t\t\t\t<div class=\"icon-container\">\n\t\t\t\t\t\t\t<FontAwesomeIcon prefix=\"fab\" icon={ platform.icon } />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{ platform.name }\n\t\t\t\t\t</Typography>\n\t\t\t\t</ExpansionPanelSummary>\n\t\t\t\t<ExpansionPanelDetails>\n\t\t\t\t\t<EditPlatform platform={ platform } change={ this.reload.bind(this) } />\n\t\t\t\t</ExpansionPanelDetails>\n\t\t\t</ExpansionPanel>\n\t\t);\n\t}\n\n\trenderNew () {\n\t\treturn (\n\t\t\t<ExpansionPanel>\n\t\t\t\t<ExpansionPanelSummary expandIcon={<ExpandMoreIcon />}>\n\t\t\t\t\t<Typography className={ this.props.classes.heading }>\n\t\t\t\t\t\tAdd New\n\t\t\t\t\t</Typography>\n\t\t\t\t</ExpansionPanelSummary>\n\t\t\t\t<ExpansionPanelDetails>\n\t\t\t\t\t<CreatePlatform embedded={ true } change={ this.reload.bind(this) } />\n\t\t\t\t</ExpansionPanelDetails>\n\t\t\t</ExpansionPanel>\n\t\t);\n\t}\n\n\trender () {\n\t\treturn (\n\t\t\t<div className=\"fullpage home one-page\">\n\t\t\t\t<div className=\"platform-menu-selector\">\n\t\t\t\t\t{ this.state.platforms.map((platform) => this.renderPlatform(platform)) }\n\t\t\t\t\t<Divider />\n\t\t\t\t\t{ this.renderNew() }\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default withStyles(styles)(Config);","import React, { Component } from 'react';\nimport moment from 'moment';\n\nimport { Slider } from 'material-ui-slider';\nimport { withStyles } from '@material-ui/core/styles';\n\nconst styles = {\n\tslider: {\n\t\tcolor: '#C00',\n\t\twidth: '50px',\n\t\tfloat: 'right',\n\t\tpadding: '22px 0px',\n\t},\n};\n\nclass Draggable {\n\n\tconstructor (timeline) {\n\t\tthis.timeline = timeline;\n\t\tthis.canvasContext = timeline.canvasContext;\n\t}\n\n\tgetX () {\n\t\treturn -1;\n\t}\n\n\tgetCanvasX () {\n\t\tlet state = this.getCanvasState();\n\t\treturn (this.getX() - state.viewportStart) * state.unitMap / state.unit;\n\t}\n\n\tcanDrag (x) {\n\t\treturn false;\n\t}\n\n\tisHit (mousePosition) {\n\t\treturn false;\n\t}\n\n\tstartDrag (mousePosition) {\n\t\tthis.dragging = true;\n\t}\n\n\tmouseMove (mousePosition) {\n\n\t\tlet state = this.getCanvasState();\n\n\t\tlet playheadX = this.getCanvasX();\n\t\tlet cursorPosition = state.cursorPosition;\n\n\t\tif (mousePosition[0] > this.timeline.canvasWidth - 20) {\n\n\t\t\tlet velocity = 1 - (this.timeline.canvasWidth - mousePosition[0]) / 20;\n\n\t\t\treturn [\n\t\t\t\tstate.realViewportStart + velocity,\n\t\t\t\tthis.applyBounds(cursorPosition)\n\t\t\t];\n\n\t\t} else if (mousePosition[0] < 20) {\n\n\t\t\tlet velocity = mousePosition[0] / 20;\n\n\t\t\treturn [\n\t\t\t\tstate.realViewportStart - velocity,\n\t\t\t\tthis.applyBounds(cursorPosition)\n\t\t\t];\n\n\t\t} else {\n\n\t\t\t// Mouse hasn't moved to an extreme\n\t\t\tlet finalCursorPosition = (mousePosition[0] * state.unit / state.unitMap) + state.viewportStart;\n\t\t\tfinalCursorPosition = this.applyBounds(finalCursorPosition);\n\n\t\t\treturn [null, finalCursorPosition];\n\t\t}\n\n\t}\n\n\tapplyBounds (position) {\n\t\treturn Math.max(Math.min(position, this.timeline.end), this.timeline.start);\n\t}\n\n\tsetPositionAndUpdate (value) {\n\n\t}\n\n\tstopDrag (mousePosition) {\n\t\tthis.dragging = false;\n\n\t\tlet state = this.getCanvasState();\n\t\tlet newX = mousePosition[0];\n\n\t\tlet finalPosition = (newX * state.unit / state.unitMap) + state.viewportStart;\n\t\tfinalPosition = this.applyBounds(finalPosition);\n\n\t\tthis.setPositionAndUpdate(finalPosition);\n\t}\n\n\tgetCanvasState () {\n\t\treturn this.timeline.getCanvasState();\n\t}\n\n\tdraw () {\n\n\t}\n\n}\n\nclass Playhead extends Draggable {\n\n\tgetX () {\n\t\tlet state = this.getCanvasState();\n\t\treturn state.cursorPosition;\n\t}\n\n\tisHit (mousePosition) {\n\t\tlet playheadX = this.getCanvasX();\n\n\t\tif (mousePosition[1] <= 28 || mousePosition[1] > 40) {\n\t\t\treturn false;\n\t\t}\n\n\t\tif (mousePosition[0] > playheadX - 10\n\t\t\t\t&& mousePosition[0] < playheadX + 10) {\n\t\t\treturn true;\n\t\t}\n\t}\n\n\tmouseMove (mousePosition) {\n\t\tlet data = super.mouseMove(mousePosition);\n\n\t\tif (data[0] == null) {\n\t\t\tthis.timeline.setState({\n\t\t\t\tcursorPosition: data[1]\n\t\t\t}, () => this.timeline.sendOnChange());\n\t\t} else {\n\t\t\tthis.timeline.setState({\n\t\t\t\tviewportStart: data[0],\n\t\t\t\tcursorPosition: data[1]\n\t\t\t}, () => this.timeline.sendOnChange());\n\t\t}\n\n\t}\n\n\tsetPositionAndUpdate (cursorPosition) {\n\t\tthis.timeline.setState({\n\t\t\tcursorPosition: cursorPosition\n\t\t}, () => this.timeline.sendOnChange());\n\t}\n\n\tstopDrag (mousePosition) {\n\t\tthis.dragging = false;\n\n\t\tlet state = this.getCanvasState();\n\t\tlet playheadX = mousePosition[0];\n\n\t\tlet finalCursorPosition = (playheadX * state.unit / state.unitMap) + state.viewportStart;\n\t\tfinalCursorPosition = Math.max(Math.min(finalCursorPosition, this.timeline.end), this.timeline.start);\n\n\t\tthis.setPositionAndUpdate(finalCursorPosition);\n\t}\n\n\tdraw () {\n\t\tlet state = this.getCanvasState();\n\t\tlet posX = (state.cursorPosition - state.viewportStart) * state.unitMap / state.unit;\n\n\t\tthis.timeline.canvasContext.strokeStyle = '#EEE';\n\t\tthis.timeline.canvasContext.fillStyle = '#EEE';\n\n\t\tthis.timeline.drawLine(posX, 30, posX, 99);\n\n\t\tthis.timeline.canvasContext.fillRect(posX - 7.5, 28, 15, 12);\n\t}\n\n}\n\nclass SegmentTerminus extends Draggable {\n\n\tconstructor (timeline, type) {\n\t\tsuper(timeline);\n\t\tthis.type = type;\n\t}\n\n\tgetX () {\n\t\treturn this.timeline.props[this.getDirectionPropLabel()];\n\t}\n\n\tmouseMove (mousePosition) {\n\t\tlet data = super.mouseMove(mousePosition);\n\n\t\tif (data[0] != null) {\n\t\t\tthis.timeline.setState({\n\t\t\t\tviewportStart: data[0],\n\t\t\t}, () => this.timeline.sendOnChange());\n\t\t}\n\t\tthis.setPositionAndUpdate(data[1])\n\n\t}\n\n\tsetPositionAndUpdate (position) {\n\t\tlet prop = this.timeline.props[this.getDirection() == 'start' ? 'onSegmentStart' : 'onSegmentEnd'];\n\t\tprop && prop(position);\n\t}\n\n\tgetDirection () {\n\t\treturn this.type;\n\t}\n\n\tgetDirectionPropLabel () {\n\t\treturn this.type == 'start' ? 'segmentStart' : 'segmentEnd';\n\t}\n\n\tdraw () {\n\n\t\tlet state = this.getCanvasState();\n\t\tlet posX = (state.cursorPosition - state.viewportStart) * state.unitMap / state.unit;\n\n\t\tthis.timeline.canvasContext.strokeStyle = '#EEE';\n\t\tthis.timeline.canvasContext.fillStyle = '#EEE';\n\n\t\tif (this.getDirection() == 'start') {\n\t\t\tthis.drawStart();\n\t\t} else {\n\t\t\tthis.drawEnd();\n\t\t}\n\n\t}\n\n\tdrawStart () {\n\t\tthis.timeline.canvasContext.fillStyle = 'rgba(220, 0, 0, 0.9)';\n\t\tthis.timeline.canvasContext.fillRect(this.getCanvasX() - 5, 40, 5, 40);\n\t\tthis.timeline.canvasContext.fillRect(this.getCanvasX() - 10, 50, 8, 20);\n\t}\n\n\tdrawEnd () {\n\t\tthis.timeline.canvasContext.fillStyle = 'rgba(220, 0, 0, 0.9)';\n\t\tthis.timeline.canvasContext.fillRect(this.getCanvasX(), 40, 5, 40);\n\t\tthis.timeline.canvasContext.fillRect(this.getCanvasX() + 2, 50, 8, 20);\n\t}\n\n\tisHit (mousePosition) {\n\t\tlet playheadX = this.getCanvasX();\n\n\t\tif (mousePosition[1] < 50 || mousePosition[1] > 70) {\n\t\t\treturn false;\n\t\t}\n\n\t\tlet canvasX = this.getCanvasX();\n\n\t\tif (this.getDirection() == 'start' && mousePosition[0] > canvasX - 10\n\t\t\t\t&& mousePosition[0] < canvasX - 2) {\n\t\t\treturn true;\n\t\t} else if (this.getDirection() == 'end' && mousePosition[0] > canvasX + 2\n\t\t\t\t&& mousePosition[0] < canvasX + 10) {\n\t\t\treturn true;\n\t\t}\n\t}\n\n}\n\nclass Timeline extends Component {\n\n\tstate = {\n\t\tcursorPosition: 60,\n\t\tzoom: 8,\n\t\tviewportStart: 0\n\t}\n\n\tdragging = null;\n\n\tconstructor (props) {\n\t\tsuper(props);\n\t\tthis.playhead = new Playhead(this);\n\n\t\tthis.segments = {\n\t\t\tstart: new SegmentTerminus(this, 'start'),\n\t\t\tend: new SegmentTerminus(this, 'end')\n\t\t}\n\t}\n\n\tshouldComponentUpdate (nextProps, nextState) {\n\n\t\tthis.start = nextProps.start;\n\t\tthis.end = nextProps.end;\n\n\t\tif (this.state.zoom != nextState.zoom) {\n\t\t\treturn true;\n\t\t}\n\n\t\tif (!this.draggingTimeline && !this.dragging && this.props.offset != nextProps.offset) {\n\n\t\t\t// Will updating the offset scroll us out of view?\n\t\t\tlet state = this.getCanvasState();\n\n\t\t\tif (this.props.autoUpdateViewport\n\t\t\t\t\t&& (nextProps.offset < state.viewportStart\n\t\t\t\t\t\t|| nextProps.offset > state.viewportStart + state.viewportWidth)) {\n\t\t\t\tnextState.viewportStart = nextProps.offset - state.viewportWidth / 3;\n\t\t\t}\n\n\t\t\tthis.setState({\n\t\t\t\tcursorPosition: nextProps.offset,\n\t\t\t\tviewportStart: nextState.viewportStart\n\t\t\t})\n\n\t\t\treturn true;\n\n\t\t}\n\n\t\tif (this.state.viewportStart != nextState.viewportStart) {\n\t\t\treturn true;\n\t\t}\n\n\t\tthis.rerender();\n\n\t\treturn false;\n\t}\n\n\tcomponentWillMount () {\n\n\t\tthis.start = this.props.start;\n\t\tthis.end = this.props.end;\n\t\tthis.setState({\n\t\t\tcursorPosition: this.props.offset || this.props.initialOffset,\n\t\t\tviewportStart: this.props.offset || this.props.initialOffset\n\t\t});\n\n\t\tthis.resizeCanvasLocalised = this.resizeCanvas.bind(this);\n\t\twindow.addEventListener('resize', this.resizeCanvasLocalised);\n\t}\n\n\tcomponentWillUnmount () {\n\t\twindow.removeEventListener('resize', this.resizeCanvasLocalised);\n\t}\n\n\tsetCanvas (c) {\n\n\t\tif (this.canvas) {\n\t\t\treturn;\n\t\t}\n\t\tthis.canvas = c;\n\n\t\tthis.resizeCanvas()\n\n\t\t// 2x lets us \n\n\t\tthis.canvasContext = c.getContext('2d');\n\n\t\tthis.drawFullGrid();\n\t\tthis.drawPlayhead();\n\n\t}\n\n\tcomponentDidUpdate () {\n\n\t\tthis.drawFullGrid();\n\n\t}\n\n\tresizeCanvas () {\n\t\tvar dpr = window.devicePixelRatio || 1;\n\t\tthis.canvas.width = this.canvas.offsetWidth * dpr;\n\t\tthis.canvas.height = this.canvas.offsetHeight * dpr;\n\t\tthis.canvas.getContext('2d').scale(dpr, dpr);\n\t\tthis.canvasWidth = this.canvas.offsetWidth;\n\t}\n\n\tgetZoom (level) {\n\t\t// 150\n\t\tlet unitMap = (this.state.zoom || 150), unit = 60, steps = 10;\n\n\t\tif (level < 2) {\n\t\t\treturn [level * 50 + 10, 1800, 6];\n\t\t} else if (level < 4) {\n\t\t\treturn [(level - 2) * 50 + 100, 600, 10];\n\t\t} else if (level < 6) {\n\t\t\treturn [(level - 4) * 50 + 100, 300, 10];\n\t\t} else if (level < 9) {\n\t\t\t// 100 - 200\n\t\t\treturn [(level - 6) * 25 + 100, 60, 10];\n\t\t} else {\n\t\t\treturn [(level - 6) * 25 + 100, 30, 60];\n\t\t}\n\n\t\treturn [150, 60, 10];\n\t}\n\n\tgetCanvasState () {\n\t\t// 150px = 1 unit, based on zoom level\n\t\t// 1 unit = 10 seconds\n\n\t\tlet zoomLevels = this.getZoom(this.state.zoom);\n\n\t\tlet unitMap = zoomLevels[0], unit = zoomLevels[1], steps = zoomLevels[2];\n\n\t\treturn {\n\t\t\tunitMap: unitMap,\n\t\t\tunit: unit,\n\t\t\toffset: 0,\n\t\t\t// visible seconds\n\t\t\tcursorPosition: this.state.cursorPosition,\n\t\t\t// minor units per major unit (10 minor steps (inclusive) every 1 step)\n\t\t\tsteps: steps,\n\t\t\tviewportStart: this.state.viewportStart - 2,\n\t\t\trealViewportStart: this.state.viewportStart,\n\t\t\tviewportWidth: this.canvasWidth / unitMap * unit,\n\t\t}\n\t}\n\n\t/**\n\t * Draws the timeline base grid, between props.start and props.end. \n\t */\n\tdrawFullGrid () {\n\n\t\tlet myDuration = this.end - this.start;\n\n\t\tthis.canvasContext.clearRect(0, 0, this.canvas.width, this.canvas.height);\n\n\t\tlet state = this.getCanvasState();\n\n\t\tthis.drawLine(0, 40, this.canvas.width, 40);\n\n\t\tlet fullWidth = Math.ceil(state.viewportWidth + state.viewportStart);\n\n\t\tfor (var i = Math.floor(state.viewportStart); i < fullWidth; i++) {\n\n\t\t\tlet x = (i - state.viewportStart + this.props.clipDelay) * state.unitMap / state.unit;\n\n\t\t\tlet mySeconds = i;\n\t\t\tlet amIMaj = (i % state.unit) == 0;\n\n\t\t\t// draw major steps\n\t\t\tif ((i % (state.unit / state.steps)) == 0) {\n\n\t\t\t\tthis.canvasContext.strokeStyle = amIMaj ?  '#CCC' : 'rgba(255, 255, 255, 0.3)';\n\n\n\t\t\t\tthis.drawLine(x, 80, x, amIMaj ? 30 : 37);\n\t\t\t}\n\n\t\t\t// draw time code every interval\n\t\t\tif (amIMaj) {\n\t\t\t\tlet timecode = this.timecode(mySeconds);\n\t\t\t\tthis.drawText(x, 15, timecode[0]);\n\t\t\t\tthis.drawText(x, 30, timecode[1]);\n\t\t\t}\n\n\t\t}\n\n\t\tthis.saveCanvas();\n\t\tthis.drawPlayhead();\n\n\t}\n\n\t/**\n\t * Back-up the pixel data so it can be quickly restored without redrawing everything\n\t * This makes redrawing the canvas much faster\n\t */\n\tsaveCanvas () {\n\t\tthis.canvasState = this.canvasContext.getImageData(0,0, this.canvas.width, this.canvas.height);\n\t}\n\n\trestoreCanvas () {\n\t\tthis.canvasContext.putImageData(this.canvasState, 0, 0);\n\t}\n\n\trecenter () {\n\t\tlet state = this.getCanvasState();\n\n\t\tif (!this.draggingTimeline && state.cursorPosition > state.viewportStart + state.viewportWidth) {\n\t\t\tthis.setState({\n\t\t\t\tviewportStart: this.props.offset - state.viewportWidth / 3\n\t\t\t});\n\t\t}\n\t}\n\n\trerender () {\n\t\tif (!this.canvasContext) {\n\t\t\treturn;\n\t\t}\n\n\t\tlet state = this.getCanvasState();\n\n\t\tif (!this.draggingTimeline && this.props.autoUpdateViewport\n\t\t\t\t&& state.cursorPosition > state.viewportStart + state.viewportWidth) {\n\t\t\tthis.setState({\n\t\t\t\tviewportStart: state.cursorPosition - 2\n\t\t\t})\n\t\t\treturn this.fullRender();\n\t\t} else {\n\t\t\tthis.fastRender();\n\t\t}\n\t}\n\n\tfullRender () {\n\t\tthis.drawFullGrid();\n\t}\n\n\tfastRender () {\n\t\tthis.restoreCanvas();\n\t\tthis.drawSegments();\n\t\tthis.drawPlayhead();\n\t}\n\n\tdrawPlayhead () {\n\t\tthis.playhead.draw();\n\t}\n\n\tdrawSegments () {\n\t\tthis.drawSegment({\n\t\t\tstart: this.props.segmentStart,\n\t\t\tend: this.props.segmentEnd\n\t\t})\n\n\t\tthis.segments.start.draw();\n\t\tthis.segments.end.draw();\n\t}\n\n\tdrawSegment (segment) {\n\n\t\tlet state = this.getCanvasState();\n\n\t\tlet startX = (segment.start - state.viewportStart) * state.unitMap / state.unit;\n\t\tlet endX = (segment.end - state.viewportStart) * state.unitMap / state.unit;\n\n\t\t// No point drawing it if it's really far off screen.\n\t\tif (startX > this.canvasWidth + 40 || endX < -40) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.canvasContext.strokeStyle = 'rgba(200, 0, 0, 0.4)';\n\t\tthis.canvasContext.fillStyle = 'rgba(200, 0, 0, 0.7)';\n\n\t\tthis.canvasContext.fillRect(startX, 40, endX - startX, 40);\n\n\t}\n\n\tdrawLine (x1, y1, x2, y2) {\n\t\tthis.canvasContext.beginPath();\n\t\tthis.canvasContext.moveTo(x1, y1);\n\t\tthis.canvasContext.lineTo(x2, y2);\n\t\tthis.canvasContext.stroke();\n\t}\n\n\tdrawText (x1, y1, text) {\n\t\tthis.canvasContext.textAlign = 'center';\n\t\tthis.canvasContext.textBaseline = 'bottom';\n\n\t\tthis.canvasContext.fillStyle = '#FFF';\n\t\tthis.canvasContext.fillText(text, x1, y1);\n\t}\n\n\t/**\n\t * Return mouse X/Y. DPI scaling is irrelevant in our logic\n\t */\n\tgetMousePosition (event) {\n\t\tlet rect = this.canvas.getBoundingClientRect();\n\t\treturn [event.clientX - rect.left, event.clientY - rect.top]\n\t}\n\n\tdraggingPlayhead () {\n\t\treturn this.dragging == this.playhead;\n\t}\n\n\tmouseDown (event) {\n\t\tlet state = this.getCanvasState(), mousePosition = this.getMousePosition(event);\n\n\t\tif (this.playhead.isHit(mousePosition)) {\n\t\t\tthis.dragging = this.playhead;\n\t\t} else if (this.segments.start.isHit(mousePosition)) {\n\t\t\tthis.dragging = this.segments.start;\n\t\t} else if (this.segments.end.isHit(mousePosition)) {\n\t\t\tthis.dragging = this.segments.end;\n\t\t}\n\n\t\tlet playheadX = (state.cursorPosition - state.viewportStart) * state.unitMap / state.unit;\n\n\t\tif (mousePosition[1] >= 40) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.draggingStartX = mousePosition[0];\n\t\tthis.draggingViewportStart = this.state.viewportStart;\n\t\tthis.draggingTimeline = true;\n\t\tthis.hasMovedTimeline = false;\n\n\t\tif (this.playhead.isHit(mousePosition)) {\n\t\t\tthis.draggingTimeline = false;\n\t\t\tthis.dragging = this.playhead;\n\t\t\tthis.playhead.startDrag();\n\t\t}  else if (this.segments.start.isHit(mousePosition) && !this.props.readOnly) {\n\t\t\tthis.draggingTimeline = false;\n\t\t\tthis.dragging = this.segments.start;\n\t\t\tthis.segments.start.startDrag();\n\t\t} else if (this.segments.end.isHit(mousePosition) && !this.props.readOnly) {\n\t\t\tthis.draggingTimeline = false;\n\t\t\tthis.dragging = this.segments.end;\n\t\t\tthis.segments.end.startDrag();\n\t\t}\n\n\t}\n\n\tmouseMove (event) {\n\n\t\tlet state = this.getCanvasState(), mousePosition = this.getMousePosition(event);\n\n\t\tif (this.draggingTimeline) {\n\n\t\t\tlet newX = (this.draggingStartX - mousePosition[0]) * state.unit / state.unitMap;\n\n\t\t\tif (newX != 0) {\n\t\t\t\tthis.hasMovedTimeline = true;\n\t\t\t}\n\n\t\t\tthis.setState({\n\t\t\t\tviewportStart: this.draggingViewportStart + newX\n\t\t\t}, () => {\n\t\t\t\tthis.rerender();\n\t\t\t})\n\n\t\t\treturn;\n\t\t}\n\n\t\tif (!this.dragging) {\n\t\t\treturn;\n\t\t}\n\n\t\tlet data = this.dragging.mouseMove(mousePosition)\n\n\t}\n\n\tmouseUp (event) {\n\n\t\tlet state = this.getCanvasState(), mousePosition = this.getMousePosition(event);\n\n\t\tif (!this.dragging && !this.hasMovedTimeline) {\n\n\t\t\tthis.draggingTimeline = false;\n\n\t\t\tif (mousePosition[1] <= 28 || mousePosition[1] >= 40) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// User clicked timeline without moving it\n\n\t\t\t/* let finalCursorPosition = (mousePosition[0] * state.unit / state.unitMap) + state.viewportStart;\n\n\t\t\tfinalCursorPosition = Math.max(Math.min(finalCursorPosition, this.end), this.start);\n\n\t\t\tthis.setState({\n\t\t\t\tcursorPosition: finalCursorPosition\n\t\t\t}, () => {\n\t\t\t\tthis.rerender();\n\t\t\t\tthis.props.onChange && this.props.onChange(this.state.cursorPosition);\n\t\t\t}) */\n\n\t\t\tthis.playhead.stopDrag(mousePosition);\n\n\t\t\treturn;\n\t\t}\n\n\t\tif (this.draggingTimeline) {\n\t\t\t// User dragged timeline, we don't want to register their drop position as we don't care.\n\t\t\tthis.draggingTimeline = false;\n\t\t\treturn;\n\t\t}\n\n\t\tlet dragging = this.dragging;\n\t\tthis.dragging = null;\n\n\t\tdragging && dragging.stopDrag(mousePosition);\n\n\t}\n\n\tsendOnChange () {\n\t\tthis.props.onChange && this.props.onChange(this.state.cursorPosition);\n\t}\n\n\ttimecode (seconds) {\n\t\tlet date = moment.unix(seconds).local();\n\t\treturn [date.format('DD/MM/YYYY'), date.format('HH:mm:ss')];\n\t}\n\n\tsetZoom (value) {\n\t\t// given the zoom level, work out where the cursor is in pixels & align it properly\n\n\t\tlet state = this.getCanvasState();\n\t\tlet posX = (state.cursorPosition - state.viewportStart) * state.unitMap / state.unit;\n\n\t\tlet newZoom = this.getZoom(value);\n\t\tlet newUnitMap = newZoom[0], newUnit = newZoom[1];\n\n\t\tlet viewportStart = state.cursorPosition - (posX * newUnit / newUnitMap);\n\n\t\tthis.setState({\n\t\t\tzoom: value,\n\t\t\tviewportStart: viewportStart\n\t\t}, () => this.fullRender())\n\t}\n\n\trender () {\n\n\t\treturn <div style={{ textAlign: 'right' }}>\n\t\t\t<div style={ styles.slider }>\n\t\t\t\t<Slider\n\t\t\t\t\tcolor={ styles.slider.color }\n\t\t\t\t\tvalue={ this.state.zoom }\n\t\t\t\t\tmin={ 1 }\n\t\t\t\t\tmax={ 10 }\n\t\t\t\t\tonChange={ (value) => this.setZoom(value) }></Slider>\n\t\t\t</div>\n\t\t\t<canvas\n\t\t\t\tclassName=\"timeline-canvas\"\n\t\t\t\tref={ (c) => this.setCanvas(c) }\n\t\t\t\tonMouseDown={ this.mouseDown.bind(this) }\n\t\t\t\tonMouseMove={ this.mouseMove.bind(this) }\n\t\t\t\tonMouseUp={ this.mouseUp.bind(this) } ></canvas>\n\t\t</div>;\n\n\t}\n\n}\n\nexport default Timeline;","import React, { Component } from 'react';\nimport moment from 'moment';\n\nimport Hls from 'hls.js';\n\nimport { withStyles } from '@material-ui/core/styles';\n\n/**\n * Video is a very simple wrapper of the built-in HTML5 video.\n * \n * It is used to allow very simple external control of a video\n */\nclass Video extends Component {\n\n\tstate = {\n\t\tloading: true,\n\t\ttimecodeBase: 0,\n\t\tdiscontinuity: false\n\t}\n\n\tshouldComponentUpdate (nextProps, nextState) {\n\n\t\t// If the SRC updates anywhere, we need to update.\n\t\tif (this.state.src != nextState.src || this.props.src != nextProps.src) {\n\t\t\treturn true;\n\t\t}\n\n\t\treturn false;\n\t}\n\n\tcomponentWillMount () {\n\n\t\tthis.setSRC();\n\n\t\tif (this.props.hls) {\n\t\t\t// We can't use web workers with WebPack/create-react-app.\n\t\t\t// Setting a large maxBufferHole makes HLS.JS buffer video instead of skipping over anything missing\n\t\t\t// it is VERY annoying on slow connections!\n\t\t\tthis.hls = new Hls({ enableWorker: false, maxBufferHole: 10 });\n\t\t\tthis.registerEvents();\n\t\t}\n\n\t}\n\n\tcomponentDidUpdate (prevProps) {\n\n\t\tif (this.props.src != prevProps.src || this.props.hls != this.props.hls) {\n\t\t\tthis.setSRC();\n\t\t}\n\n\t}\n\n\tregisterEvents () {\n\n\t\tthis.hls.on(Hls.Events.MANIFEST_PARSED, () => {\n\t\t\tthis.setState({\n\t\t\t\tloading: false,\n\t\t\t\tdiscontinuity: false\n\t\t\t})\n\t\t});\n\n\t\tthis.hls.on(Hls.Events.ERROR, (e, data) => {\n\t\t\tconsole.warn('HLS error', e, data)\n\t\t})\n\n\t\tthis.hls.on(Hls.Events.LEVEL_LOADED, (event, data) => {\n\t\t\tlet rawDateTime = data.details.fragments[0].programDateTime;\n\t\t\tlet syncOffset = data.details.fragments[0].start * 1000;\n\n\t\t\t//console.log('setting sync offset', rawDateTime - syncOffset, rawDateTime, syncOffset);\n\n\t\t\t//this.state.discontinuity || this.setState({\n\t\t\t\t//timecodeBase: rawDateTime - syncOffset\n\t\t\t//});\n\t\t});\n\n\t\tthis.hls.on(Hls.Events.FRAG_CHANGED, (event, data) => {\n\t\t\tthis.currentFrag = data.frag;\n\n\t\t\t// 1. find the LATEST fragment\n\t\t\t// 2. work out the currentTime of the start of that fragment\n\t\t\t// 3. discontinuity = that currentTime - expected currentTime\n\n\t\t\t//let fragmentTime = data.frag.programDateTime;\n\t\t\t//let expectedFragmentTime = this.state.timecodeBase + this.video.currentTime * 1000;\n\n\t\t\tconsole.log('CHANGE IN FRAG', data); //, data.frag);\n\n\t\t\tlet discont = data.frag.programDateTime - data.frag.start * 1000;\n\t\t\tconsole.log('discont?', discont)\n\n\t\t\tif (true) {\n\t\t\t\tconsole.log('found discontinuity', discont);\n\t\t\t\tthis.setState({\n\t\t\t\t\ttimecodeBase: discont,\n\t\t\t\t\tdiscontinuity: true\n\t\t\t\t})\n\t\t\t}\n\n\n\t\t});\n\n\t}\n\n\tgetTimecode () {\n\n\t\tif (!this.state.timecodeBase || !this.video) {\n\t\t\treturn 0;\n\t\t}\n\n\t\treturn (this.state.timecodeBase / 1000) + this.video.currentTime;\n\n\t}\n\n\tsetTimecode (timecode) {\n\t\t\n\t\t// If this timecode isn't loaded, return false.\n\t\t// It's the responsibility of our parent element to try and load the manifest at that point.\n\t\tif (timecode < this.state.timecodeBase / 1000) {\n\t\t\tconsole.error('Tried to seek to timecode that isn\\'t loaded');\n\t\t\treturn false;\n\t\t}\n\n\t\tthis.video.currentTime = timecode - this.state.timecodeBase / 1000;\n\t\treturn true;\n\n\t}\n\n\tgetEdgeTimecode () {\n\t\treturn this.state.timecodeBase / 1000 + this.hls.liveSyncPosition;\n\t}\n\n\tsetSRC () {\n\n\t\tthis.setState({\n\t\t\tsrc: this.props.hls ? '' : this.props.src,\n\t\t\thls: this.props.hls,\n\t\t}, () => {\n\t\t\tthis.forceUpdate();\n\t\t\tthis.state.hls && this.loadHLS();\n\t\t});\n\n\t}\n\n\tloadHLS () {\n\n\t\tif (!this.video) {\n\t\t\tthis.pendingLoadHLS = true;\n\t\t}\n\n\t\t// TODO\n\t\tconsole.error('HLS NOT IMPLEMENTED YET')\n\n\t\tthis.hls.loadSource(this.props.src);\n\t\tthis.hls.attachMedia(this.video);\n\n\t}\n\n\tsetVideo (v) {\n\n\t\tif (this.video) {\n\t\t\treturn;\n\t\t}\n\t\tthis.video = v;\n\n\t\tif (this.pendingLoadHLS) {\n\t\t\tthis.pendingLoadHLS = false;\n\t\t\tthis.loadHLS();\n\t\t}\n\n\t}\n\n\tplay () {\n\t\tthis.video.play();\n\t}\n\n\tpause () {\n\t\tthis.video.pause();\n\t}\n\n\tgetFrameRate () {\n\t\treturn 25;\n\t}\n\n\tstepBackwards () {\n\t\tlet frameRate = this.getFrameRate();\n\t\tthis.video.currentTime -= 1/frameRate;\n\t}\n\n\tstepForwards () {\n\t\tlet frameRate = this.getFrameRate();\n\t\tthis.video.currentTime += 1/frameRate;\n\t}\n\n\tseekStart () {\n\t\tthis.setTimecode(this.props.segmentStart);\n\t}\n\n\tseekEnd () {\n\t\tthis.setTimecode(this.props.segmentEnd);\n\t}\n\n\tonVideoStateChange (event) {\n\t\tlet target = event.target;\n\n\t\tlet loadingState = (!this.state.hls && event.type == 'canplay') ? false : this.state.loading;\n\n\t\tthis.setState({\n\t\t\tloading: loadingState,\n\t\t\tvideoState: {\n\t\t\t\tplaying: (!target.paused && !target.ended && !loadingState && target.currentTime >= 0)\n\t\t\t}\n\t\t}, () => this.props.onStateChange && this.props.onStateChange(this.state.videoState));\n\t}\n\n\trender () {\n\n\t\tlet props = Object.assign({}, this.props);\n\t\tprops.src = this.state.src;\n\n\t\treturn <video\n\t\t\tref={ (v) => this.setVideo(v) }\n\t\t\tonPlay={ this.onVideoStateChange.bind(this) }\n\t\t\tonCanPlay={ this.onVideoStateChange.bind(this) }\n\t\t\tonPause={ this.onVideoStateChange.bind(this) }\n\t\t\tonEnded={ this.onVideoStateChange.bind(this) }\n\t\t\t{...props} />;\n\t}\n\n}\n\nexport default Video;","import React, { Component } from 'react';\nimport moment from 'moment';\n\nimport { withStyles } from '@material-ui/core/styles';\n\nimport Button from '@material-ui/core/Button';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\n\n/**\n * VideoControls is a simple stepped component to allow a specified video to be controlled.\n * \n * It is used to allow very simple external control of a video\n */\nclass VideoControls extends Component {\n\n\tcomponentWillMount () {\n\n\t}\n\n\tplayPause () {\n\t\tthis.props.videoState.playing ? this.props.video.pause() : this.props.video.play();\n\t}\n\n\tseekStart () {\n\t\tthis.props.video.seekStart();\n\t}\n\n\tseekEnd () {\n\t\tthis.props.video.seekEnd();\n\t}\n\n\tstepBackwards () {\n\t\tthis.props.video.stepBackwards();\n\t}\n\n\tstepForwards () {\n\t\tthis.props.video.stepForwards();\n\t}\n\n\trender () {\n\n\t\treturn (\n\t\t\t<div className=\"video-controls\">\n\t\t\t\t<div className=\"video-controls-toolbar \">\n\t\t\t\t\t<Button variant=\"outlined\" color=\"white\" onClick={ this.playPause.bind(this) }>\n\t\t\t\t\t\t<FontAwesomeIcon icon={ this.props.videoState.playing ? 'pause' : 'play' } />\n\t\t\t\t\t</Button>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"video-controls-toolbar flex-right\">\n\t\t\t\t\t<Button variant=\"outlined\" color=\"white\" onClick={ this.seekStart.bind(this) }>\n\t\t\t\t\t\t<b>{ '{' }</b> <FontAwesomeIcon icon=\"long-arrow-alt-left\" />\n\t\t\t\t\t</Button>\n\t\t\t\t\t<Button variant=\"outlined\" color=\"white\" onClick={ this.stepBackwards.bind(this) }>\n\t\t\t\t\t\t<FontAwesomeIcon icon=\"step-backward\" />\n\t\t\t\t\t</Button>\n\t\t\t\t\t<Button variant=\"outlined\" color=\"white\" onClick={ this.stepForwards.bind(this) }>\n\t\t\t\t\t\t<FontAwesomeIcon icon=\"step-forward\" />\n\t\t\t\t\t</Button>\n\t\t\t\t\t<Button variant=\"outlined\" color=\"white\" onClick={ this.seekEnd.bind(this) }>\n\t\t\t\t\t\t<FontAwesomeIcon icon=\"long-arrow-alt-right\" /> <b>{ '}' }</b>\n\t\t\t\t\t</Button>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n\n}\n\nexport default VideoControls;","import React, { Component } from 'react';\n\nimport TimelineComponent from '../components/Timeline';\n\nimport Video from '../components/Video';\nimport VideoControls from '../components/VideoControls';\n\nimport { withStyles } from '@material-ui/core/styles';\nimport Button from '@material-ui/core/Button';\n\nimport AppBar from '@material-ui/core/AppBar';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport Typography from '@material-ui/core/Typography';\nimport IconButton from '@material-ui/core/IconButton';\nimport Switch from '@material-ui/core/Switch';\nimport FormGroup from '@material-ui/core/FormGroup';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport Menu from '@material-ui/core/Menu';\n\nimport Checkbox from '@material-ui/core/Checkbox';\nimport Radio from '@material-ui/core/Radio';\nimport RadioGroup from '@material-ui/core/RadioGroup';\nimport FormHelperText from '@material-ui/core/FormHelperText';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport FormControl from '@material-ui/core/FormControl';\nimport FormLabel from '@material-ui/core/FormLabel';\nimport TextField from '@material-ui/core/TextField';\n\nconst styles = theme => ({\n\tbutton: {\n\t\tmargin: theme.spacing.unit,\n\t},\n});\n\n\nclass Frame extends Component {\n\n\tthemeConfig = {\n\t\ttext: {\n\t\t\tline1: {\n\t\t\t\tx: (state) => state['layers.logo'] ? 350 : 512,\n\t\t\t\ty: 155,\n\t\t\t\tw: (state) => state['layers.logo'] ? 600 : 915,\n\t\t\t\th: 125,\n\t\t\t\tmaxFont: 80,\n\t\t\t\twrap: {\n\t\t\t\t\tminFont: 40\n\t\t\t\t},\n\t\t\t\ttextAlign: (state) => state['layers.logo'] ? 'start' : 'middle',\n\t\t\t\ttextBaseline: 'middle'\n\t\t\t},\n\t\t\tline2: {\n\t\t\t\tx: 512,\n\t\t\t\ty: 900,\n\t\t\t\tw: 915,\n\t\t\t\th: 175,\n\t\t\t\tmaxFont: 70,\n\t\t\t\twrap: {\n\t\t\t\t\tminFont: 40\n\t\t\t\t},\n\t\t\t\ttextAlign: 'center',\n\t\t\t\ttextBaseline: 'middle'\n\t\t\t}\n\t\t}\n\t}\n\n\tcanva = {};\n\n\tstate = {\n\t\t'line1': '',\n\t\t'line2': '',\n\t\t'layers.logo': true,\n\t\t'layers.background': false,\n\t\t'layers.foreground': true,\n\t\tvideo: {\n\t\t\tplaying: false\n\t\t}\n\t}\n\n\tcomponentWillMount () {\n\t\ttry {\n\t\t\tlet initialStateData = JSON.parse(this.props.initialState);\n\t\t\tdelete initialStateData.raw;\n\t\t\tthis.setState(initialStateData);\n\t\t} catch (e) {\n\t\t}\n\t}\n\n\tsetLayer (canvas, layer) {\n\n\t\tif (this.canva[layer]) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.canva[layer] = canvas;\n\n\t\tcanvas.width = canvas.height = 1024;\n\n\t\tif (layer == 'text') {\n\t\t\tthis.rerender();\n\t\t\treturn;\n\t\t}\n\n\t\tvar image = new Image();\n\t\timage.onload = () => {\n\t\t\tcanvas.getContext('2d').drawImage(image, 0, 0, 1024, 1024);\n\t\t}\n\n\t\timage.src = '/frames/demo/' + layer + '.png';\n\n\t}\n\n\tclearText () {\n\t\tlet canvas = this.canva['text'];\n\t\tlet context = canvas.getContext('2d');\n\t\tcontext.clearRect(0, 0, canvas.width, canvas.height);\n\n\t}\n\n\t/**\n\t * Evaluates the configuration given the current state. Useful for dynamic width/heights\n\t */\n\tevaluateConfig (config) {\n\n\t\tlet newConfig = Object.assign({}, config);\n\n\t\tfor (var i in newConfig) {\n\t\t\tif (typeof newConfig[i] == 'function') {\n\t\t\t\tnewConfig[i] = newConfig[i](this.state);\n\t\t\t}\n\t\t}\n\n\t\treturn newConfig;\n\n\t}\n\n\t/**\n\t * Draws the given line of text.\n\t */\n\tdrawText (config, line) {\n\n\t\tconfig = this.evaluateConfig(config);\n\t\tlet context = this.canva['text'].getContext('2d');\n\n\t\tcontext.fillStyle = 'white';\n\t\tcontext.textAlign = config.textAlign;\n\t\tcontext.textBaseline = config.textBaseline;\n\n\t\tvar size = config.maxFont;\n\n\t\tif (config.wrap == false) {\n\n\t\t\tdo {\n\t\t\t\tcontext.font = \"bold \" + size + \"px Bebas Neue\";\n\t\t\t\tsize -= 5;\n\t\t\t} while (context.measureText(line).width > config.w);\n\n\t\t\tcontext.fillText(line, config.x, config.y);\n\t\t\treturn;\n\n\t\t}\n\n\t\tlet i = 0;\n\n\t\tlet BREAK_CHARACTER = '^';\n\n\t\tlet words = line.split(' ');\n\n\t\tif (line.indexOf(BREAK_CHARACTER) == -1) {\n\t\t\twhile (true) {\n\n\t\t\t\tcontext.font = \"bold \" + size + \"px Bebas Neue\";\n\t\t\t\tsize -= 5;\n\n\t\t\t\tif (context.measureText(line).width <= config.w) {\n\t\t\t\t\t// Single line!\n\t\t\t\t\tcontext.fillText(line, config.x, config.y);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (size <= config.wrap.minFont) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tfor (i = words.length; i > 0; i--) {\n\t\t\t\tlet phrase = words.slice(0, i).join(' ');\n\t\t\t\tif (context.measureText(phrase).width < config.w) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\t\t} else {\n\t\t\ti = 1;\n\t\t\twords = line.split(BREAK_CHARACTER);\n\t\t}\n\t\t\n\t\tsize = config.wrap.minFont;\n\n\n\t\tcontext.font = \"bold \" + size + \"px Bebas Neue\";\n\t\tcontext.fillText(words.slice(0, i).join(' '), config.x, config.y - size * 0.7);\n\t\tcontext.fillText(words.slice(i, words.length).join(' '), config.x, config.y + size * 0.7);\n\n\t}\n\n\tonValueChange(control, modifier, event) {\n\n\t\tlet value = (event.target.type == 'checkbox') ? event.target.checked : event.target.value;\n\n\t\tif (modifier != null) {\n\t\t\tvalue = modifier(value);\n\t\t}\n\n\t\tthis.setState({\n\t\t\t[control]: value\n\t\t}, () => this.rerender());\n\n\t}\n\n\trerender () {\n\t\tthis.clearText();\n\t\tthis.drawText(this.themeConfig.text.line1, this.state.line1);\n\t\tthis.drawText(this.themeConfig.text.line2, this.state.line2);\n\t}\n\n\tgetStyleForLayer (layer) {\n\n\t\tif (typeof this.state['layers.' + layer] != 'undefined') {\n\t\t\treturn this.state['layers.' + layer] ? {} : { display: 'none'}\n\t\t}\n\n\t\treturn {};\n\n\t}\n\n\texportData () {\n\t\tlet background = this.mergeLayers(['background'], '#000000');\n\t\tlet foreground = this.mergeLayers(['text', 'logo', 'foreground']);\n\n\t\tlet data = {\n\t\t\t'line1': this.state.line1,\n\t\t\t'line2': this.state.line2,\n\t\t\t'layers.logo': this.state['layers.logo'],\n\t\t\t'layers.background': this.state['layers.background'],\n\t\t\t'layers.foreground': this.state['layers.foreground'],\n\t\t\traw: {\n\t\t\t\tbackground: background,\n\t\t\t\tforeground: foreground\n\t\t\t}\n\t\t}\n\n\t\treturn JSON.stringify(data);\n\t}\n\n\tmergeLayers (layers, backgroundColour) {\n\n\t\tlet canvas = document.createElement('canvas');\n\t\tcanvas.width = canvas.height = this.canva[layers[0]].width;\n\t\tlet context = canvas.getContext('2d');\n\n\t\tif (backgroundColour != undefined) {\n\t\t\tcontext.fillStyle = backgroundColour;\n\t\t\tcontext.fillRect(0, 0, canvas.width, canvas.height);\n\t\t}\n\n\t\tfor (var i = 0; i < layers.length; i++) {\n\t\t\tcontext.drawImage(this.canva[layers[i]], 0, 0);\n\t\t}\n\n\t\treturn canvas.toDataURL();\n\t}\n\n\tsetVideo (video) {\n\t\tif (this.video) {\n\t\t\treturn false;\n\t\t}\n\t\tthis.video = video;\n\t\tthis.forceUpdate();\n\t}\n\n\tsetVideoState (state) {\n\t\tthis.setState({\n\t\t\tvideo: state\n\t\t})\n\t}\n\n\trender () {\n\t\treturn (\n\n\t\t\t<div class=\"fullpage\">\n\n\t\t\t\t<div class=\"video-container\">\n\n\t\t\t\t\t<div class=\"video-preview-square\">\n\n\t\t\t\t\t\t<canvas ref={ (r) => this.setLayer(r, 'background') } className=\"layer-0\" style={ this.getStyleForLayer('background') } />\n\t\t\t\t\t\t<div className={ this.state['layers.background'] ? \"layer-1 video-layer\" : \"layer-1 video-layer video-layer-stretch\"} >\n\t\t\t\t\t\t\t<Video\n\t\t\t\t\t\t\t\tref={ (v) => this.setVideo(v) }\n\t\t\t\t\t\t\t\thls={ true }\n\t\t\t\t\t\t\t\tsrc={ this.props.previewSRC}\n\t\t\t\t\t\t\t\tstyle={ this.getStyleForLayer('video') } \n\t\t\t\t\t\t\t\tonStateChange={ (state) => this.setVideoState(state) }\n\t\t\t\t\t\t\t\tsegmentStart = { 0 }\n\t\t\t\t\t\t\t\tsegmentEnd = { 10 } />\n\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<canvas ref={ (r) => this.setLayer(r, 'text') } className=\"layer-2\" style={ this.getStyleForLayer('text') } />\n\t\t\t\t\t\t<canvas ref={ (r) => this.setLayer(r, 'logo') } className=\"layer-3\" style={ this.getStyleForLayer('logo') } />\n\t\t\t\t\t\t<canvas ref={ (r) => this.setLayer(r, 'foreground') } className=\"layer-4\" style={ this.getStyleForLayer('foreground') } />\n\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<VideoControls video={ this.video } videoState={ this.state.video } />\n\n\t\t\t\t</div>\n\n\n\t\t\t\t<div class=\"video-side\">\n\n\t\t\t\t\t<div class=\"video-selector\">\n\n\t\t\t\t\t\t<AppBar position=\"static\">\n\t\t\t\t\t\t\t<Toolbar>\n\t\t\t\t\t\t\t\t<div style={{ flex: 1 }}>{ this.props.coreImportObj.title }</div>\n\t\t\t\t\t\t\t</Toolbar>\n\t\t\t\t\t\t</AppBar>\n\n\t\t\t\t\t\t<div class=\"side-content\">\n\n\t\t\t\t\t\t\t<FormControlLabel control={<Checkbox checked={ true } value=\"checkedC\" />} label=\"Enable Frame\" />\n\n\t\t\t\t\t\t\t<br />\n\n\t\t\t\t\t\t\t<FormControlLabel\n\t\t\t\t\t\t\t\tcontrol={<Checkbox checked={ this.state['layers.logo'] }\n\t\t\t\t\t\t\t\tonChange={ this.onValueChange.bind(this, 'layers.logo', null) }\n\t\t\t\t\t\t\t\tvalue=\"true\" />} label=\"Show Logo\" />\n\n\t\t\t\t\t\t\t<h2 class=\"side-title\">Text Settings</h2>\n\n\t\t\t\t\t\t\t<TextField\n\t\t\t\t\t\t\t\tvalue={ this.state.line1 }\n\t\t\t\t\t\t\t\tonChange={ this.onValueChange.bind(this, 'line1', null) }\n\t\t\t\t\t\t\t\tlabel=\"Show Title Text (Top Line)\"\n\t\t\t\t\t\t\t\tstyle={{ width: '100%'}} />\n\n\t\t\t\t\t\t\t<TextField\n\t\t\t\t\t\t\t\tvalue={ this.state.line2 }\n\t\t\t\t\t\t\t\tonChange={ this.onValueChange.bind(this, 'line2', null) }\n\t\t\t\t\t\t\t\tlabel=\"Segment Title Text (Bottom Line)\"\n\t\t\t\t\t\t\t\tstyle={{ width: '100%'}} />\n\n\t\t\t\t\t\t\t<h2 class=\"side-title\">Frame Settings</h2>\n\n\t\t\t\t\t\t\t<FormControlLabel\n\t\t\t\t\t\t\t\tcontrol={<Checkbox checked={ this.state['layers.foreground'] }\n\t\t\t\t\t\t\t\tonChange={ this.onValueChange.bind(this, 'layers.foreground', null) }\n\t\t\t\t\t\t\t\tvalue=\"true\" />} label=\"Foreground Graphics\" />\n\t\t\t\t\t\t\t<Button color=\"secondary\">\n\t\t\t\t\t\t\t\tBrowse\n\t\t\t\t\t\t\t</Button>\n\n\n\t\t\t\t\t\t\t<p class=\"label-hint\">(Check me to enable the graphics in the theme that can overlap the video)</p>\n\n\t\t\t\t\t\t\t<RadioGroup\n\t\t\t\t\t\t\t\tonChange={ this.onValueChange.bind(this, 'layers.background', (value) => value == 'true')}\n\t\t\t\t\t\t\t\tvalue={ this.state['layers.background'] }>\n\n\t\t\t\t\t\t\t\t<FormControlLabel control={ <Radio color=\"primary\" /> } label={ <div>Background Graphic&nbsp;&nbsp;\n\t\t\t\t\t\t\t\t\t<Button color=\"secondary\">\n\t\t\t\t\t\t\t\t\t\tBrowse\n\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t</div> } value={ true } />\n\n\t\t\t\t\t\t\t\t<p class=\"label-hint\"></p>\n\n\t\t\t\t\t\t\t\t<FormControlLabel control={ <Radio color=\"primary\" /> } label=\"Fit To Screen\" value={ false } />\n\n\t\t\t\t\t\t\t</RadioGroup>\n\n\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\tvariant=\"contained\"\n\t\t\t\t\t\t\t\t\tcolor=\"secondary\"\n\t\t\t\t\t\t\t\t\tfullWidth={ true }\n\t\t\t\t\t\t\t\t\tonClick={ this.props.saveAndClose.bind(this, this.exportData.bind(this)) }\n\t\t\t\t\t\t\t\t\tclassName=\"padded-button\">\n\t\t\t\t\t\t\t\tSave &amp; Return\n\t\t\t\t\t\t\t</Button>\n\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t</div>\n\n\t\t);\n\t}\n}\n\nexport default withStyles(styles)(Frame);\n\t","import React, { Component } from 'react';\nimport { withStyles } from '@material-ui/core/styles';\n\nimport Button from '@material-ui/core/Button';\n\nclass VideoThumbnail extends Component {\n\n\trender () {\n\t\treturn (\n\t\t\t<div className=\"video-thumbnail-video\">\n\t\t\t\t<Button variant=\"outlined\" onClick={ this.props.onClick }>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<img src={ this.props.thumbnail } />\n\t\t\t\t\t\t<p>{ this.props.title }</p>\n\t\t\t\t\t</div>\n\t\t\t\t</Button>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default VideoThumbnail;\n","import React, { Component } from 'react';\nimport { withStyles } from '@material-ui/core/styles';\n\n\nclass VideoThumbnailContainer extends Component {\n\n\trender () {\n\t\treturn (\n\t\t\t<div className=\"video-thumbnail-container\">\n\t\t\t\t{ this.props.children }\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default VideoThumbnailContainer;\n","import React, { Component } from 'react';\nimport moment from 'moment';\n\nimport { withStyles } from '@material-ui/core/styles';\n\nimport Button from '@material-ui/core/Button';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\n\nimport Menu from '@material-ui/core/Menu';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport TextField from '@material-ui/core/TextField';\n\nlet styles = {\n\ttextField: {\n\t\tfontSize: '10pt'\n\t},\n\ttopRowButton: {\n\t\tminWidth: '30px'\n\t}\n}\n\n/**\n * AbsoluteTimePicker renders all the necessary bits to select a cue point with very high accuracy.\n */\nclass AbsoluteTimePicker extends Component {\n\n\tcomponentWillMount () {\n\n\t}\n\n\tplayPause () {\n\t\tthis.props.videoState.playing ? this.props.video.pause() : this.props.video.play();\n\t}\n\n\tseekStart () {\n\n\t}\n\n\tseekEnd () {\n\n\t}\n\n\tstepBackwards () {\n\t\tthis.props.video.stepBackwards();\n\t}\n\n\tstepForwards () {\n\t\tthis.props.video.stepForwards();\n\t}\n\n\tformat (dateTime) {\n\t\treturn dateTime;\n\t}\n\n\ttimecode (seconds) {\n\t\tlet date = moment.unix(seconds).local();\n\t\treturn [date.format('DD/MM/YYYY HH:mm:ss.SSS Z')];\n\t}\n\n\tsetBackwards () {\n\t\tthis.triggerOnChange(this.props.value - (1 / this.props.video.getFrameRate()));\n\t}\n\n\tsetForwards () {\n\t\tthis.triggerOnChange(this.props.value + (1 / this.props.video.getFrameRate()));\n\t}\n\n\tsetNow () {\n\t\tthis.triggerOnChange(this.props.video.getTimecode());\n\t}\n\n\ttriggerOnChange (value) {\n\t\tconsole.log('trigger on change', value, this.props.onChange)\n\t\tthis.props.onChange && this.props.onChange(value);\n\t}\n\n\trender () {\n\n\t\treturn (\n\t\t\t<div className=\"absolute-time-container\">\n\n\t\t\t\t<TextField\n\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\tmargin=\"normal\"\n\t\t\t\t\tstyle={{ width: '270px', flex: '1' }}\n\t\t\t\t\tInputProps={{\n\t\t\t\t\t\tclasses: {\n\t\t\t\t\t\t\tinput: this.props.classes.textField\n\t\t\t\t\t\t}\n\t\t\t\t\t}}\n\t\t\t\t\tlabel={ this.props.label }\n\t\t\t\t\tvalue={ this.timecode(this.props.value - this.props.clipDelay)[0] }\n\t\t\t\t\tonChange={ (a) => '' } />\n\n\t\t\t\t<div class=\"absolute-time-button-array\">\n\t\t\t\t\t<Button\n\t\t\t\t\t\t\tonClick={ this.setBackwards.bind(this) }\n\t\t\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\t\t\tcolor=\"white\"\n\t\t\t\t\t\t\tsize=\"small\"\n\t\t\t\t\t\t\tclassName={ this.props.classes.topRowButton }>\n\t\t\t\t\t\t<FontAwesomeIcon icon=\"step-backward\" />\n\t\t\t\t\t</Button>\n\t\t\t\t\t<Button\n\t\t\t\t\t\t\tonClick={ this.setNow.bind(this) }\n\t\t\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\t\t\tcolor=\"white\"\n\t\t\t\t\t\t\tsize=\"small\"\n\t\t\t\t\t\t\tclassName={ this.props.classes.topRowButton }>\n\t\t\t\t\t\t<FontAwesomeIcon icon=\"stopwatch\" />\n\t\t\t\t\t</Button>\n\t\t\t\t\t<Button\n\t\t\t\t\t\t\tonClick={ this.setForwards.bind(this) }\n\t\t\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\t\t\tcolor=\"white\"\n\t\t\t\t\t\t\tsize=\"small\"\n\t\t\t\t\t\t\tclassName={ this.props.classes.topRowButton }>\n\t\t\t\t\t\t<FontAwesomeIcon icon=\"step-forward\" />\n\t\t\t\t\t</Button>\n\t\t\t\t</div>\n\n\t\t\t</div>\n\t\t);\n\t}\n\n}\n\nexport default withStyles(styles)(AbsoluteTimePicker);","import React, { Component } from 'react';\nimport { withStyles } from '@material-ui/core/styles';\n\nimport AirTower from '../network/AirTower';\n\nimport VideoThumbnail from '../components/VideoThumbnail.jsx';\nimport VideoThumbnailContainer from '../components/VideoThumbnailContainer.jsx';\n\nimport Button from '@material-ui/core/Button';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport TextField from '@material-ui/core/TextField';\nimport Typography from '@material-ui/core/Typography';\n\nimport AbsoluteTimePicker from '../components/AbsoluteTimePicker';\n\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\n\n\nclass VideoSelectorNew extends Component {\n\n\tstate = {\n\t\tcuePoint: '1.0',\n\t\tname: '',\n\t\tfile: null,\n\t\tuploading: false\n\t}\n\n\thandleClose () {\n\t\tthis.props.onClose(undefined);\n\t}\n\n\thandleSelect (slate) {\n\t\tthis.props.onClose(slate);\n\t}\n\n\thandleSelect (slate) {\n\t\tif (isNaN(parseFloat(this.state.cuePoint)) || !this.state.file || this.state.name.length < 4) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.setState({\n\t\t\tuploading: true\n\t\t});\n\n\t\tlet airTower = AirTower.getInstance().core;\n\t\tairTower.uploadSlate(this.state.name, this.state.file, parseFloat(this.state.cuePoint))\n\t\t\t.then((slate) => this.props.onClose(slate))\n\t}\n\n\tselectFile (file) {\n\t\tthis.setState({\n\t\t\tfile: file\n\t\t})\n\t}\n\n\tsetData (name, event) {\n\t\tthis.setState({\n\t\t\t[name]: event.target.value\n\t\t})\n\t}\n\n\trender () {\n\t\treturn (\n\t\t\t<Dialog open={ true } scroll=\"paper\">\n\t\t\t\t<DialogTitle>Upload New Video</DialogTitle>\n\n\t\t\t\t<DialogContent>\n\n\t\t\t\t\t<TextField\n\t\t\t\t\t\tlabel=\"Name\"\n\t\t\t\t\t\tonChange={ this.setData.bind(this, 'name') }\n\t\t\t\t\t\tvalue={ this.state.name }\n\t\t\t\t\t\ttype=\"text\" />\n\t\t\t\t\t<br />\n\n\t\t\t\t\t<input\n\t\t\t\t\t\ttype=\"file\"\n\t\t\t\t\t\tonChange={ (e) => this.selectFile(e.target.files[0]) } />\n\t\t\t\t\t<br />\n\n\t\t\t\t\t<TextField\n\t\t\t\t\t\tlabel=\"Cue Point\"\n\t\t\t\t\t\tonChange={ this.setData.bind(this, 'cuePoint') }\n\t\t\t\t\t\tvalue={ this.state.cuePoint }\n\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\tplaceholder=\"0.00\"\n\t\t\t\t\t\tmask=\"[0-9]+(\\.[0-9]{1,2})?\" />\n\n\t\t\t\t</DialogContent>\n\n\t\t\t\t<DialogActions>\n\t\t\t\t\t<Button\n\t\t\t\t\t\t\tonClick={ this.handleClose.bind(this) }\n\t\t\t\t\t\t\tdisabled={ this.state.uploading }\n\t\t\t\t\t\t\tcolor=\"secondary\">\n\t\t\t\t\t\tCancel\n\t\t\t\t\t</Button>\n\t\t\t\t\t<Button\n\t\t\t\t\t\t\tonClick={ this.handleSelect.bind(this) }\n\t\t\t\t\t\t\tdisabled={ this.state.uploading }\n\t\t\t\t\t\t\tcolor=\"secondary\"\n\t\t\t\t\t\t\tautoFocus>\n\t\t\t\t\t\tUpload\n\t\t\t\t\t</Button>\n\t\t\t\t</DialogActions>\n\t\t\t</Dialog>\n\t\t);\n\t}\n}\n\nexport default VideoSelectorNew;\n","import React, { Component } from 'react';\nimport { withStyles } from '@material-ui/core/styles';\n\nimport AirTower from '../network/AirTower';\n\nimport VideoThumbnail from '../components/VideoThumbnail.jsx';\nimport VideoThumbnailContainer from '../components/VideoThumbnailContainer.jsx';\n\nimport Button from '@material-ui/core/Button';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport DialogActions from '@material-ui/core/DialogActions';\n\nimport VideoSelectorNew from './VideoSelectorNew';\n\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\n\nclass VideoSelector extends Component {\n\n\tstate = {\n\t\tdialog: '',\n\t\tslates: []\n\t}\n\n\tcomponentWillMount () {\n\t\tthis.loadSlates();\n\t}\n\n\tloadSlates () {\n\t\tlet airTower = AirTower.getInstance().core;\n\n\t\tairTower.loadSlates().then((slates) => this.setState({ slates }))\n\t}\n\n\thandleClose () {\n\t\tthis.props.onClose(undefined);\n\t}\n\n\thandleSelect (slate) {\n\t\tthis.props.onClose(slate)\n\t}\n\n\topenNew () {\n\t\tthis.setState({\n\t\t\tdialog: 'new'\n\t\t})\n\t}\n\n\tcloseSlateView (saveData) {\n\t\tthis.props.onClose(saveData);\n\t}\n\n\trender () {\n\t\treturn (\n\t\t\t<Dialog open={ true } maxWidth={ 'xl' } scroll=\"paper\">\n\t\t\t\t<DialogTitle>Select Video</DialogTitle>\n\n\t\t\t\t{ this.state.dialog == 'new' && (\n\t\t\t\t\t<VideoSelectorNew\n\t\t\t\t\t\tonClose={ this.closeSlateView.bind(this) } />\n\t\t\t\t)}\n\n\t\t\t\t<DialogContent>\n\t\t\t\t\t<VideoThumbnailContainer>\n\t\t\t\t\t\t{ this.state.slates.map((slate) => (\n\t\t\t\t\t\t\t<VideoThumbnail\n\t\t\t\t\t\t\t\tthumbnail={ slate.getThumbnailPath() }\n\t\t\t\t\t\t\t\ttitle={ slate.name }\n\t\t\t\t\t\t\t\tonClick={ this.handleSelect.bind(this, slate) } />\n\t\t\t\t\t\t))}\n\n\t\t\t\t\t\t<div className=\"video-thumbnail-video\">\n\t\t\t\t\t\t\t<Button variant=\"outlined\" onClick={ this.openNew.bind(this) }>\n\t\t\t\t\t\t\t\t<FontAwesomeIcon icon=\"plus\" />\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</VideoThumbnailContainer>\n\t\t\t\t</DialogContent>\n\n\t\t\t\t<DialogActions>\n\t\t\t\t\t<Button onClick={ this.handleClose.bind(this) } color=\"secondary\">\n\t\t\t\t\t\tCancel\n\t\t\t\t\t</Button>\n\t\t\t\t</DialogActions>\n\t\t\t</Dialog>\n\t\t);\n\t}\n}\n\nexport default VideoSelector;\n","import React, { Component } from 'react';\n\nimport TimelineComponent from '../components/Timeline';\n\nimport Video from '../components/Video';\nimport VideoControls from '../components/VideoControls';\n\nimport VideoSelectorDialog from './VideoSelector';\n\nimport { withStyles } from '@material-ui/core/styles';\nimport Button from '@material-ui/core/Button';\n\nimport AppBar from '@material-ui/core/AppBar';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport Typography from '@material-ui/core/Typography';\nimport IconButton from '@material-ui/core/IconButton';\nimport Switch from '@material-ui/core/Switch';\nimport FormGroup from '@material-ui/core/FormGroup';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport Menu from '@material-ui/core/Menu';\n\nimport Checkbox from '@material-ui/core/Checkbox';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport FormControl from '@material-ui/core/FormControl';\nimport FormLabel from '@material-ui/core/FormLabel';\nimport Select from '@material-ui/core/Select';\n\nconst styles = theme => ({\n\tbutton: {\n\t\tmargin: theme.spacing.unit,\n\t},\n});\n\n\nclass Slate extends Component {\n\n\tstate = {\n\t\t'intro_slate_id': null,\n\t\t'outro_slate_id': null,\n\t\t'intro_slate_name': 'None',\n\t\t'outro_slate_name': 'None',\n\n\t\tdialog: null,\n\n\t\tvideoSRC: '/slates/default/intro.mp4',\n\t\tvideo: {\n\t\t\tplaying: false\n\t\t}\n\t}\n\n\tcomponentWillMount () {\n\t\ttry {\n\t\t\tlet initialStateData = JSON.parse(this.props.initialState);\n\t\t\tdelete initialStateData.raw;\n\t\t\tthis.setState(initialStateData);\n\t\t} catch (e) {\n\t\t}\n\t}\n\n\n\tonValueChange(control, modifier, event) {\n\n\t\tlet value = (event.target.type == 'checkbox') ? event.target.checked : event.target.value;\n\n\t\tif (modifier != null) {\n\t\t\tvalue = modifier(value);\n\t\t}\n\n\t\tthis.setState({\n\t\t\t[control]: value\n\t\t}, () => this.rerender());\n\n\t}\n\n\texportData () {\n\t\tlet data = {\n\t\t\t'intro_slate_id': this.state.intro_slate_id,\n\t\t\t'outro_slate_id': this.state.outro_slate_id,\n\t\t\t'intro_slate_name': this.state.intro_slate_name,\n\t\t\t'outro_slate_name': this.state.outro_slate_name\n\t\t}\n\n\t\treturn JSON.stringify(data);\n\t}\n\n\tsetVideo (video) {\n\t\tif (this.video) {\n\t\t\treturn false;\n\t\t}\n\t\tthis.video = video;\n\t\tthis.forceUpdate();\n\t}\n\n\tsetVideoState (state) {\n\t\tthis.setState({\n\t\t\tvideo: state\n\t\t})\n\t}\n\n\tpreview (type) {\n\t\tlet id = this.state[type + '_slate_id'];\n\n\t\tthis.setState({\n\t\t\tvideoSRC: '/api/slates/' + id + '/download.mp4'\n\t\t}, () => this.video.play())\n\t}\n\n\tselectSlate (type) {\n\t\tthis.setState({\n\t\t\tdialog: 'video_selector',\n\t\t\tdialogArg: type\n\t\t})\n\t}\n\n\tcloseSlateView (saveData) {\n\t\tif (saveData != undefined) {\n\t\t\tthis.setState({\n\t\t\t\t[this.state.dialogArg + '_slate_id']: saveData.id,\n\t\t\t\t[this.state.dialogArg + '_slate_name']: saveData.name,\n\t\t\t})\n\t\t}\n\t\tthis.setState({\n\t\t\tdialog: null\n\t\t})\n\t}\n\n\trender () {\n\t\treturn (\n\t\t\t<div className=\"fullpage\">\n\n\t\t\t\t<div className=\"video-container\">\n\t\t\t\t\t<div className=\"video-player fit\">\n\t\t\t\t\t\t<div className=\"video-player-video-element\">\n\t\t\t\t\t\t\t<Video\n\t\t\t\t\t\t\t\tref={ (v) => this.setVideo(v) }\n\t\t\t\t\t\t\t\tonStateChange={ (state) => this.setVideoState(state) }\n\t\t\t\t\t\t\t\thls={ false }\n\t\t\t\t\t\t\t\tsrc={ this.state.videoSRC }\n\t\t\t\t\t\t\t\tsegmentStart = { 0 }\n\t\t\t\t\t\t\t\tsegmentEnd = { 999999999 } />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<VideoControls video={ this.video } videoState={ this.state.video } />\n\n\t\t\t\t</div>\n\n\t\t\t\t<div class=\"video-side\">\n\n\t\t\t\t\t<div class=\"video-selector\">\n\n\t\t\t\t\t\t<AppBar position=\"static\">\n\t\t\t\t\t\t\t<Toolbar>\n\t\t\t\t\t\t\t\t<div style={{ flex: 1 }}>{ this.props.coreImportObj.title }</div>\n\t\t\t\t\t\t\t</Toolbar>\n\t\t\t\t\t\t</AppBar>\n\n\t\t\t\t\t\t<div class=\"side-content\">\n\n\t\t\t\t\t\t\t<FormControlLabel control={<Checkbox checked={ true } value=\"checkedC\" />} label=\"Enable Intro & Outro\" />\n\n\t\t\t\t\t\t\t<h2 class=\"side-title\">Intro Video</h2>\n\n\t\t\t\t\t\t\t<div style={{ display: 'flex' }}>\n\t\t\t\t\t\t\t\t<Select\n\t\t\t\t\t\t\t\t\topen={ false }\n\t\t\t\t\t\t\t\t\tonOpen={ this.selectSlate.bind(this, 'intro') }\n\t\t\t\t\t\t\t\t\tfullWidth={ true }\n\t\t\t\t\t\t\t\t\tvalue={ 0 }>\n\t\t\t\t\t\t\t\t\t<MenuItem value={ 0 }>{ this.state.intro_slate_name }</MenuItem>\n\t\t\t\t\t\t\t\t</Select>\n\t\t\t\t\t\t\t\t<Button onClick={ this.preview.bind(this, 'intro') }>Preview</Button>\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t<h2 class=\"side-title\">Outro Video</h2>\n\n\t\t\t\t\t\t\t<div style={{ display: 'flex' }}>\n\t\t\t\t\t\t\t\t<Select\n\t\t\t\t\t\t\t\t\topen={ false }\n\t\t\t\t\t\t\t\t\tonOpen={ this.selectSlate.bind(this, 'outro') }\n\t\t\t\t\t\t\t\t\tfullWidth={ true }\n\t\t\t\t\t\t\t\t\tvalue={ 0 }>\n\t\t\t\t\t\t\t\t\t<MenuItem value={ 0 }>{ this.state.outro_slate_name }</MenuItem>\n\t\t\t\t\t\t\t\t</Select>\n\t\t\t\t\t\t\t\t<Button onClick={ this.preview.bind(this, 'outro') }>Preview</Button>\n\t\t\t\t\t\t\t</div>\n\n\n\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\tvariant=\"contained\"\n\t\t\t\t\t\t\t\t\tcolor=\"secondary\"\n\t\t\t\t\t\t\t\t\tfullWidth={ true }\n\t\t\t\t\t\t\t\t\tonClick={ this.props.saveAndClose.bind(this, this.exportData.bind(this)) }\n\t\t\t\t\t\t\t\t\tclassName=\"padded-button\">\n\t\t\t\t\t\t\t\tSave &amp; Return\n\t\t\t\t\t\t\t</Button>\n\n\t\t\t\t\t\t\t{ this.state.dialog == 'video_selector' && (\n\t\t\t\t\t\t\t\t<VideoSelectorDialog\n\t\t\t\t\t\t\t\t\ttype={ this.state.dialogArg }\n\t\t\t\t\t\t\t\t\tonClose={ this.closeSlateView.bind(this) } />\n\t\t\t\t\t\t\t)}\n\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default withStyles(styles)(Slate);\n","import React, { Component } from 'react';\nimport { withStyles } from '@material-ui/core/styles';\n\nimport Button from '@material-ui/core/Button';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport TextField from '@material-ui/core/TextField';\nimport FormHelperText from '@material-ui/core/FormHelperText';\nimport OutlinedInput from '@material-ui/core/OutlinedInput';\n\nimport MenuItem from '@material-ui/core/MenuItem';\nimport FormControl from '@material-ui/core/FormControl';\nimport Select from '@material-ui/core/Select';\n\nexport default class DefaultConfig extends Component {\n\n\tstate = {\n\t\ttitle: '',\n\t\tdescription: '',\n\t\tvisibility: 'public'\n\t}\n\n\tcomponentWillMount () {\n\t\tlet share = this.props.share;\n\n\t\tshare != undefined && this.setState({\n\t\t\ttitle: share.title,\n\t\t\tdescription: share.description, \n\t\t\t... share.configuration\n\t\t})\n\t}\n\n\thandleClose () {\n\t\tthis.props.saveAndClose(undefined);\n\t}\n\n\thandleSave () {\n\t\tthis.props.saveAndClose({\n\t\t\ttitle: this.state.title,\n\t\t\tdescription: this.state.description,\n\t\t\tconfiguration: JSON.stringify(this.state),\n\t\t\timmediate: this.props.immediate\n\t\t})\n\t}\n\n\tupdateLocalField (field, event) {\n\t\tthis.setState({\n\t\t\t[field]:  event.target[event.target.hasOwnProperty('checked') ? 'checked' : 'value']\n\t\t});\n\t}\n\n\trenderWindow () {\n\t\treturn (\n\t\t\t<div className=\"form-container\">\n\t\t\t</div>\n\t\t);\n\t}\n\n\twordCount (field, max) {\n\t\tlet length = typeof field == 'string' ? field.length : 0;\n\n\t\treturn (\n\t\t\t<FormHelperText className=\"form-helper\">\n\t\t\t\t{ length + '/' + max }\n\t\t\t</FormHelperText>\n\t\t)\n\t}\n\n\trender () {\n\t\treturn (\n\t\t\t<Dialog open={ true } maxWidth={ 'xl' } fullWidth={ true } scroll=\"paper\">\n\t\t\t\t<DialogTitle>{ this.platformName }</DialogTitle>\n\n\t\t\t\t<DialogContent>\n\t\t\t\t\t{ this.renderWindow() }\n\t\t\t\t</DialogContent>\n\n\t\t\t\t<DialogActions>\n\t\t\t\t\t<Button onClick={ this.handleClose.bind(this) } color=\"secondary\">\n\t\t\t\t\t\tCancel\n\t\t\t\t\t</Button>\n\t\t\t\t\t<Button onClick={ this.handleSave.bind(this) } color=\"secondary\" autofocus>\n\t\t\t\t\t\t{ this.props.immediate ? 'Share Now' : 'Save' }\n\t\t\t\t\t</Button>\n\t\t\t\t</DialogActions>\n\t\t\t</Dialog>\n\t\t);\n\t}\n}","import React, { Component } from 'react';\nimport { withStyles } from '@material-ui/core/styles';\n\nimport Button from '@material-ui/core/Button';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport TextField from '@material-ui/core/TextField';\nimport FormHelperText from '@material-ui/core/FormHelperText';\nimport OutlinedInput from '@material-ui/core/OutlinedInput';\n\nimport MenuItem from '@material-ui/core/MenuItem';\nimport FormControl from '@material-ui/core/FormControl';\nimport Select from '@material-ui/core/Select';\n\nimport DefaultConfig from './Default';\n\nexport default class FacebookConfig extends DefaultConfig {\n\n\tplatformName = 'Facebook';\n\n\tstate = {\n\t\ttitle: '',\n\t\tdescription: '',\n\t\tvisibility: 'public'\n\t}\n\n\trenderWindow () {\n\t\treturn (\n\t\t\t<div className=\"form-container\">\n\t\t\t\t<div className=\"form-column\">\n\t\t\t\t\t<TextField\n\t\t\t\t\t\tfullWidth={ true }\n\t\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\t\thelperText={ this.wordCount(this.state.title, 100) }\n\t\t\t\t\t\trows={ 2 } rowsMax={ 2 }\n\t\t\t\t\t\tonChange={ this.updateLocalField.bind(this, 'title') }\n\t\t\t\t\t\tvalue={ this.state.title }\n\t\t\t\t\t\tlabel=\"Video Title (Optional)\" />\n\n\t\t\t\t\t<TextField\n\t\t\t\t\t\tmultiline\n\t\t\t\t\t\tfullWidth={ true }\n\t\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\t\thelperText={ this.wordCount(this.state.description, 5000) }\n\t\t\t\t\t\trows={ 10 } rowsMax={ 10 }\n\t\t\t\t\t\tonChange={ this.updateLocalField.bind(this, 'description') }\n\t\t\t\t\t\tvalue={ this.state.description }\n\t\t\t\t\t\tlabel=\"Post Content\" />\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n}","import React, { Component } from 'react';\nimport { withStyles } from '@material-ui/core/styles';\n\nimport Button from '@material-ui/core/Button';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport TextField from '@material-ui/core/TextField';\nimport FormHelperText from '@material-ui/core/FormHelperText';\nimport OutlinedInput from '@material-ui/core/OutlinedInput';\n\nimport MenuItem from '@material-ui/core/MenuItem';\nimport FormControl from '@material-ui/core/FormControl';\nimport Select from '@material-ui/core/Select';\n\nimport DefaultConfig from './Default';\n\nexport default class YouTubeConfig extends DefaultConfig {\n\n\tplatformName = 'YouTube';\n\n\tstate = {\n\t\ttitle: '',\n\t\tdescription: '',\n\t\tvisibility: 'public'\n\t}\n\n\trenderWindow () {\n\t\treturn (\n\t\t\t<div className=\"form-container\">\n\t\t\t\t<div className=\"form-column\">\n\t\t\t\t\t<TextField\n\t\t\t\t\t\tfullWidth={ true }\n\t\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\t\thelperText={ this.wordCount(this.state.title, 100) }\n\t\t\t\t\t\trows={ 2 } rowsMax={ 2 }\n\t\t\t\t\t\tonChange={ this.updateLocalField.bind(this, 'title') }\n\t\t\t\t\t\tvalue={ this.state.title }\n\t\t\t\t\t\tlabel=\"Title\" />\n\n\t\t\t\t\t<TextField\n\t\t\t\t\t\tmultiline\n\t\t\t\t\t\tfullWidth={ true }\n\t\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\t\thelperText={ this.wordCount(this.state.description, 5000) }\n\t\t\t\t\t\trows={ 10 } rowsMax={ 10 }\n\t\t\t\t\t\tonChange={ this.updateLocalField.bind(this, 'description') }\n\t\t\t\t\t\tvalue={ this.state.description }\n\t\t\t\t\t\tlabel=\"Video Description\" />\n\t\t\t\t</div>\n\t\t\t\t<div className=\"form-column\">\n\t\t\t\t\t<FormControl variant=\"outlined\" fullWidth={ true }>\n\t\t\t\t\t\t<Select\n\t\t\t\t\t\t\tfullWidth={ true }\n\t\t\t\t\t\t\tvalue={ this.state.visibility }\n\t\t\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\t\t\tonChange={ this.updateLocalField.bind(this, 'visibility') }\n\t\t\t\t\t\t\tinput={ <OutlinedInput fullWidth={ true } /> }>\n\t\t\t\t\t\t\t<MenuItem value=\"public\">Public</MenuItem>\n\t\t\t\t\t\t\t<MenuItem value=\"unlisted\">Unlisted</MenuItem>\n\t\t\t\t\t\t\t<MenuItem value=\"private\">Private</MenuItem>\n\t\t\t\t\t\t</Select>\n\t\t\t\t\t</FormControl>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n}","import React, { Component } from 'react';\nimport { withStyles } from '@material-ui/core/styles';\n\nimport Button from '@material-ui/core/Button';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport TextField from '@material-ui/core/TextField';\nimport FormHelperText from '@material-ui/core/FormHelperText';\nimport OutlinedInput from '@material-ui/core/OutlinedInput';\n\nimport MenuItem from '@material-ui/core/MenuItem';\nimport FormControl from '@material-ui/core/FormControl';\nimport Select from '@material-ui/core/Select';\n\nimport DefaultConfig from './Default';\n\nexport default class TwitterConfig extends DefaultConfig {\n\n\tplatformName = 'Twitter';\n\n\tstate = {\n\t\ttitle: '',\n\t\tdescription: '',\n\t\tvisibility: 'public'\n\t}\n\n\trenderWindow () {\n\t\treturn (\n\t\t\t<div className=\"form-container\">\n\t\t\t\t<div className=\"form-column\">\n\t\t\t\t\t<TextField\n\t\t\t\t\t\tmultiline\n\t\t\t\t\t\tfullWidth={ true }\n\t\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\t\thelperText={ this.wordCount(this.state.tweet, 280) }\n\t\t\t\t\t\trows={ 2 } rowsMax={ 10 }\n\t\t\t\t\t\tonChange={ this.updateLocalField.bind(this, 'tweet') }\n\t\t\t\t\t\tvalue={ this.state.tweet }\n\t\t\t\t\t\tlabel=\"Tweet\" />\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n}","import React, { Component } from 'react';\nimport { withStyles } from '@material-ui/core/styles';\n\nimport Button from '@material-ui/core/Button';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport TextField from '@material-ui/core/TextField';\nimport FormHelperText from '@material-ui/core/FormHelperText';\nimport OutlinedInput from '@material-ui/core/OutlinedInput';\n\nimport MenuItem from '@material-ui/core/MenuItem';\nimport FormControl from '@material-ui/core/FormControl';\nimport Select from '@material-ui/core/Select';\n\nimport DefaultConfig from './Default';\n\nexport default class InstagramConfig extends DefaultConfig {\n\n\tplatformName = 'Instagram';\n\n\tstate = {\n\t\ttitle: '',\n\t\tdescription: '',\n\t\tvisibility: 'public'\n\t}\n\n\trenderWindow () {\n\t\treturn (\n\t\t\t<div className=\"form-container\">\n\t\t\t\t<div className=\"form-column\">\n\t\t\t\t\t<TextField\n\t\t\t\t\t\tmultiline\n\t\t\t\t\t\tfullWidth={ true }\n\t\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\t\thelperText={ this.wordCount(this.state.description, 2200) }\n\t\t\t\t\t\trows={ 2 } rowsMax={ 10 }\n\t\t\t\t\t\tonChange={ this.updateLocalField.bind(this, 'description') }\n\t\t\t\t\t\tvalue={ this.state.description }\n\t\t\t\t\t\tlabel=\"Caption\" />\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n}","import React, { Component } from 'react';\nimport { withStyles } from '@material-ui/core/styles';\n\nimport Button from '@material-ui/core/Button';\nimport Card from '@material-ui/core/Card';\nimport CardActions from '@material-ui/core/CardActions';\nimport CardContent from '@material-ui/core/CardContent';\nimport Checkbox from '@material-ui/core/Checkbox';\nimport FormGroup from '@material-ui/core/FormGroup';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport IconButton from '@material-ui/core/IconButton';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport MenuList from '@material-ui/core/MenuList';\nimport Typography from '@material-ui/core/Typography';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\n\nimport FacebookConfig from './config/Facebook';\nimport YouTubeConfig from './config/YouTube';\nimport TwitterConfig from './config/Twitter';\nimport InstagramConfig from './config/Instagram';\n\nlet platformNames = {\n\tfacebook: 'Facebook',\n\ttwitter: 'Twitter',\n\tinstagram: 'Instagram',\n\tyoutube: 'YouTube'\n}\n\n\nclass EditVideoType extends Component {\n\n\tstate = {\n\t\tplatformConfig: {},\n\n\t\t// Contains a mapping of backend share IDs for each platform, allowing configurability. \n\t\tshare: {\n\t\t}\n\t}\n\n\tcomponentWillMount () {\n\n\t\tlet videoType = this.props.videoType;\n\n\t\t// Convert big platforms object into an array of platforms we have available for this video type. \n\t\tlet enabledProviders = Object.entries(this.props.enabledProviders).map((plat) => plat[1][videoType] ? plat[0] : null);\n\t\tenabledProviders = enabledProviders.filter((a) => a != null);\n\n\t\tthis.setState({\n\t\t\tenabledProviders: enabledProviders\n\t\t})\n\t}\n\n\tgetStyle () {\n\t\tlet styles = ['selectionCardContainer'], video = this.props.video;\n\n\t\tif (video != null && (video.queued || video.rendered)) {\n\t\t\tstyles.push('rendering');\n\t\t\tstyles.push('render-state-' + this.getRenderStateClass(video.id));\n\t\t}\n\n\t\treturn styles.join(' ');\n\t}\n\n\tgetRenderStateClass (videoID) {\n\t\tlet renderState = this.props.renderState;\n\n\t\tif (!renderState) {\n\t\t\treturn 'none';\n\t\t}\n\n\t\treturn renderState.status;\n\t}\n\n\tgetRenderProgressPC () {\n\t\tlet renderState = this.props.renderState;\n\n\t\tif (!renderState) {\n\t\t\treturn 0;\n\t\t}\n\n\t\treturn renderState.level;\n\t}\n\n\trenderRenderProgress (videoType) {\n\t\tlet renderState = this.props.renderState, video = this.props.video;\n\n\t\tif (video == null || (!video.queued && !video.rendered)) {\n\t\t\treturn null;\n\t\t}\n\n\t\treturn (\n\t\t\t<div className=\"rendering-progress\">\n\t\t\t\t<div\n\t\t\t\t\tclassName=\"rendering-progress-element\"\n\t\t\t\t\tstyle={{ width: this.getRenderProgressPC() + '%' }}>\n\t\t\t\t</div>\n\t\t\t\t<p>{ renderState ? renderState.state : 'N/A' }</p>\n\t\t\t</div>\n\t\t);\n\t}\n\n\treset () {\n\t\tif (!window.confirm('Really delete this rendered video?')) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.props.updateState({\n\t\t\ttarget: {\n\t\t\t\tvalue: false\n\t\t\t}\n\t\t});\n\t}\n\n\trenderPostOptions () {\n\t\tlet videoType = this.props.videoType;\n\n\t\treturn (\n\t\t\t<div>\n\t\t\t\t<CardContent>\n\t\t\t\t\t<div class=\"title-with-action-button\">\n\t\t\t\t\t\t<Typography variant=\"h5\" component=\"h2\">\n\t\t\t\t\t\t\t{ this.props.description }\n\t\t\t\t\t\t</Typography>\n\t\t\t\t\t\t<IconButton onClick={ this.props.downloadVideo.bind(this, videoType) }>\n\t\t\t\t\t\t\t<FontAwesomeIcon icon=\"download\" className=\"small-icon\" />\n\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t\t<IconButton onClick={ this.reset.bind(this) }>\n\t\t\t\t\t\t\t<FontAwesomeIcon icon=\"trash\" className=\"small-icon\" />\n\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<p>\n\t\t\t\t\t\tSend To Platforms\n\t\t\t\t\t</p>\n\n\t\t\t\t\t<MenuList fullWidth={ true } className=\"platform-menu-list\">\n\t\t\t\t\t{ this.getPlatforms().map((platform) => (\n\t\t\t\t\t\t<MenuItem onClick={ this.configurePlatform.bind(this, platform) }>\n\t\t\t\t\t\t\t<ListItemIcon>\n\t\t\t\t\t\t\t\t<FontAwesomeIcon prefix=\"fab\" icon={ platform.icon } />\n\t\t\t\t\t\t\t</ListItemIcon>\n\t\t\t\t\t\t\t<ListItemText primary={ platform.name } />\n\t\t\t\t\t\t</MenuItem>\n\t\t\t\t\t))}\n\t\t\t\t\t</MenuList>\n\n\t\t\t\t</CardContent>\n\t\t\t</div>\n\t\t);\n\t}\n\n\tfindShareForPlatform (platform) {\n\t\tlet video = this.props.video;\n\n\t\tif (!video) {\n\t\t\treturn null;\n\t\t}\n\n\t\tlet shares = video.shares;\n\t\tlet share = shares.find((share) => share.platform.id == platform.id);\n\n\t\treturn share;\n\t}\n\n\t// If a box is checked for the first time, open the configuration window for the platform\n\tupdatePlatform (platform, event) {\n\n\t\tif (!this.isPlatformEnabled(platform) && event.target.checked) {\n\t\t\treturn this.configurePlatform(platform);\n\t\t}\n\n\t\tlet videoType = this.props.videoType;\n\t\tthis.props.updatePlatform(platform, videoType, event.target.checked);\n\t}\n\n\t// Callback to specifically open a configuration window for a platform\n\tconfigurePlatform (platform) {\n\t\tthis.openSubView(platform.platform_type, this.findShareForPlatform(platform), platform);\n\t}\n\n\tsaveConfiguration (platform, data) {\n\t\tlet videoType = this.props.videoType;\n\t\tthis.props.updatePlatform(platform, videoType, true, data);\n\t}\n\n\topenSubView (view, argument, stateData) {\n\t\tthis.setState({\n\t\t\tsubview: view,\n\t\t\tsubviewArgument: argument,\n\t\t\tsubviewState: stateData\n\t\t})\n\t}\n\n\tcloseSubView (platform, saveData) {\n\t\tif (saveData != undefined) {\n\t\t\tthis.saveConfiguration(this.state.subviewState, saveData);\n\t\t}\n\n\t\tthis.setState({\n\t\t\tsubview: null\n\t\t})\n\t}\n\n\tgetPlatforms () {\n\t\treturn this.props.platforms.filter((a) => this.state.enabledProviders.indexOf(a.platform_type) > -1);\n\t}\n\n\tisPlatformEnabled (platformID) {\n\t\tif (!this.props.video) {\n\t\t\treturn;\n\t\t}\n\n\t\tfor (var i in this.props.video.shares) {\n\t\t\tlet share = this.props.video.shares[i];\n\t\t\tif (share.platform.id == platformID) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t}\n\n\tisVideoReady () {\n\t\tlet renderState = this.props.renderState, video = this.props.video;\n\t\treturn (renderState && renderState.status == 'completed') || (video && video.rendered == true);\n\t}\n\n\trenderBody () {\n\t\tlet videoType = this.props.videoType;\n\n\t\tif (this.isVideoReady()) {\n\t\t\treturn this.renderPostOptions();\n\t\t}\n\n\t\treturn (\n\t\t\t<div className=\"selectionCard\">\n\t\t\t\t{ this.renderRenderProgress() }\n\t\t\t\t<CardActions>\n\t\t\t\t\t<Checkbox\n\t\t\t\t\t\tchecked={ this.props.enabled }\n\t\t\t\t\t\tonChange={ this.props.updateState.bind(this) }\n\t\t\t\t\t\tcolor=\"primary\" />\n\t\t\t\t</CardActions>\n\t\t\t\t<CardContent>\n\t\t\t\t\t<Typography variant=\"h5\" component=\"h2\">\n\t\t\t\t\t\t{ this.props.description }\n\t\t\t\t\t\t&nbsp;&nbsp;\n\t\t\t\t\t\t<Button disabled={ !this.props.enabled } onClick={ this.props.openSubView.bind(this) }>\n\t\t\t\t\t\t\tEdit\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</Typography>\n\n\t\t\t\t\t<p>\n\t\t\t\t\t\tSelect platforms to share on\n\t\t\t\t\t</p>\n\n\t\t\t\t\t<FormGroup>\n\t\t\t\t\t\t{ this.getPlatforms().map((platform) => \n\t\t\t\t\t\t\t<FormControlLabel\n\t\t\t\t\t\t\t\tcontrol={\n\t\t\t\t\t\t\t\t\t<Checkbox\n\t\t\t\t\t\t\t\t\t\tdisabled={ !this.props.enabled }\n\t\t\t\t\t\t\t\t\t\tchecked={ this.isPlatformEnabled(platform.id) }\n\t\t\t\t\t\t\t\t\t\tonChange={ this.updatePlatform.bind(this, platform) } />\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tlabel={\n\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t<FontAwesomeIcon icon={ platform.icon } />\n\t\t\t\t\t\t\t\t\t\t&nbsp;&nbsp;\n\t\t\t\t\t\t\t\t\t\t{ platform.name }\n\t\t\t\t\t\t\t\t\t\t&nbsp;&nbsp;\n\t\t\t\t\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\t\t\t\t\t\tdisabled={ !this.props.enabled }\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={ this.configurePlatform.bind(this, platform) }>\n\t\t\t\t\t\t\t\t\t\t\t<FontAwesomeIcon icon=\"pencil-alt\" className=\"small-icon\" />\n\t\t\t\t\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t} />\n\t\t\t\t\t\t)}\n\t\t\t\t\t</FormGroup>\n\n\t\t\t\t</CardContent>\n\t\t\t</div>\n\t\t);\n\t}\n\n\trender () {\n\t\treturn (\n\t\t\t<Card className={ this.getStyle() }>\n\t\t\t\t{ this.renderDialog() }\n\t\t\t\t{ this.renderBody() }\n\t\t\t</Card>\n\t\t)\n\t}\n\n\trenderDialog () {\n\n\t\tlet props = {\n\t\t\tshare: this.state.subviewArgument,\n\t\t\tsaveAndClose: this.closeSubView.bind(this, this.state.subview),\n\t\t\timmediate: this.isVideoReady()\n\t\t}\n\n\t\tswitch (this.state.subview) {\n\t\t\tcase 'youtube':\n\t\t\t\treturn <YouTubeConfig {...props} />;\n\t\t\tcase 'facebook':\n\t\t\t\treturn <FacebookConfig {...props} />;\n\t\t\tcase 'twitter':\n\t\t\t\treturn <TwitterConfig {...props} />;\n\t\t\tcase 'instagram':\n\t\t\t\treturn <InstagramConfig {...props} />;\n\t\t\tdefault:\n\t\t\t\treturn null;\n\t\t}\n\t}\n}\n\nexport default EditVideoType;","import React, { Component } from 'react';\nimport { Link } from 'react-router-dom';\nimport { withStyles } from '@material-ui/core/styles';\nimport Button from '@material-ui/core/Button';\n\nimport AppBar from '@material-ui/core/AppBar';\nimport Card from '@material-ui/core/Card';\nimport CardActions from '@material-ui/core/CardActions';\nimport CardContent from '@material-ui/core/CardContent';\nimport Checkbox from '@material-ui/core/Checkbox';\nimport FormGroup from '@material-ui/core/FormGroup';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport IconButton from '@material-ui/core/IconButton';\nimport TextField from '@material-ui/core/TextField';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport Typography from '@material-ui/core/Typography';\n\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\n\nimport AirTower from '../network/AirTower';\n\nimport FrameComponent from '../frame/Frame';\nimport SlateComponent from '../slate/Slate';\n\nimport EditVideoType from './EditVideoType';\n\nimport TimelineComponent from '../components/Timeline';\nimport Video from '../components/Video';\nimport VideoControls from '../components/VideoControls';\n\nconst styles = theme => ({\n\tbutton: {\n\t\tmargin: theme.spacing.unit,\n\t},\n});\n\n\nclass Edit extends Component {\n\n\tclipDelay = 1.7;\n\n\tstate = {\n\t\timportObj: null,\n\t\tcurrentTime: 0,\n\t\tlastSaveTime: 0,\n\t\tvideo: {\n\t\t\tplaying: false\n\t\t},\n\t\tslate: false,\n\t\tframe: false,\n\t\tvideoTitle: null,\n\t\tplatforms: {},\n\t\tplatformState: {},\n\t\tsubview: null,\n\t\trenderState: []\n\t}\n\n\tproviders = {\n\t\tyoutube: {\n\t\t\tslate: true,\n\t\t\tframe: false\n\t\t},\n\t\tfacebook: {\n\t\t\tslate: true,\n\t\t\tframe: true\n\t\t},\n\t\ttwitter: {\n\t\t\tslate: true,\n\t\t\tframe: true\n\t\t},\n\t\tinstagram: {\n\t\t\tslate: false,\n\t\t\tframe: true\n\t\t}\n\t}\n\n\tcomponentWillMount () {\n\t\tthis.loadImport();\n\t\tthis.loadRenderState();\n\t\tthis.loadPlatforms();\n\n\t\tthis.interval = setInterval(() => {\n\n\t\t\tif (!this.video) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (this.video.getTimecode() == 0) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (this.video.getTimecode() >= this.state.importObj.end_time) {\n\t\t\t\tthis.video.pause();\n\t\t\t\tthis.video.seekStart();\n\t\t\t}\n\n\t\t\tthis.setState({\n\t\t\t\tcurrentTime: this.video.getTimecode(),\n\t\t\t});\n\n\n\t\t}, 100);\n\t}\n\n\tcomponentWillUnmount () {\n\t\tclearInterval(this.interval);\n\t}\n\n\tgetServiceName () {\n\t\treturn 'video';\n\t}\n\n\tgetImportID () {\n\t\treturn this.props.match.params.id;\n\t}\n\n\tloadImport () {\n\t\tlet airTower = AirTower.getInstance();\n\t\tairTower.ingest.findImportByID(this.getServiceName(), this.getImportID())\n\t\t\t.then((importObj) => {\n\t\t\t\tthis.setState({\n\t\t\t\t\timportObj: importObj\n\t\t\t\t})\n\t\t\t})\n\n\t\tairTower.core.findImportByID(this.getImportID())\n\t\t\t.then((coreImportObj) => {\n\t\t\t\tthis.setState({\n\t\t\t\t\tcoreImportObj: coreImportObj,\n\t\t\t\t\tvideoTitle: coreImportObj.title\n\t\t\t\t}, () => this.checkForVideos());\n\t\t\t})\n\t\t\t.catch((error) => {\n\t\t\t\tconsole.log('error finding', error)\n\t\t\t\tairTower.core.takeOwnership(this.getServiceName(), this.getImportID(), this.state.videoTitle)\n\t\t\t\t\t.then((coreImportObj) => {\n\t\t\t\t\t\tthis.setState({\n\t\t\t\t\t\t\tcoreImportObj: coreImportObj\n\t\t\t\t\t\t}, () => this.checkForVideos());\n\t\t\t\t\t})\n\t\t\t})\n\t}\n\n\tloadPlatforms () {\n\t\tlet airTower = AirTower.getInstance();\n\t\tairTower.core.loadPlatforms()\n\t\t\t.then((platforms) => this.setState({ platforms }));\n\t}\n\n\tloadRenderState () {\n\t\tlet airTower = AirTower.getInstance();\n\n\t\tairTower.core.loadRenderState(this.getImportID())\n\t\t\t.then((renderState) => {\n\t\t\t\tthis.setState({\n\t\t\t\t\trenderState: renderState\n\t\t\t\t});\n\t\t\t\tif (renderState.length > 0) {\n\t\t\t\t\tsetTimeout(this.loadRenderState.bind(this), 5000);\n\t\t\t\t}\n\t\t\t});\n\t}\n\n\t// Based on what videos exist on the backend, check the relevant boxes to show that they exist. \n\tcheckForVideos () {\n\t\tlet videos = this.state.coreImportObj.videos;\n\n\t\tlet enabledState = {};\n\t\tfor (var i = 0; i < videos.length; i++) {\n\t\t\tenabledState[videos[i].type] = true;\n\t\t}\n\n\t\tthis.setState(enabledState);\n\t}\n\n\tgetEnabledVideoTypes () {\n\t\tlet types = ['default', 'slate', 'frame'];\n\t\treturn types.filter((a) => this.state[a] == true);\n\t}\n\n\tcheckAndCreateVideos () {\n\t\tlet required = this.getEnabledVideoTypes(); \n\t\tlet videos = this.state.coreImportObj.videos;\n\n\t\tlet airTower = AirTower.getInstance();\n\t\tfor (var i = 0; i < videos.length; i++) {\n\t\t\tif (required.includes(videos[i].type)) {\n\t\t\t\trequired = required.filter((a) => a != videos[i].type)\n\t\t\t} else {\n\t\t\t\t// no longer required, delete this!\n\t\t\t\tairTower.core.deleteVideoById(this.getImportID(), videos[i].id)\n\t\t\t\t\t.then((coreImportObj) => {\n\t\t\t\t\t\tthis.setState({\n\t\t\t\t\t\t\tcoreImportObj: coreImportObj\n\t\t\t\t\t\t})\n\t\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\tfor (var i = 0; i < required.length; i++) {\n\t\t\tairTower.core.createVideoByType(this.getImportID(), required[i])\n\t\t\t\t.then((coreImportObj) => this.setState({ coreImportObj }));\n\t\t}\n\t}\n\n\tfindVideoForType (type) {\n\t\treturn this.state.coreImportObj.videos.find((video) => video.type == type);\n\t}\n\n\tupdatePlatform (platform, videoType, enabled, configuration) {\n\t\t// if enabled, create platform for video type. otherwise, find it & delete it\n\t\tlet share = this.findShareForPlatformAndType(platform, videoType);\n\t\tlet video = this.findVideoForType(videoType);\n\t\tlet airTower = AirTower.getInstance();\n\n\t\tif (share) {\n\t\t\tif (!enabled) {\n\t\t\t\tairTower.core.deleteShare(this.getImportID(), video.id, share.id)\n\t\t\t\t\t.then((coreImportObj) => this.setState({ coreImportObj }))\n\t\t\t} else {\n\t\t\t\tairTower.core.updateShare(\n\t\t\t\t\tthis.getImportID(),\n\t\t\t\t\tvideo.id,\n\t\t\t\t\tshare.id,\n\t\t\t\t\tconfiguration.title,\n\t\t\t\t\tconfiguration.description,\n\t\t\t\t\tconfiguration.configuration\n\t\t\t\t)\n\t\t\t\t\t.then((coreImportObj) => this.setState({ coreImportObj }))\n\t\t\t\t\t.then(() => configuration.immediate && this.publishShare(video, share))\n\t\t\t}\n\t\t} else {\n\t\t\tif (enabled) {\n\t\t\t\tairTower.core.createShare(\n\t\t\t\t\tthis.getImportID(),\n\t\t\t\t\tvideo.id,\n\t\t\t\t\tplatform.id,\n\t\t\t\t\tconfiguration.title,\n\t\t\t\t\tconfiguration.description,\n\t\t\t\t\tconfiguration.configuration\n\t\t\t\t)\n\t\t\t\t\t.then((coreImportObj) => this.setState({ coreImportObj }))\n\t\t\t}\n\t\t}\n\t}\n\n\tpublishShare (video, share) {\n\t\tlet airTower = AirTower.getInstance();\n\t\tconsole.log('Publishing share', share);\n\t\tairTower.core.publishShare(this.getImportID(), video.id, share.id)\n\t\t\t.then((resp) => console.log(resp));\n\t}\n\n\tfindShareForPlatformAndType (platform, videoType) {\n\t\tlet video = this.findVideoForType(videoType);\n\n\t\tif (!video) {\n\t\t\treturn null;\n\t\t}\n\n\t\tlet shares = video.shares;\n\t\tlet share = shares.find((share) => share.platform.id == platform.id);\n\n\t\treturn share;\n\t}\n\n\tonTimelineUpdate (timecode) {\n\t\tthis.video.setTimecode(timecode);\n\t}\n\n\tsetVideo (video) {\n\t\tthis.video = video;\n\t}\n\n\tsetVideoState (state) {\n\t\tthis.setState({\n\t\t\tvideo: state\n\t\t});\n\t}\n\n\tgetVideoSRC () {\n\t\treturn this.state.importObj.getPreviewPath();\n\t}\n\n\tupdateLocalField (field, event, callback) {\n\t\tthis.setState({\n\t\t\t[field]:  event.target[event.target.hasOwnProperty('checked') ? 'checked' : 'value']\n\t\t}, () => (typeof callback == 'function' && callback()) || this.checkAndCreateVideos());\n\t}\n\n\tupdateLocalFieldAndSave (field, event) {\n\t\tthis.updateLocalField(field, event, () => {\n\t\t\tthis.rateLimitSave();\n\t\t\treturn this.checkAndCreateVideos();\n\t\t});\n\t}\n\n\topenSubView (url) {\n\t\tif (this.props.location.pathname.substr(-1, 1) == '/') {\n\t\t\tthis.props.history.replace(this.props.location.pathname + url)\n\t\t} else {\n\t\t\tthis.props.history.replace(this.props.location.pathname + '/' + url)\n\t\t}\n\t}\n\n\tcloseSubView (type, saveData) {\n\t\tif (saveData != undefined) {\n\t\t\tlet data = saveData();\n\t\t\tthis.saveConfiguration(type, data);\n\t\t}\n\n\t\tthis.props.history.replace(this.props.location.pathname + '/..');\n\t}\n\n\trateLimitSave () {\n\t\tif (this.saveTimer) {\n\t\t\treturn;\n\t\t}\n\t\tthis.saveTimer = setTimeout(this.save.bind(this), 500);\n\t}\n\n\tsave () {\n\t\tthis.saveTimer = null;\n\n\t\tlet airTower = AirTower.getInstance();\n\t\tairTower.core.takeOwnership(this.getServiceName(), this.getImportID(), this.state.videoTitle)\n\t\t/*\t.then((coreImportObj) => {\n\t\t\t\tcoreImportObj.set('title', this.state.videoTitle);\n\t\t\t\tthis.setState({\n\t\t\t\t\tcoreImportObj: this.state.coreImportObj\n\t\t\t\t});\n\t\t\t});*/\n\t}\n\n\tsendRender () {\n\t\tlet videosToSendForRender = this.getEnabledVideoTypes().map((type) => this.findVideoForType(type));\n\n\t\tvideosToSendForRender.forEach((video) => this.sendVideoForRender(video));\n\t}\n\n\tsendVideoForRender (video) {\n\t\tlet airTower = AirTower.getInstance();\n\t\tairTower.core.renderVideo(this.getImportID(), video.id)\n\t\t\t.then((coreImportObj) => {\n\t\t\t\tcoreImportObj.set('title', this.state.videoTitle);\n\t\t\t\tthis.setState({\n\t\t\t\t\tcoreImportObj: this.state.coreImportObj\n\t\t\t\t})\n\t\t\t\tthis.loadRenderState();\n\t\t\t});\n\t}\n\n\tdownloadRawVideo () {\n\t\twindow.open(this.state.importObj.getPreviewPath(), '_blank');\n\t}\n\n\tdownloadVideo (videoType) {\n\t\twindow.open(this.findVideoForType(videoType).getDownloadPath(), '_blank');\n\t}\n\n\t/**\n\t * For a child video, save its configuration\n\t */\n\tsaveConfiguration (type, data) {\n\t\tlet airTower = AirTower.getInstance();\n\t\tlet videoID = this.findVideoForType(type).id;\n\n\t\tairTower.core.updateVideo(this.getImportID(), videoID, data)\n\t\t\t.then((coreImportObj) => {\n\t\t\t\tthis.setState({\n\t\t\t\t\tcoreImportObj: coreImportObj\n\t\t\t\t})\n\t\t\t})\n\t}\n\n\tgetRenderState (videoType) {\n\t\tlet video = this.findVideoForType(videoType);\n\t\tif (!video) {\n\t\t\treturn null;\n\t\t}\n\t\treturn this.state.renderState.find((state) => state.video_id == video.id);\n\t}\n\n\t/**\n\t * Escape back to the main page\n\t */\n\thandleClose () {\n\t\tthis.props.history.push('/imports');\n\t}\n\n\tdeleteClip () {\n\t\tif (!window.confirm('Really delete video clip?')) {\n\t\t\treturn;\n\t\t}\n\n\t\tlet airTower = AirTower.getInstance();\n\t\tairTower.core.deleteImport(this.getServiceName(), this.getImportID())\n\t\t\t.then((response) => {\n\t\t\t\tconsole.log('Deletion core?', response);\n\t\t\t})\n\n\t\tairTower.ingest.deleteImportByID(this.getServiceName(), this.getImportID())\n\t\t\t.then((response) => {\n\t\t\t\tconsole.log('Deletion ingest?', response);\n\t\t\t})\n\t}\n\t\n\trender () {\n\n\t\tif (!this.state.importObj || !this.state.coreImportObj) {\n\t\t\treturn (<b>loading</b>);\n\t\t}\n\n\t\tlet urlParamArgument = this.props.location.pathname.split('/').pop()\n\n\t\tswitch (urlParamArgument) {\n\t\t\tcase 'frame':\n\t\t\t\treturn <FrameComponent\n\t\t\t\t\timportObj={ this.state.importObj }\n\t\t\t\t\tcoreImportObj={ this.state.coreImportObj }\n\t\t\t\t\tpreviewSRC={ this.getVideoSRC() }\n\t\t\t\t\tinitialState={ this.findVideoForType('frame').configuration }\n\t\t\t\t\tsaveAndClose={ this.closeSubView.bind(this, 'frame') } />;\n\n\t\t\tcase 'slate':\n\t\t\t\treturn <SlateComponent\n\t\t\t\t\timportObj={ this.state.importObj }\n\t\t\t\t\tcoreImportObj={ this.state.coreImportObj }\n\t\t\t\t\tpreviewSRC={ this.getVideoSRC() }\n\t\t\t\t\tinitialState={ this.findVideoForType('slate').configuration }\n\t\t\t\t\tsaveAndClose={ this.closeSubView.bind(this, 'slate') } />;\n\n\t\t}\n\n\t\tlet trusted = true;\n\n\t\treturn (\n\n\t\t\t<div className=\"fullpage\">\n\t\t\t\t<div className=\"video-container\">\n\t\t\t\t\t<div className=\"video-player fit\">\n\t\t\t\t\t\t<div className=\"video-player-video-element\">\n\t\t\t\t\t\t\t<Video\n\t\t\t\t\t\t\t\tref={ (v) => this.setVideo(v) }\n\t\t\t\t\t\t\t\tonStateChange={ (state) => this.setVideoState(state) }\n\t\t\t\t\t\t\t\thls={ true }\n\t\t\t\t\t\t\t\tsrc={ this.getVideoSRC() }\n\t\t\t\t\t\t\t\tsegmentStart = { this.state.importObj.start_time }\n\t\t\t\t\t\t\t\tsegmentEnd = { this.state.importObj.end_time } />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<VideoControls video={ this.video } videoState={ this.state.video } />\n\n\t\t\t\t\t<div className=\"video-timeline\">\n\t\t\t\t\t\t\n\t\t\t\t\t\t<TimelineComponent\n\t\t\t\t\t\t\tstart={ this.state.importObj.start_time }\n\t\t\t\t\t\t\tend={ this.state.importObj.end_time }\n\t\t\t\t\t\t\toffset={ this.state.currentTime }\n\t\t\t\t\t\t\tonChange={ this.onTimelineUpdate.bind(this) }\n\t\t\t\t\t\t\tsegmentStart = { this.state.importObj.start_time }\n\t\t\t\t\t\t\tsegmentEnd = { this.state.importObj.end_time }\n\t\t\t\t\t\t\tclipDelay = { this.clipDelay }\n\t\t\t\t\t\t\tautoUpdateViewport={ true }\n\t\t\t\t\t\t\treadOnly={ true }\n\t\t\t\t\t\t\tinitialOffset={ 0 } />\n\n\t\t\t\t\t</div>\n\n\t\t\t\t</div>\n\n\t\t\t\t<div className=\"video-side\">\n\t\t\t\t\t<div className=\"video-selector\">\n\t\t\t\t\t\t<AppBar position=\"static\">\n\t\t\t\t\t\t\t<Toolbar>\n\t\t\t\t\t\t\t\t<div style={{ flex: 1 }}>\n\t\t\t\t\t\t\t\t\t<TextField\n\t\t\t\t\t\t\t\t\t\tfullWidth={ true }\n\t\t\t\t\t\t\t\t\t\tplaceholder={ 'Untitled' }\n\t\t\t\t\t\t\t\t\t\tvalue={ this.state.videoTitle }\n\t\t\t\t\t\t\t\t\t\tonChange={ this.updateLocalFieldAndSave.bind(this, 'videoTitle') }\n\t\t\t\t\t\t\t\t\t\tmargin=\"normal\" />\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\t\t\tonClick={ this.deleteClip.bind(this) }>\n\t\t\t\t\t\t\t\t\t<FontAwesomeIcon icon=\"trash\" size=\"sm\" />\n\t\t\t\t\t\t\t\t</IconButton>\n\n\t\t\t\t\t\t\t</Toolbar>\n\t\t\t\t\t\t</AppBar>\n\n\t\t\t\t\t\t<div className=\"side-content\">\n\n\t\t\t\t\t\t\t<Typography variant=\"h5\" component=\"h2\">\n\t\t\t\t\t\t\t\tTarget Platforms\n\t\t\t\t\t\t\t</Typography>\n\n\t\t\t\t\t\t\t{ [['slate', 'Linear Video'], ['frame', 'Square Video']].map((videoType) => \n\t\t\t\t\t\t\t\t<EditVideoType \n\t\t\t\t\t\t\t\t\tvideoType={ videoType[0] }\n\t\t\t\t\t\t\t\t\tdescription={ videoType[1] }\n\t\t\t\t\t\t\t\t\tplatforms={ this.state.platforms }\n\t\t\t\t\t\t\t\t\tenabledProviders={ this.providers }\n\t\t\t\t\t\t\t\t\tenabled={ this.state[videoType[0]] }\n\t\t\t\t\t\t\t\t\tupdatePlatform={ this.updatePlatform.bind(this) }\n\t\t\t\t\t\t\t\t\topenSubView={ this.openSubView.bind(this, videoType[0]) }\n\t\t\t\t\t\t\t\t\tupdateState={ this.updateLocalField.bind(this, videoType[0]) }\n\t\t\t\t\t\t\t\t\tdownloadVideo={ this.downloadVideo.bind(this, videoType[0]) }\n\t\t\t\t\t\t\t\t\trenderState={ this.getRenderState(videoType[0]) }\n\t\t\t\t\t\t\t\t\tvideo={ this.findVideoForType(videoType[0]) } />\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\tvariant=\"contained\"\n\t\t\t\t\t\t\t\t\tcolor=\"secondary\"\n\t\t\t\t\t\t\t\t\tfullWidth={ true }\n\t\t\t\t\t\t\t\t\tonClick={ this.sendRender.bind(this) }\n\t\t\t\t\t\t\t\t\tclassName=\"padded-button\">\n\t\t\t\t\t\t\t\tExport &amp; Share\n\t\t\t\t\t\t\t</Button>\n\n\t\t\t\t\t\t\t<p className=\"small-text\">Rendering may take a few minutes and is dependent on available server resources</p>\n\n\t\t\t\t\t\t\t<p className=\"small-text\">{ trusted ? \"Video will be immediately shared\" : \"Video will be sent for approval before it is shared\" }</p>\n\n\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\tvariant=\"contained\"\n\t\t\t\t\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\t\t\t\t\tfullWidth={ true }\n\t\t\t\t\t\t\t\t\tonClick={ this.downloadRawVideo.bind(this) }\n\t\t\t\t\t\t\t\t\tclassName=\"padded-button\">\n\t\t\t\t\t\t\t\tDownload Raw Video\n\t\t\t\t\t\t\t</Button>\n\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default withStyles(styles)(Edit);\n","import React, { Component } from 'react';\nimport { Redirect, Link } from 'react-router-dom';\nimport { withStyles } from '@material-ui/core/styles';\n\nconst styles = theme => ({\n\tbutton: {\n\t\tmargin: theme.spacing.unit,\n\t},\n});\n\n\nclass Home extends Component {\n\trender () {\n\t\treturn (<Redirect to=\"/import\" />);\n\t}\n}\n\nexport default withStyles(styles)(Home);\n","import React, { Component } from 'react';\nimport { withStyles } from '@material-ui/core/styles';\n\nimport AirTower from '../network/AirTower';\n\nimport VideoThumbnail from '../components/VideoThumbnail.jsx';\nimport VideoThumbnailContainer from '../components/VideoThumbnailContainer.jsx';\n\nimport Button from '@material-ui/core/Button';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport DialogActions from '@material-ui/core/DialogActions';\n\nimport Moment from 'moment';\n\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\n\nclass CuePointSelector extends Component {\n\n\n\tstate = {\n\t\tdialog: '',\n\t\tpoints: []\n\t}\n\n\tcomponentWillMount () {\n\t\tthis.loadCuePoints()\n\t}\n\n\tloadCuePoints () {\n\t\tlet airTower = AirTower.getInstance().ingest;\n\t\tairTower.loadCuePoints().then((points) => this.setPoints(points));\n\t}\n\n\tsetPoints (points) {\n\t\tpoints = points.reverse();\n\t\tfor (var i = 0; i < points.length; i++) {\n\t\t\tpoints[i].set('start_time', points[i].start_time + this.props.clipDelay);\n\t\t\tpoints[i].set('end_time', points[i].end_time + this.props.clipDelay);\n\t\t}\n\t\tthis.setState({\n\t\t\tpoints: points\n\t\t})\n\t}\n\n\thandleClose () {\n\t\tthis.props.onClose(undefined);\n\t}\n\n\thandleSelect (point) {\n\t\tthis.props.onClose(point)\n\t}\n\n\tformatTime (point) {\n\t\treturn this.formatHMS(new Date(point.start_time * 1000)) + \" - \" + this.formatHMS(new Date(point.end_time * 1000));\n\t}\n\n\tformatHMS (time) {\n\t\treturn time.toISOString().substr(11, 8);\n\t}\n\n\trender () {\n\t\treturn (\n\t\t\t<Dialog open={ true } maxWidth={ 'xl' } scroll=\"paper\">\n\t\t\t\t<DialogTitle>Select Video</DialogTitle>\n\n\t\t\t\t<DialogContent>\n\t\t\t\t\t<VideoThumbnailContainer>\n\n\t\t\t\t\t\t{ this.state.points.map((point) => (\n\t\t\t\t\t\t\t<VideoThumbnail\n\t\t\t\t\t\t\t\tthumbnail={ point.getThumbnailPath() }\n\t\t\t\t\t\t\t\ttitle={ this.formatTime(point) }\n\t\t\t\t\t\t\t\tonClick={ this.handleSelect.bind(this, point) } />\n\t\t\t\t\t\t))}\n\n\t\t\t\t\t</VideoThumbnailContainer>\n\t\t\t\t</DialogContent>\n\n\t\t\t\t<DialogActions>\n\t\t\t\t\t<Button onClick={ this.handleClose.bind(this) } color=\"secondary\">\n\t\t\t\t\t\tCancel\n\t\t\t\t\t</Button>\n\t\t\t\t</DialogActions>\n\t\t\t</Dialog>\n\t\t);\n\t}\n}\n\nexport default CuePointSelector;\n","import React, { Component } from 'react';\nimport { withStyles } from '@material-ui/core/styles';\n\nimport Button from '@material-ui/core/Button';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport DialogActions from '@material-ui/core/DialogActions';\n\nimport {DateFormatInput, TimeFormatInput} from 'material-ui-next-pickers'\n\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\n\nclass TimeSelector extends Component {\n\n\tstate = {\n\t\tdate: null,\n\t\ttime: null\n\t}\n\n\tcomponentWillMount () {\n\t\tthis.setState({\n\t\t\tdate: new Date(this.props.initial),\n\t\t\ttime: new Date(this.props.initial)\n\t\t})\n\t}\n\n\tchange (value, time) {\n\t\tthis.setState({\n\t\t\t[value]: time\n\t\t})\n\t}\n\n\thandleClose () {\n\t\tthis.props.onClose(undefined);\n\t}\n\n\thandleSelect () {\n\t\tthis.props.onClose(this.getTime());\n\t}\n\n\tgetTime () {\n\t\tlet date = new Date(this.state.date.getTime());\n\n\t\tdate.setHours(this.state.time.getHours())\n\t\tdate.setMinutes(this.state.time.getMinutes())\n\t\tdate.setSeconds(this.state.time.getSeconds())\n\t\tdate.setMilliseconds(this.state.time.getMilliseconds())\n\n\t\treturn date;\n\t}\n\n\trender () {\n\t\treturn (\n\t\t\t<Dialog open={ true } maxWidth={ 'xl' } scroll=\"paper\">\n\t\t\t\t<DialogTitle>Select Time</DialogTitle>\n\n\t\t\t\t<DialogContent style={{ minWidth: '300px', minHeight: '300px'}}>\n\t\t\t\t\t<DateFormatInput\n\t\t\t\t\t\tvalue={this.state.date}\n\t\t\t\t\t\tonChange={this.change.bind(this, 'date')} />\n\t\t\t\t\t<TimeFormatInput\n\t\t\t\t\t\tvalue={this.state.time}\n\t\t\t\t\t\tonChange={this.change.bind(this, 'time')} />\n\t\t\t\t</DialogContent>\n\n\t\t\t\t<DialogActions>\n\t\t\t\t\t<Button onClick={ this.handleClose.bind(this) } color=\"secondary\">\n\t\t\t\t\t\tCancel\n\t\t\t\t\t</Button>\n\t\t\t\t\t<Button onClick={ this.handleSelect.bind(this) } color=\"secondary\">\n\t\t\t\t\t\tGo\n\t\t\t\t\t</Button>\n\t\t\t\t</DialogActions>\n\t\t\t</Dialog>\n\t\t);\n\t}\n}\n\nexport default TimeSelector;\n","import React, { Component } from 'react';\n\nimport AirTower from '../network/AirTower';\n\nimport AbsoluteTimePicker from '../components/AbsoluteTimePicker';\nimport CuePointSelector from './CuePointSelector';\nimport Video from '../components/Video';\nimport VideoControls from '../components/VideoControls';\nimport TimeSelector from './TimeSelector';\nimport TimelineComponent from '../components/Timeline';\n\nimport { withStyles } from '@material-ui/core/styles';\nimport Button from '@material-ui/core/Button';\n\nimport AppBar from '@material-ui/core/AppBar';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport IconButton from '@material-ui/core/IconButton';\n\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\n\nconst styles = theme => ({\n\tbutton: {\n\t\tmargin: theme.spacing.unit,\n\t},\n});\n\n\nclass Import extends Component {\n\n\t// in s, define the delay of the video codec\n\t// allows times to align up properly!\n\tclipDelay = 1.7;\n\n\tstate = {\n\t\tcurrentTime: 0,\n\t\tready: false,\n\t\tvideo: {\n\t\t\tplaying: false\n\t\t},\n\n\t\tdialog: null,\n\t\tsegmentStart: -1,\n\t\tsegmentEnd: -1\n\t}\n\n\tcomponentWillMount () {\n\n\t\tlet topOfHour = (Date.now() / 1000 | 0); topOfHour = topOfHour - (topOfHour % 3600);\n\n\t\tthis.start = topOfHour - 3600*5;\n\n\t\tthis.interval = setInterval(() => {\n\n\t\t\tif (!this.video) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (this.video.getTimecode() == 0) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tlet ready = this.state.ready\n\n\t\t\tlet newTimeCode = this.video.getTimecode();\n\n\t\t\tif (Math.abs(newTimeCode - this.state.currentTime) > 5000 && this.timeline != null) {\n\t\t\t\t// argh.\n\t\t\t}\n\n\t\t\tthis.setState({\n\t\t\t\tcurrentTime: newTimeCode,\n\t\t\t\tcurrentEdge: this.video.getEdgeTimecode(),\n\t\t\t\tready: true\n\t\t\t}, () => ready || this.videoLoaded())\n\n\t\t}, 100);\n\n\t}\n\n\tcomponentWillUnmount () {\n\t\tclearInterval(this.interval);\n\t}\n\n\tgetServiceName () {\n\t\treturn 'video';\n\t}\n\n\t// videoLoaded is called when the video has loaded sufficiently that we can begin\n\tvideoLoaded () {\n\t\tthis.setState({\n\t\t\tsegmentStart: (Date.now() / 1000 | 0) - 660,\n\t\t\tsegmentEnd: (Date.now() / 1000 | 0) - 60\n\t\t})\n\t}\n\n\tsetVideo (video) {\n\t\tthis.video = video;\n\t}\n\n\tonTimelineUpdate (timecode) {\n\t\tthis.video.setTimecode(timecode);\n\t}\n\n\tsetVideoState (state) {\n\t\tthis.setState({\n\t\t\tvideo: state\n\t\t})\n\t}\n\n\tsetSegmentStart (value) {\n\n\t\tconsole.log('request set segment start', value)\n\n\t\tlet segmentEnd = this.state.segmentEnd;\n\n\t\tif (segmentEnd <= value) {\n\t\t\tsegmentEnd = value + 30;\n\t\t}\n\n\t\tthis.setState({\n\t\t\tsegmentStart: value,\n\t\t\tsegmentEnd: segmentEnd\n\t\t})\n\n\t}\n\n\tsetSegmentEnd (value) {\n\n\t\tlet segmentStart = this.state.segmentStart;\n\n\t\tif (segmentStart >= value) {\n\t\t\tsegmentStart = value - 30;\n\t\t}\n\n\t\tthis.setState({\n\t\t\tsegmentStart: segmentStart,\n\t\t\tsegmentEnd: value\n\t\t})\n\n\t}\n\n\tserialize () {\n\t\treturn {\n\t\t\tname: this.state.name,\n\t\t\tstartTime: this.state.segmentStart,\n\t\t\tendTime: this.state.segmentEnd\n\t\t}\n\t}\n\n\t/**\n\t * Import the selected video and return a promise that resolves once complete.\n\t */\n\timportVideo () {\n\t\tlet data = this.serialize();\n\t\tlet airTower = AirTower.getInstance();\n\n\t\treturn airTower.ingest.importVideo(this.getServiceName(), data.startTime, data.endTime);\n\t}\n\n\t/**\n\t * Imports video and, upon completion, redirects to the homepage\n\t */\n\tsaveForLater () {\n\t\tthis.importVideo()\n\t\t\t.then((importObj) => {\n\t\t\t\tconsole.log('IMPORT OBJECT', importObj)\n\t\t\t});\n\t}\n\n\t/**\n\t * Imports video and, upon completion, redirects to the editor\n\t */\n\tsaveAndAdvance () {\n\t\tthis.importVideo()\n\t\t\t.then((importObj) => {\n\t\t\t\tconsole.log('IMPORT OBJECT 2', importObj)\n\t\t\t\tthis.props.history.push('/import/' + importObj.uuid + '/edit');\n\t\t\t});\n\t}\n\n\t/**\n\t * Quickly download video between two specified times. \n\t * This call is deferred to the backend! \n\t */\n\tquickDownload () {\n\t\twindow.open('/api/ingest/'\n\t\t\t+ this.getServiceName()\n\t\t\t+ '/download.mp4?start_time='\n\t\t\t+ (this.state.segmentStart + this.clipDelay)\n\t\t\t+ '&end_time=' + (this.state.segmentEnd + this.clipDelay),\n\t\t\t'_blank')\n\t}\n\n\t/**\n\t * Escape back to the main page\n\t */\n\thandleClose () {\n\t\tthis.props.history.push('/');\n\t}\n\n\tselectCuePoint (type) {\n\t\tthis.setState({\n\t\t\tdialog: 'cue_point',\n\t\t\tdialogArg: 'cue_point'\n\t\t})\n\t}\n\n\tselectTime (type) {\n\t\tthis.setState({\n\t\t\tdialog: 'time',\n\t\t\tdialogArg: 'time'\n\t\t})\n\t}\n\n\tcloseSlateView (saveData) {\n\t\tif (saveData != undefined && this.state.dialog == 'cue_point') {\n\t\t\tthis.setState({\n\t\t\t\tsegmentStart: saveData.start_time,\n\t\t\t\tsegmentEnd: saveData.end_time\n\t\t\t}, () => {\n\t\t\t\tthis.video.seekStart();\n\t\t\t})\n\t\t}\n\t\tif (saveData != undefined && this.state.dialog == 'time') {\n\t\t\tthis.setState({\n\t\t\t\tsegmentStart: saveData / 1000 | 0,\n\t\t\t\tsegmentEnd: (saveData / 1000 | 0) + 30\n\t\t\t}, () => {\n\t\t\t\tthis.video.seekStart();\n\t\t\t})\n\t\t}\n\t\tthis.setState({\n\t\t\tdialog: null\n\t\t})\n\t}\n\n\tsetTimeline (timeline) {\n\t\tif (this.timeline != null) {\n\t\t\treturn;\n\t\t}\n\t\tthis.timeline = timeline;\n\t}\n\n\trender () {\n\t\treturn (\n\n\t\t\t<div className=\"fullpage\">\n\n\t\t\t\t<div className=\"video-container\">\n\n\t\t\t\t\t<div className=\"video-player fit\">\n\t\t\t\t\t\t<div className=\"video-player-video-element\">\n\t\t\t\t\t\t\t<Video\n\t\t\t\t\t\t\t\tref={ (v) => this.setVideo(v) }\n\t\t\t\t\t\t\t\tonStateChange={ (state) => this.setVideoState(state) }\n\t\t\t\t\t\t\t\thls={ true }\n\t\t\t\t\t\t\t\tsrc={ \"/api/ingest/\" + this.getServiceName() + \"/preview.m3u8?start_time=1545354123&end_time=99999999999\" }\n\t\t\t\t\t\t\t\tsegmentStart = { this.state.segmentStart }\n\t\t\t\t\t\t\t\tsegmentEnd = { this.state.segmentEnd } />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<VideoControls video={ this.video } videoState={ this.state.video } />\n\n\t\t\t\t\t<div className=\"video-timeline\">\n\t\t\t\t\t\t\n\t\t\t\t\t\t<TimelineComponent\n\t\t\t\t\t\t\tstart={ this.start }\n\t\t\t\t\t\t\tend={ this.state.currentEdge }\n\t\t\t\t\t\t\toffset={ this.state.currentTime }\n\t\t\t\t\t\t\tonChange={ this.onTimelineUpdate.bind(this) }\n\t\t\t\t\t\t\tsegmentStart = { this.state.segmentStart }\n\t\t\t\t\t\t\tsegmentEnd = { this.state.segmentEnd }\n\t\t\t\t\t\t\tclipDelay={ this.clipDelay }\n\t\t\t\t\t\t\tref = { this.setTimeline.bind(this) }\n\n\t\t\t\t\t\t\tautoUpdateViewport={ true || this.state.video.playing }\n\n\t\t\t\t\t\t\tonSegmentStart={ this.setSegmentStart.bind(this) }\n\t\t\t\t\t\t\tonSegmentEnd={ this.setSegmentEnd.bind(this) }\n\t\t\t\t\t\t\tinitialOffset={ 0 } />\n\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t\t<div className=\"video-side\">\n\t\t\t\t\t<div className=\"video-selector\">\n\n\t\t\t\t\t\t<AppBar position=\"static\">\n\t\t\t\t\t\t\t<Toolbar>\n\t\t\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\t\t\t\tcolor=\"inherit\"\n\t\t\t\t\t\t\t\t\t\taria-label=\"Save For Later\"\n\t\t\t\t\t\t\t\t\t\tonClick={ this.handleClose.bind(this) } >\n\t\t\t\t\t\t\t\t\t<FontAwesomeIcon icon=\"long-arrow-alt-left\" />\n\t\t\t\t\t\t\t\t</IconButton>\n\n\t\t\t\t\t\t\t\t<div style={{ flex: 1 }}></div>\n\t\t\t\t\t\t\t</Toolbar>\n\t\t\t\t\t\t</AppBar>\n\n\t\t\t\t\t\t<div className=\"side-content import-wizard\">\n\n\t\t\t\t\t\t\t<h1>Import Wizard.</h1>\n\n\t\t\t\t\t\t\t<h3>1. Find Content</h3>\n\n\t\t\t\t\t\t\t<div class=\"row\">\n\t\t\t\t\t\t\t\t<Button \n\t\t\t\t\t\t\t\t\t\tvariant=\"contained\"\n\t\t\t\t\t\t\t\t\t\tcolor=\"secondary\"\n\t\t\t\t\t\t\t\t\t\tfullWidth={ true }\n\t\t\t\t\t\t\t\t\t\tonClick={ this.selectTime.bind(this) }>\n\t\t\t\t\t\t\t\t\t<FontAwesomeIcon icon=\"stopwatch\" />&nbsp;Search By Time\n\t\t\t\t\t\t\t\t</Button>\n\n\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\tvariant=\"contained\"\n\t\t\t\t\t\t\t\t\t\tcolor=\"secondary\"\n\t\t\t\t\t\t\t\t\t\tfullWidth={ true }\n\t\t\t\t\t\t\t\t\t\tonClick={ this.selectCuePoint.bind(this) }>\n\t\t\t\t\t\t\t\t\t<FontAwesomeIcon icon=\"file-video\" />&nbsp;Search By Clip\n\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t<br /><br />\n\n\t\t\t\t\t\t\t<h3>2. Fine Tune</h3>\n\n\t\t\t\t\t\t\t<AbsoluteTimePicker\n\t\t\t\t\t\t\t\tlabel=\"Start\"\n\t\t\t\t\t\t\t\tvideo={ this.video }\n\t\t\t\t\t\t\t\tonChange={ this.setSegmentStart.bind(this) }\n\t\t\t\t\t\t\t\tclipDelay = { this.clipDelay }\n\t\t\t\t\t\t\t\tvalue={ this.state.segmentStart } />\n\n\t\t\t\t\t\t\t<AbsoluteTimePicker\n\t\t\t\t\t\t\t\tlabel=\"End\"\n\t\t\t\t\t\t\t\tvideo={ this.video }\n\t\t\t\t\t\t\t\tonChange={ this.setSegmentEnd.bind(this) }\n\t\t\t\t\t\t\t\tclipDelay = { this.clipDelay }\n\t\t\t\t\t\t\t\tvalue={ this.state.segmentEnd } />\n\n\t\t\t\t\t\t\t<br /><br />\n\n\t\t\t\t\t\t\t<h3>3. Import</h3>\n\n\t\t\t\t\t\t\t<div class=\"row\">\n\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\tvariant=\"contained\"\n\t\t\t\t\t\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\t\t\t\t\t\tfullWidth={ true }\n\t\t\t\t\t\t\t\t\t\tclassName=\"padded-button\"\n\t\t\t\t\t\t\t\t\t\tonClick={ this.saveForLater.bind(this) }>\n\t\t\t\t\t\t\t\t\tSave For Later\n\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\tvariant=\"contained\"\n\t\t\t\t\t\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\t\t\t\t\t\tfullWidth={ true }\n\t\t\t\t\t\t\t\t\t\tclassName=\"padded-button\"\n\t\t\t\t\t\t\t\t\t\tonClick={ this.quickDownload.bind(this) }>\n\t\t\t\t\t\t\t\t\tQuick Download\n\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\tvariant=\"contained\"\n\t\t\t\t\t\t\t\t\tcolor=\"secondary\"\n\t\t\t\t\t\t\t\t\tfullWidth={ true }\n\t\t\t\t\t\t\t\t\tclassName=\"padded-button\"\n\t\t\t\t\t\t\t\t\tonClick={ this.saveAndAdvance.bind(this) }>\n\t\t\t\t\t\t\t\tNext: Edit Video\n\t\t\t\t\t\t\t</Button>\n\n\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t\t{ this.state.dialog == 'cue_point' && (\n\t\t\t\t\t<CuePointSelector onClose={ this.closeSlateView.bind(this) } clipDelay={ this.clipDelay } /> \n\t\t\t\t)}\n\n\t\t\t\t{ this.state.dialog == 'time' && (\n\t\t\t\t\t<TimeSelector initial={ this.state.currentTime * 1000 } onClose={ this.closeSlateView.bind(this) } /> \n\t\t\t\t)}\n\t\t\t</div>\n\n\t\t);\n\t}\n}\n\nexport default withStyles(styles)(Import);\n","import React, { Component } from 'react';\nimport { Link } from 'react-router-dom';\nimport { withStyles } from '@material-ui/core/styles';\n\nimport AppBar from '@material-ui/core/AppBar';\nimport Button from '@material-ui/core/Button';\nimport IconButton from '@material-ui/core/IconButton';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport Typography from '@material-ui/core/Typography';\n\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\n\nimport AirTower from '../network/AirTower';\n\nimport VideoThumbnail from '../components/VideoThumbnail.jsx';\nimport VideoThumbnailContainer from '../components/VideoThumbnailContainer.jsx';\n\nconst styles = theme => ({\n\tbutton: {\n\t\tmargin: theme.spacing.unit,\n\t},\n});\n\n\nclass Imports extends Component {\n\n\tstate = {\n\t\timports: [],\n\t\tcoreImports: [],\n\t\tqueue: 2\n\t}\n\n\tcomponentWillMount () {\n\t\tthis.loadImports()\n\t}\n\n\tgetServiceName () {\n\t\treturn 'video';\n\t}\n\n\tloadImports () {\n\t\tlet airTower = AirTower.getInstance();\n\t\tairTower.ingest.findImports(this.getServiceName())\n\t\t\t.then((imports) => {\n\t\t\t\timports = imports.sort((a, b) => a.end_time < b.end_time);\n\t\t\t\tthis.setState({\n\t\t\t\t\timports: imports,\n\t\t\t\t\tqueue: this.state.queue - 1\n\t\t\t\t}, () => this.recoverMissing())\n\t\t\t});\n\n\t\tairTower.core.loadImports()\n\t\t\t.then((coreImports) => {\n\t\t\t\tthis.setState({\n\t\t\t\t\tcoreImports: coreImports,\n\t\t\t\t\tqueue: this.state.queue - 1\n\t\t\t\t}, () => this.recoverMissing())\n\t\t\t});\n\t}\n\n\tfindCoreImport (importObj) {\n\t\tlet coreImport = this.state.coreImports.find((coreImp) => coreImp.uuid == importObj.uuid);\n\n\t\treturn coreImport || {};\n\t}\n\n\trecoverMissing () {\n\t\t// Wait for all promises to resolve. \n\t\tif (this.state.queue != 0) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.state.imports.forEach((importObj) => {\n\t\t\tlet coreImport = this.state.coreImports.find((coreImp) => coreImp && coreImp.uuid == importObj.uuid);\n\n\t\t\tif (!coreImport) {\n\t\t\t\tthis.createCoreImport(importObj);\n\t\t\t}\n\t\t})\n\t}\n\n\tcreateCoreImport (importObj) {\n\t\tlet airTower = AirTower.getInstance();\n\t\tairTower.core.takeOwnership(importObj.service_name, importObj.uuid, '')\n\t\t\t.then((coreImportObj) => {\n\t\t\t\t// Add the new import object into the array! :-) \n\t\t\t\tlet newCoreImports = this.state.coreImports.slice(0);\n\t\t\t\tnewCoreImports.push(coreImportObj);\n\n\t\t\t\tthis.setState({\n\t\t\t\t\tcoreImports: newCoreImports\n\t\t\t\t});\n\t\t\t})\n\t}\n\n\thandleSelect (importObj) {\n\t\tthis.props.history.push('/import/' + importObj.uuid + '/edit');\n\t}\n\n\topenNew () {\n\n\t}\n\n\t/**\n\t * Escape back to the main page\n\t */\n\thandleClose () {\n\t\tthis.props.history.push('/');\n\t}\n\n\trender () {\n\t\treturn (\n\n\t\t\t<div class=\"fullpage home imports\">\n\n\t\t\t\t<div class=\"main-navigation\">\n\n\t\t\t\t\t<VideoThumbnailContainer>\n\t\t\t\t\t\t{ this.state.imports.map((importObj) => (\n\t\t\t\t\t\t\t<VideoThumbnail\n\t\t\t\t\t\t\t\tthumbnail={ importObj.getThumbnailPath() }\n\t\t\t\t\t\t\t\ttitle={ this.findCoreImport(importObj).title }\n\t\t\t\t\t\t\t\tonClick={ this.handleSelect.bind(this, importObj) } />\n\t\t\t\t\t\t))}\n\t\t\t\t\t</VideoThumbnailContainer>\n\n\t\t\t\t</div>\n\n\t\t\t</div>\n\n\t\t);\n\t}\n}\n\nexport default withStyles(styles)(Imports);\n","import React, { Component } from 'react';\n\nexport default class Preload extends Component {\n\trender () {\n\t\treturn (\n\t\t\t<div class=\"fullpage home\">\n\t\t\t\ti am loading\n\t\t\t</div>\n\t\t);\n\t}\n}\n\n","import React, { Component } from 'react';\nimport { Router, Route, Switch } from 'react-router';\nimport { BrowserRouter } from 'react-router-dom';\n\nexport default class Header extends Component {\n\trender () {\n\t\treturn (\n\t\t\t<div className=\"header\">\n\t\t\t\ttest\n\t\t\t</div>\n\t\t);\n\t}\n}","import React, { Component } from 'react';\nimport { Router, Route, Switch } from 'react-router';\nimport { BrowserRouter, Link } from 'react-router-dom';\nimport classNames from 'classnames';\n\nimport { withStyles } from '@material-ui/core/styles';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport Divider from '@material-ui/core/Divider';\nimport Drawer from '@material-ui/core/Drawer';\nimport IconButton from '@material-ui/core/IconButton';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItemText from '@material-ui/core/ListItemText';\n\nimport ChevronLeftIcon from '@material-ui/icons/ChevronLeft';\nimport HomeIcon from '@material-ui/icons/Home';\nimport MenuIcon from '@material-ui/icons/Menu';\nimport PublicIcon from '@material-ui/icons/Public';\nimport QueuePlayNextIcon from '@material-ui/icons/QueuePlayNext';\nimport VideoLibraryIcon from '@material-ui/icons/VideoLibrary';\n\nconst drawerWidth = 240;\n\nconst styles = (theme) => ({\n\tdrawerBase: {\n\t\twidth: drawerWidth,\n\t\tflexShrink: 0,\n\t\twhiteSpace: 'nowrap'\n\t},\n\tdrawerOpen: {\n\t\toverflowX: 'hidden',\n\t\twidth: drawerWidth,\n\t\ttransition: theme.transitions.create('width', {\n\t\t\teasing: theme.transitions.easing.sharp,\n\t\t\tduration: theme.transitions.duration.enteringScreen\n\t\t})\n\t},\n\tdrawerClose: {\n\t\toverflowX: 'hidden',\n\t\twidth: theme.spacing.unit * 7 + 1,\n\t\t[theme.breakpoints.up('sm')]: {\n\t\t\twidth: theme.spacing.unit * 8 + 7,\n\t\t},\n\t\ttransition: theme.transitions.create('width', {\n\t\t\teasing: theme.transitions.easing.sharp,\n\t\t\tduration: theme.transitions.duration.leavingScreen\n\t\t})\n\t},\n\tmenu: {\n\t\tpaddingTop: 0\n\t},\n\n\tuserBox: {\n\t\theight: '0px',\n\t\toverflowY: 'hidden',\n\t\topacity: 0,\n\t\tvisibility: 'hidden',\n\t\ttransition: theme.transitions.create('height', {\n\t\t\teasing: theme.transitions.easing.sharp,\n\t\t\tduration: theme.transitions.duration.leavingScreen\n\t\t})\n\t},\n\tuserBoxVisible: {\n\t\theight: '100px',\n\t\topacity: 1,\n\t\tvisibility: 'visible'\n\t},\n\n\thideState: {\n\t\topacity: '0',\n\t\ttransition: theme.transitions.create('opacity', {\n\t\t\teasing: theme.transitions.easing.sharp,\n\t\t\tduration: theme.transitions.duration.leavingScreen\n\t\t})\n\t},\n\tshowState: {\n\t\topacity: '1'\n\t}\n})\n\nclass Navigation extends Component {\n\n\tstate = {\n\t\topen: false\n\t}\n\n\ttoggle () {\n\t\tthis.setState({\n\t\t\topen: !this.state.open \n\t\t}, () => {\n\t\t\tsetTimeout(() => {\n\t\t\t\twindow.dispatchEvent(new Event('resize'));\n\t\t\t}, 295);\n\t\t})\n\t}\n\n\tclose () {\n\t\tthis.setState({\n\t\t\topen: false\n\t\t}, () => {\n\t\t\tsetTimeout(() => {\n\t\t\t\twindow.dispatchEvent(new Event('resize'));\n\t\t\t}, 295);\n\t\t})\n\t}\n\n\trender () {\n\t\tconst { classes } = this.props;\n\n\t\tconst drawerClasses = classNames(classes.drawerBase, {\n\t\t\t[classes.drawerOpen]: this.state.open,\n\t\t\t[classes.drawerClose]: !this.state.open,\n\t\t})\n\n\t\tconst userBoxClasses = classNames(classes.userBox, {\n\t\t\t[classes.userBoxVisible]: this.state.open\n\t\t})\n\n\t\tconst hideOnOpen = classNames({\n\t\t\t[classes.hideState]: this.state.open,\n\t\t\t[classes.showState]: !this.state.open\n\t\t})\n\n\t\treturn (\n\t\t\t<Drawer open={ this.state.open } anchor=\"left\" variant=\"permanent\" className={ drawerClasses } classes={{ paper: drawerClasses }}>\n\t\t\t\t<List className={ classes.menu }>\n\t\t\t\t\t<ListItem button={ !this.state.open } onClick={ this.toggle.bind(this) }>\n\t\t\t\t\t\t<ListItemIcon>\n\t\t\t\t\t\t\t<MenuIcon className={ hideOnOpen } />\n\t\t\t\t\t\t</ListItemIcon>\n\t\t\t\t\t\t<ListItemText primary={\"\"} />\n\t\t\t\t\t\t<IconButton>\n\t\t\t\t\t\t\t<ChevronLeftIcon />\n\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t</ListItem>\n\n\t\t\t\t\t<div className={ userBoxClasses }>\n\t\t\t\t\t\t{ '{ user.name }' }\n\t\t\t\t\t</div>\n\t\t\t\t\t<Divider />\n\n\t\t\t\t\t<ListItem component={ Link } button to=\"/\" onClick={ this.close.bind(this) }>\n\t\t\t\t\t\t<ListItemIcon>\n\t\t\t\t\t\t\t<HomeIcon />\n\t\t\t\t\t\t</ListItemIcon>\n\t\t\t\t\t\t<ListItemText primary=\"Home\" />\n\t\t\t\t\t</ListItem>\n\n\t\t\t\t\t<ListItem component={ Link } button to=\"/import\" onClick={ this.close.bind(this) }>\n\t\t\t\t\t\t<ListItemIcon>\n\t\t\t\t\t\t\t<QueuePlayNextIcon />\n\t\t\t\t\t\t</ListItemIcon>\n\t\t\t\t\t\t<ListItemText primary=\"New Import\" />\n\t\t\t\t\t</ListItem>\n\n\t\t\t\t\t<ListItem component={ Link } button to=\"/imports\" onClick={ this.close.bind(this) }>\n\t\t\t\t\t\t<ListItemIcon>\n\t\t\t\t\t\t\t<VideoLibraryIcon />\n\t\t\t\t\t\t</ListItemIcon>\n\t\t\t\t\t\t<ListItemText primary=\"Import Library\" />\n\t\t\t\t\t</ListItem>\n\n\t\t\t\t\t<ListItem component={ Link } button to=\"/config\" onClick={ this.close.bind(this) }>\n\t\t\t\t\t\t<ListItemIcon>\n\t\t\t\t\t\t\t<PublicIcon />\n\t\t\t\t\t\t</ListItemIcon>\n\t\t\t\t\t\t<ListItemText primary=\"Platform Settings\" />\n\t\t\t\t\t</ListItem>\n\n\t\t\t\t</List>\n\t\t\t</Drawer>\n\t\t);\n\t}\n}\n\nexport default withStyles(styles, { withTheme: true })(Navigation);","import React, { Component } from 'react';\nimport { Router, Route, Switch } from 'react-router';\nimport { BrowserRouter } from 'react-router-dom';\n\nimport './App.css';\nimport logo from './logo.svg';\n\nimport AirTower from './network/AirTower';\n\nimport ConfigComponent from './config/Config';\nimport CreatePlatformComponent from './config/CreatePlatform';\nimport EditPlatformComponent from './config/EditPlatform';\n\nimport EditComponent from './edit/Edit';\nimport HomeComponent from './home/Home';\nimport ImportComponent from './import/Import';\nimport ImportsComponent from './imports/Imports';\nimport PreloadComponent from './Preload';\n\nimport Header from './navigation/Header';\nimport Navigation from './navigation/Navigation';\n\nimport { MuiThemeProvider, createMuiTheme } from '@material-ui/core/styles';\n\n// Set up Font Awesome icons.\n// We only import what we need to ensure that we don't use crazy resources.\n\nimport { library } from '@fortawesome/fontawesome-svg-core';\n\nimport {\n\tfaPlay,\n\tfaPause,\n\tfaLongArrowAltLeft,\n\tfaLongArrowAltRight,\n\tfaStepBackward,\n\tfaStepForward,\n\tfaSave,\n\tfaPlus,\n\tfaFileVideo,\n\tfaTrash,\n\tfaDownload,\n\tfaPencilAlt,\n\tfaStopwatch\n} from '@fortawesome/free-solid-svg-icons';\n\nimport {\n\tfaFacebookF,\n\tfaTwitter,\n\tfaInstagram,\n\tfaYoutube\n} from '@fortawesome/free-brands-svg-icons';\n\nlibrary.add(\n\tfaPlay,\n\tfaPause,\n\tfaLongArrowAltLeft,\n\tfaLongArrowAltRight,\n\tfaStepBackward,\n\tfaStepForward,\n\tfaSave,\n\tfaPlus,\n\tfaFileVideo,\n\tfaPencilAlt,\n\tfaTrash,\n\tfaDownload,\n\tfaStopwatch,\n\tfaFacebookF,\n\tfaTwitter,\n\tfaInstagram,\n\tfaYoutube\n);\n\n\nconst theme = createMuiTheme({\n\tpalette: {\n\t\ttype: 'dark',\n\t},\n});\n\nclass App extends Component {\n\tstate = {\n\t\tready: false\n\t}\n\tcomponentWillMount () {\n\t\tAirTower.getInstance().bootstrap().then((a) => {\n\t\t\tthis.setState({\n\t\t\t\tready: true\n\t\t\t})\n\t\t})\n\t}\n\trender () {\n\n\t\tif (!this.state.ready) {\n\t\t\treturn <PreloadComponent />\n\t\t}\n\n\t\treturn (\n\t\t\t<BrowserRouter>\n\t\t\t\t<MuiThemeProvider theme={theme}>\n\t\t\t\t\t<div className=\"page-master\">\n\t\t\t\t\t\t<div className=\"page-container\">\n\t\t\t\t\t\t\t<Navigation />\n\t\t\t\t\t\t\t<div className=\"page-outlet\">\n\t\t\t\t\t\t\t\t<Route exact path=\"/\" component={ HomeComponent } />\n\t\t\t\t\t\t\t\t<Route exact path=\"/import\" component={ ImportComponent } />\n\t\t\t\t\t\t\t\t<Route exact path=\"/imports\" component={ ImportsComponent } />\n\t\t\t\t\t\t\t\t<Route path=\"/import/:id/edit\" component={ EditComponent } />\n\t\t\t\t\t\t\t\t<Route exact path=\"/config\" component={ ConfigComponent } />\n\t\t\t\t\t\t\t\t<Route path=\"/config/platform/:id\" component={ EditPlatformComponent } />\n\t\t\t\t\t\t\t\t<Route exact path=\"/config/platform/new\" component={ CreatePlatformComponent } />\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</MuiThemeProvider>\n\t\t\t</BrowserRouter>\n\t\t);\n\t}\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA.\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      if (\n        response.status === 404 ||\n        response.headers.get('content-type').indexOf('javascript') === -1\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}